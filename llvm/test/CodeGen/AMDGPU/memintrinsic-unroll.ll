; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc -mtriple=amdgcn-amd-amdhsa -mcpu=gfx1030 %s -o - | FileCheck %s
; RUN: llc -mtriple=amdgcn-amd-amdhsa -mcpu=gfx1030 -mattr=-unaligned-access-mode %s -o - | FileCheck -check-prefix=ALIGNED %s

; For checking that LowerMemIntrinsics lowers memcpy and memmove with large
; constant copy-sizes into loops with multiple load/store pairs.


; memcpy for address spaces 0, 1, 4, 5

define void @memcpy_p0_p0_sz2048(ptr addrspace(0) align 1 %dst, ptr addrspace(0) align 1 readonly %src) {
; CHECK-LABEL: memcpy_p0_p0_sz2048:
; CHECK:       ; %bb.0: ; %entry
; CHECK-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; CHECK-NEXT:    s_mov_b64 s[6:7], 0
; CHECK-NEXT:  .LBB0_1: ; %load-store-loop
; CHECK-NEXT:    ; =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    s_clause 0xf
; CHECK-NEXT:    flat_load_dwordx4 v[4:7], v[2:3] offset:224
; CHECK-NEXT:    flat_load_dwordx4 v[8:11], v[2:3] offset:240
; CHECK-NEXT:    flat_load_dwordx4 v[12:15], v[2:3] offset:192
; CHECK-NEXT:    flat_load_dwordx4 v[16:19], v[2:3] offset:208
; CHECK-NEXT:    flat_load_dwordx4 v[20:23], v[2:3] offset:160
; CHECK-NEXT:    flat_load_dwordx4 v[24:27], v[2:3] offset:176
; CHECK-NEXT:    flat_load_dwordx4 v[28:31], v[2:3] offset:128
; CHECK-NEXT:    flat_load_dwordx4 v[32:35], v[2:3] offset:144
; CHECK-NEXT:    flat_load_dwordx4 v[36:39], v[2:3] offset:96
; CHECK-NEXT:    flat_load_dwordx4 v[48:51], v[2:3] offset:112
; CHECK-NEXT:    flat_load_dwordx4 v[52:55], v[2:3] offset:64
; CHECK-NEXT:    flat_load_dwordx4 v[64:67], v[2:3] offset:80
; CHECK-NEXT:    flat_load_dwordx4 v[68:71], v[2:3] offset:32
; CHECK-NEXT:    flat_load_dwordx4 v[80:83], v[2:3] offset:48
; CHECK-NEXT:    flat_load_dwordx4 v[84:87], v[2:3]
; CHECK-NEXT:    flat_load_dwordx4 v[96:99], v[2:3] offset:16
; CHECK-NEXT:    s_add_u32 s6, s6, 1
; CHECK-NEXT:    s_addc_u32 s7, s7, 0
; CHECK-NEXT:    v_add_co_u32 v2, vcc_lo, 0x100, v2
; CHECK-NEXT:    v_cmp_lt_u64_e64 s4, s[6:7], 8
; CHECK-NEXT:    v_add_co_ci_u32_e32 v3, vcc_lo, 0, v3, vcc_lo
; CHECK-NEXT:    s_waitcnt vmcnt(15) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[4:7] offset:224
; CHECK-NEXT:    s_waitcnt vmcnt(14) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[8:11] offset:240
; CHECK-NEXT:    s_waitcnt vmcnt(13) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[12:15] offset:192
; CHECK-NEXT:    s_waitcnt vmcnt(12) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[16:19] offset:208
; CHECK-NEXT:    s_waitcnt vmcnt(11) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[20:23] offset:160
; CHECK-NEXT:    s_waitcnt vmcnt(10) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[24:27] offset:176
; CHECK-NEXT:    s_waitcnt vmcnt(9) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[28:31] offset:128
; CHECK-NEXT:    s_waitcnt vmcnt(8) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[32:35] offset:144
; CHECK-NEXT:    s_waitcnt vmcnt(7) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[36:39] offset:96
; CHECK-NEXT:    s_waitcnt vmcnt(6) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[48:51] offset:112
; CHECK-NEXT:    s_waitcnt vmcnt(5) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[52:55] offset:64
; CHECK-NEXT:    s_waitcnt vmcnt(4) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[64:67] offset:80
; CHECK-NEXT:    s_waitcnt vmcnt(3) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[68:71] offset:32
; CHECK-NEXT:    s_waitcnt vmcnt(2) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[80:83] offset:48
; CHECK-NEXT:    s_waitcnt vmcnt(1) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[84:87]
; CHECK-NEXT:    s_waitcnt vmcnt(0) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[96:99] offset:16
; CHECK-NEXT:    s_and_b32 vcc_lo, exec_lo, s4
; CHECK-NEXT:    v_add_co_u32 v0, s4, 0x100, v0
; CHECK-NEXT:    v_add_co_ci_u32_e64 v1, s4, 0, v1, s4
; CHECK-NEXT:    s_cbranch_vccnz .LBB0_1
; CHECK-NEXT:  ; %bb.2: ; %memcpy-split
; CHECK-NEXT:    s_waitcnt lgkmcnt(0)
; CHECK-NEXT:    s_setpc_b64 s[30:31]
;
; ALIGNED-LABEL: memcpy_p0_p0_sz2048:
; ALIGNED:       ; %bb.0: ; %entry
; ALIGNED-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; ALIGNED-NEXT:    s_mov_b64 s[6:7], 0
; ALIGNED-NEXT:  .LBB0_1: ; %load-store-loop
; ALIGNED-NEXT:    ; =>This Inner Loop Header: Depth=1
; ALIGNED-NEXT:    s_clause 0xf
; ALIGNED-NEXT:    flat_load_ubyte v4, v[2:3] offset:2
; ALIGNED-NEXT:    flat_load_ubyte v5, v[2:3] offset:3
; ALIGNED-NEXT:    flat_load_ubyte v6, v[2:3]
; ALIGNED-NEXT:    flat_load_ubyte v7, v[2:3] offset:1
; ALIGNED-NEXT:    flat_load_ubyte v8, v[2:3] offset:6
; ALIGNED-NEXT:    flat_load_ubyte v9, v[2:3] offset:7
; ALIGNED-NEXT:    flat_load_ubyte v10, v[2:3] offset:4
; ALIGNED-NEXT:    flat_load_ubyte v11, v[2:3] offset:5
; ALIGNED-NEXT:    flat_load_ubyte v12, v[2:3] offset:10
; ALIGNED-NEXT:    flat_load_ubyte v13, v[2:3] offset:11
; ALIGNED-NEXT:    flat_load_ubyte v14, v[2:3] offset:8
; ALIGNED-NEXT:    flat_load_ubyte v15, v[2:3] offset:9
; ALIGNED-NEXT:    flat_load_ubyte v16, v[2:3] offset:14
; ALIGNED-NEXT:    flat_load_ubyte v17, v[2:3] offset:15
; ALIGNED-NEXT:    flat_load_ubyte v18, v[2:3] offset:12
; ALIGNED-NEXT:    flat_load_ubyte v19, v[2:3] offset:13
; ALIGNED-NEXT:    s_add_u32 s6, s6, 1
; ALIGNED-NEXT:    s_addc_u32 s7, s7, 0
; ALIGNED-NEXT:    v_add_co_u32 v2, vcc_lo, v2, 16
; ALIGNED-NEXT:    v_cmp_gt_u64_e64 s4, 0x80, s[6:7]
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v3, vcc_lo, 0, v3, vcc_lo
; ALIGNED-NEXT:    s_waitcnt vmcnt(15) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v4 offset:2
; ALIGNED-NEXT:    s_waitcnt vmcnt(14) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v5 offset:3
; ALIGNED-NEXT:    s_waitcnt vmcnt(13) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v6
; ALIGNED-NEXT:    s_waitcnt vmcnt(12) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v7 offset:1
; ALIGNED-NEXT:    s_waitcnt vmcnt(11) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v8 offset:6
; ALIGNED-NEXT:    s_waitcnt vmcnt(10) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v9 offset:7
; ALIGNED-NEXT:    s_waitcnt vmcnt(9) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v10 offset:4
; ALIGNED-NEXT:    s_waitcnt vmcnt(8) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v11 offset:5
; ALIGNED-NEXT:    s_waitcnt vmcnt(7) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v12 offset:10
; ALIGNED-NEXT:    s_waitcnt vmcnt(6) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v13 offset:11
; ALIGNED-NEXT:    s_waitcnt vmcnt(5) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v14 offset:8
; ALIGNED-NEXT:    s_waitcnt vmcnt(4) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v15 offset:9
; ALIGNED-NEXT:    s_waitcnt vmcnt(3) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v16 offset:14
; ALIGNED-NEXT:    s_waitcnt vmcnt(2) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v17 offset:15
; ALIGNED-NEXT:    s_waitcnt vmcnt(1) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v18 offset:12
; ALIGNED-NEXT:    s_waitcnt vmcnt(0) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v19 offset:13
; ALIGNED-NEXT:    s_and_b32 vcc_lo, exec_lo, s4
; ALIGNED-NEXT:    v_add_co_u32 v0, s4, v0, 16
; ALIGNED-NEXT:    v_add_co_ci_u32_e64 v1, s4, 0, v1, s4
; ALIGNED-NEXT:    s_cbranch_vccnz .LBB0_1
; ALIGNED-NEXT:  ; %bb.2: ; %memcpy-split
; ALIGNED-NEXT:    s_waitcnt lgkmcnt(0)
; ALIGNED-NEXT:    s_setpc_b64 s[30:31]
entry:
  tail call void @llvm.memcpy.p0.p0.i64(ptr addrspace(0) noundef nonnull align 1 %dst, ptr addrspace(0) noundef nonnull align 1 %src, i64 2048, i1 false)
  ret void
}

define void @memcpy_p1_p1_sz2048(ptr addrspace(1) align 1 %dst, ptr addrspace(1) align 1 readonly %src) {
; CHECK-LABEL: memcpy_p1_p1_sz2048:
; CHECK:       ; %bb.0: ; %entry
; CHECK-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; CHECK-NEXT:    s_mov_b64 s[6:7], 0
; CHECK-NEXT:  .LBB1_1: ; %load-store-loop
; CHECK-NEXT:    ; =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    s_clause 0xf
; CHECK-NEXT:    global_load_dwordx4 v[4:7], v[2:3], off offset:224
; CHECK-NEXT:    global_load_dwordx4 v[8:11], v[2:3], off offset:240
; CHECK-NEXT:    global_load_dwordx4 v[12:15], v[2:3], off offset:192
; CHECK-NEXT:    global_load_dwordx4 v[16:19], v[2:3], off offset:208
; CHECK-NEXT:    global_load_dwordx4 v[20:23], v[2:3], off offset:160
; CHECK-NEXT:    global_load_dwordx4 v[24:27], v[2:3], off offset:176
; CHECK-NEXT:    global_load_dwordx4 v[28:31], v[2:3], off offset:128
; CHECK-NEXT:    global_load_dwordx4 v[32:35], v[2:3], off offset:144
; CHECK-NEXT:    global_load_dwordx4 v[36:39], v[2:3], off offset:96
; CHECK-NEXT:    global_load_dwordx4 v[48:51], v[2:3], off offset:112
; CHECK-NEXT:    global_load_dwordx4 v[52:55], v[2:3], off offset:64
; CHECK-NEXT:    global_load_dwordx4 v[64:67], v[2:3], off offset:80
; CHECK-NEXT:    global_load_dwordx4 v[68:71], v[2:3], off offset:32
; CHECK-NEXT:    global_load_dwordx4 v[80:83], v[2:3], off offset:48
; CHECK-NEXT:    global_load_dwordx4 v[84:87], v[2:3], off
; CHECK-NEXT:    global_load_dwordx4 v[96:99], v[2:3], off offset:16
; CHECK-NEXT:    s_add_u32 s6, s6, 1
; CHECK-NEXT:    s_addc_u32 s7, s7, 0
; CHECK-NEXT:    v_add_co_u32 v2, vcc_lo, 0x100, v2
; CHECK-NEXT:    v_cmp_lt_u64_e64 s4, s[6:7], 8
; CHECK-NEXT:    v_add_co_ci_u32_e32 v3, vcc_lo, 0, v3, vcc_lo
; CHECK-NEXT:    s_waitcnt vmcnt(15)
; CHECK-NEXT:    global_store_dwordx4 v[0:1], v[4:7], off offset:224
; CHECK-NEXT:    s_waitcnt vmcnt(14)
; CHECK-NEXT:    global_store_dwordx4 v[0:1], v[8:11], off offset:240
; CHECK-NEXT:    s_waitcnt vmcnt(13)
; CHECK-NEXT:    global_store_dwordx4 v[0:1], v[12:15], off offset:192
; CHECK-NEXT:    s_waitcnt vmcnt(12)
; CHECK-NEXT:    global_store_dwordx4 v[0:1], v[16:19], off offset:208
; CHECK-NEXT:    s_waitcnt vmcnt(11)
; CHECK-NEXT:    global_store_dwordx4 v[0:1], v[20:23], off offset:160
; CHECK-NEXT:    s_waitcnt vmcnt(10)
; CHECK-NEXT:    global_store_dwordx4 v[0:1], v[24:27], off offset:176
; CHECK-NEXT:    s_waitcnt vmcnt(9)
; CHECK-NEXT:    global_store_dwordx4 v[0:1], v[28:31], off offset:128
; CHECK-NEXT:    s_waitcnt vmcnt(8)
; CHECK-NEXT:    global_store_dwordx4 v[0:1], v[32:35], off offset:144
; CHECK-NEXT:    s_waitcnt vmcnt(7)
; CHECK-NEXT:    global_store_dwordx4 v[0:1], v[36:39], off offset:96
; CHECK-NEXT:    s_waitcnt vmcnt(6)
; CHECK-NEXT:    global_store_dwordx4 v[0:1], v[48:51], off offset:112
; CHECK-NEXT:    s_waitcnt vmcnt(5)
; CHECK-NEXT:    global_store_dwordx4 v[0:1], v[52:55], off offset:64
; CHECK-NEXT:    s_waitcnt vmcnt(4)
; CHECK-NEXT:    global_store_dwordx4 v[0:1], v[64:67], off offset:80
; CHECK-NEXT:    s_waitcnt vmcnt(3)
; CHECK-NEXT:    global_store_dwordx4 v[0:1], v[68:71], off offset:32
; CHECK-NEXT:    s_waitcnt vmcnt(2)
; CHECK-NEXT:    global_store_dwordx4 v[0:1], v[80:83], off offset:48
; CHECK-NEXT:    s_waitcnt vmcnt(1)
; CHECK-NEXT:    global_store_dwordx4 v[0:1], v[84:87], off
; CHECK-NEXT:    s_waitcnt vmcnt(0)
; CHECK-NEXT:    global_store_dwordx4 v[0:1], v[96:99], off offset:16
; CHECK-NEXT:    s_and_b32 vcc_lo, exec_lo, s4
; CHECK-NEXT:    v_add_co_u32 v0, s4, 0x100, v0
; CHECK-NEXT:    v_add_co_ci_u32_e64 v1, s4, 0, v1, s4
; CHECK-NEXT:    s_cbranch_vccnz .LBB1_1
; CHECK-NEXT:  ; %bb.2: ; %memcpy-split
; CHECK-NEXT:    s_setpc_b64 s[30:31]
;
; ALIGNED-LABEL: memcpy_p1_p1_sz2048:
; ALIGNED:       ; %bb.0: ; %entry
; ALIGNED-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; ALIGNED-NEXT:    s_mov_b64 s[6:7], 0
; ALIGNED-NEXT:  .LBB1_1: ; %load-store-loop
; ALIGNED-NEXT:    ; =>This Inner Loop Header: Depth=1
; ALIGNED-NEXT:    s_clause 0xf
; ALIGNED-NEXT:    global_load_ubyte v4, v[2:3], off offset:2
; ALIGNED-NEXT:    global_load_ubyte v5, v[2:3], off offset:3
; ALIGNED-NEXT:    global_load_ubyte v6, v[2:3], off
; ALIGNED-NEXT:    global_load_ubyte v7, v[2:3], off offset:1
; ALIGNED-NEXT:    global_load_ubyte v8, v[2:3], off offset:6
; ALIGNED-NEXT:    global_load_ubyte v9, v[2:3], off offset:7
; ALIGNED-NEXT:    global_load_ubyte v10, v[2:3], off offset:4
; ALIGNED-NEXT:    global_load_ubyte v11, v[2:3], off offset:5
; ALIGNED-NEXT:    global_load_ubyte v12, v[2:3], off offset:10
; ALIGNED-NEXT:    global_load_ubyte v13, v[2:3], off offset:11
; ALIGNED-NEXT:    global_load_ubyte v14, v[2:3], off offset:8
; ALIGNED-NEXT:    global_load_ubyte v15, v[2:3], off offset:9
; ALIGNED-NEXT:    global_load_ubyte v16, v[2:3], off offset:14
; ALIGNED-NEXT:    global_load_ubyte v17, v[2:3], off offset:15
; ALIGNED-NEXT:    global_load_ubyte v18, v[2:3], off offset:12
; ALIGNED-NEXT:    global_load_ubyte v19, v[2:3], off offset:13
; ALIGNED-NEXT:    s_add_u32 s6, s6, 1
; ALIGNED-NEXT:    s_addc_u32 s7, s7, 0
; ALIGNED-NEXT:    v_add_co_u32 v2, vcc_lo, v2, 16
; ALIGNED-NEXT:    v_cmp_gt_u64_e64 s4, 0x80, s[6:7]
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v3, vcc_lo, 0, v3, vcc_lo
; ALIGNED-NEXT:    s_waitcnt vmcnt(15)
; ALIGNED-NEXT:    global_store_byte v[0:1], v4, off offset:2
; ALIGNED-NEXT:    s_waitcnt vmcnt(14)
; ALIGNED-NEXT:    global_store_byte v[0:1], v5, off offset:3
; ALIGNED-NEXT:    s_waitcnt vmcnt(13)
; ALIGNED-NEXT:    global_store_byte v[0:1], v6, off
; ALIGNED-NEXT:    s_waitcnt vmcnt(12)
; ALIGNED-NEXT:    global_store_byte v[0:1], v7, off offset:1
; ALIGNED-NEXT:    s_waitcnt vmcnt(11)
; ALIGNED-NEXT:    global_store_byte v[0:1], v8, off offset:6
; ALIGNED-NEXT:    s_waitcnt vmcnt(10)
; ALIGNED-NEXT:    global_store_byte v[0:1], v9, off offset:7
; ALIGNED-NEXT:    s_waitcnt vmcnt(9)
; ALIGNED-NEXT:    global_store_byte v[0:1], v10, off offset:4
; ALIGNED-NEXT:    s_waitcnt vmcnt(8)
; ALIGNED-NEXT:    global_store_byte v[0:1], v11, off offset:5
; ALIGNED-NEXT:    s_waitcnt vmcnt(7)
; ALIGNED-NEXT:    global_store_byte v[0:1], v12, off offset:10
; ALIGNED-NEXT:    s_waitcnt vmcnt(6)
; ALIGNED-NEXT:    global_store_byte v[0:1], v13, off offset:11
; ALIGNED-NEXT:    s_waitcnt vmcnt(5)
; ALIGNED-NEXT:    global_store_byte v[0:1], v14, off offset:8
; ALIGNED-NEXT:    s_waitcnt vmcnt(4)
; ALIGNED-NEXT:    global_store_byte v[0:1], v15, off offset:9
; ALIGNED-NEXT:    s_waitcnt vmcnt(3)
; ALIGNED-NEXT:    global_store_byte v[0:1], v16, off offset:14
; ALIGNED-NEXT:    s_waitcnt vmcnt(2)
; ALIGNED-NEXT:    global_store_byte v[0:1], v17, off offset:15
; ALIGNED-NEXT:    s_waitcnt vmcnt(1)
; ALIGNED-NEXT:    global_store_byte v[0:1], v18, off offset:12
; ALIGNED-NEXT:    s_waitcnt vmcnt(0)
; ALIGNED-NEXT:    global_store_byte v[0:1], v19, off offset:13
; ALIGNED-NEXT:    s_and_b32 vcc_lo, exec_lo, s4
; ALIGNED-NEXT:    v_add_co_u32 v0, s4, v0, 16
; ALIGNED-NEXT:    v_add_co_ci_u32_e64 v1, s4, 0, v1, s4
; ALIGNED-NEXT:    s_cbranch_vccnz .LBB1_1
; ALIGNED-NEXT:  ; %bb.2: ; %memcpy-split
; ALIGNED-NEXT:    s_setpc_b64 s[30:31]
entry:
  tail call void @llvm.memcpy.p1.p1.i64(ptr addrspace(1) noundef nonnull align 1 %dst, ptr addrspace(1) noundef nonnull align 1 %src, i64 2048, i1 false)
  ret void
}

define void @memcpy_p0_p4_sz2048(ptr addrspace(0) align 1 %dst, ptr addrspace(4) align 1 readonly %src) {
; CHECK-LABEL: memcpy_p0_p4_sz2048:
; CHECK:       ; %bb.0: ; %entry
; CHECK-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; CHECK-NEXT:    s_mov_b64 s[6:7], 0
; CHECK-NEXT:  .LBB2_1: ; %load-store-loop
; CHECK-NEXT:    ; =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    s_clause 0xf
; CHECK-NEXT:    global_load_dwordx4 v[4:7], v[2:3], off offset:240
; CHECK-NEXT:    global_load_dwordx4 v[8:11], v[2:3], off offset:224
; CHECK-NEXT:    global_load_dwordx4 v[12:15], v[2:3], off offset:208
; CHECK-NEXT:    global_load_dwordx4 v[16:19], v[2:3], off offset:192
; CHECK-NEXT:    global_load_dwordx4 v[20:23], v[2:3], off offset:176
; CHECK-NEXT:    global_load_dwordx4 v[24:27], v[2:3], off offset:160
; CHECK-NEXT:    global_load_dwordx4 v[28:31], v[2:3], off offset:144
; CHECK-NEXT:    global_load_dwordx4 v[32:35], v[2:3], off offset:128
; CHECK-NEXT:    global_load_dwordx4 v[36:39], v[2:3], off offset:112
; CHECK-NEXT:    global_load_dwordx4 v[48:51], v[2:3], off offset:96
; CHECK-NEXT:    global_load_dwordx4 v[52:55], v[2:3], off offset:80
; CHECK-NEXT:    global_load_dwordx4 v[64:67], v[2:3], off offset:64
; CHECK-NEXT:    global_load_dwordx4 v[68:71], v[2:3], off offset:48
; CHECK-NEXT:    global_load_dwordx4 v[80:83], v[2:3], off offset:32
; CHECK-NEXT:    global_load_dwordx4 v[84:87], v[2:3], off offset:16
; CHECK-NEXT:    global_load_dwordx4 v[96:99], v[2:3], off
; CHECK-NEXT:    s_add_u32 s6, s6, 1
; CHECK-NEXT:    s_addc_u32 s7, s7, 0
; CHECK-NEXT:    v_add_co_u32 v2, vcc_lo, 0x100, v2
; CHECK-NEXT:    v_cmp_lt_u64_e64 s4, s[6:7], 8
; CHECK-NEXT:    v_add_co_ci_u32_e32 v3, vcc_lo, 0, v3, vcc_lo
; CHECK-NEXT:    s_waitcnt vmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[4:7] offset:240
; CHECK-NEXT:    s_waitcnt vmcnt(14)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[8:11] offset:224
; CHECK-NEXT:    s_waitcnt vmcnt(13)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[12:15] offset:208
; CHECK-NEXT:    s_waitcnt vmcnt(12)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[16:19] offset:192
; CHECK-NEXT:    s_waitcnt vmcnt(11)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[20:23] offset:176
; CHECK-NEXT:    s_waitcnt vmcnt(10)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[24:27] offset:160
; CHECK-NEXT:    s_waitcnt vmcnt(9)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[28:31] offset:144
; CHECK-NEXT:    s_waitcnt vmcnt(8)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[32:35] offset:128
; CHECK-NEXT:    s_waitcnt vmcnt(7)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[36:39] offset:112
; CHECK-NEXT:    s_waitcnt vmcnt(6)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[48:51] offset:96
; CHECK-NEXT:    s_waitcnt vmcnt(5)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[52:55] offset:80
; CHECK-NEXT:    s_waitcnt vmcnt(4)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[64:67] offset:64
; CHECK-NEXT:    s_waitcnt vmcnt(3)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[68:71] offset:48
; CHECK-NEXT:    s_waitcnt vmcnt(2)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[80:83] offset:32
; CHECK-NEXT:    s_waitcnt vmcnt(1)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[84:87] offset:16
; CHECK-NEXT:    s_waitcnt vmcnt(0)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[96:99]
; CHECK-NEXT:    s_and_b32 vcc_lo, exec_lo, s4
; CHECK-NEXT:    v_add_co_u32 v0, s4, 0x100, v0
; CHECK-NEXT:    v_add_co_ci_u32_e64 v1, s4, 0, v1, s4
; CHECK-NEXT:    s_cbranch_vccnz .LBB2_1
; CHECK-NEXT:  ; %bb.2: ; %memcpy-split
; CHECK-NEXT:    s_waitcnt lgkmcnt(0)
; CHECK-NEXT:    s_setpc_b64 s[30:31]
;
; ALIGNED-LABEL: memcpy_p0_p4_sz2048:
; ALIGNED:       ; %bb.0: ; %entry
; ALIGNED-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; ALIGNED-NEXT:    s_mov_b64 s[6:7], 0
; ALIGNED-NEXT:  .LBB2_1: ; %load-store-loop
; ALIGNED-NEXT:    ; =>This Inner Loop Header: Depth=1
; ALIGNED-NEXT:    s_clause 0xf
; ALIGNED-NEXT:    global_load_ubyte v4, v[2:3], off offset:5
; ALIGNED-NEXT:    global_load_ubyte v5, v[2:3], off offset:6
; ALIGNED-NEXT:    global_load_ubyte v6, v[2:3], off offset:7
; ALIGNED-NEXT:    global_load_ubyte v7, v[2:3], off offset:3
; ALIGNED-NEXT:    global_load_ubyte v8, v[2:3], off offset:2
; ALIGNED-NEXT:    global_load_ubyte v9, v[2:3], off offset:1
; ALIGNED-NEXT:    global_load_ubyte v10, v[2:3], off
; ALIGNED-NEXT:    global_load_ubyte v11, v[2:3], off offset:4
; ALIGNED-NEXT:    global_load_ubyte v12, v[2:3], off offset:13
; ALIGNED-NEXT:    global_load_ubyte v13, v[2:3], off offset:14
; ALIGNED-NEXT:    global_load_ubyte v14, v[2:3], off offset:15
; ALIGNED-NEXT:    global_load_ubyte v15, v[2:3], off offset:11
; ALIGNED-NEXT:    global_load_ubyte v16, v[2:3], off offset:10
; ALIGNED-NEXT:    global_load_ubyte v17, v[2:3], off offset:9
; ALIGNED-NEXT:    global_load_ubyte v18, v[2:3], off offset:8
; ALIGNED-NEXT:    global_load_ubyte v19, v[2:3], off offset:12
; ALIGNED-NEXT:    s_add_u32 s6, s6, 1
; ALIGNED-NEXT:    s_addc_u32 s7, s7, 0
; ALIGNED-NEXT:    v_add_co_u32 v2, vcc_lo, v2, 16
; ALIGNED-NEXT:    v_cmp_gt_u64_e64 s4, 0x80, s[6:7]
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v3, vcc_lo, 0, v3, vcc_lo
; ALIGNED-NEXT:    s_waitcnt vmcnt(12)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v7 offset:3
; ALIGNED-NEXT:    s_waitcnt vmcnt(11)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v8 offset:2
; ALIGNED-NEXT:    s_waitcnt vmcnt(10)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v9 offset:1
; ALIGNED-NEXT:    s_waitcnt vmcnt(9)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v10
; ALIGNED-NEXT:    flat_store_byte v[0:1], v6 offset:7
; ALIGNED-NEXT:    flat_store_byte v[0:1], v5 offset:6
; ALIGNED-NEXT:    flat_store_byte v[0:1], v4 offset:5
; ALIGNED-NEXT:    s_waitcnt vmcnt(8)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v11 offset:4
; ALIGNED-NEXT:    s_waitcnt vmcnt(4)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v15 offset:11
; ALIGNED-NEXT:    s_waitcnt vmcnt(3)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v16 offset:10
; ALIGNED-NEXT:    s_waitcnt vmcnt(2)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v17 offset:9
; ALIGNED-NEXT:    s_waitcnt vmcnt(1)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v18 offset:8
; ALIGNED-NEXT:    flat_store_byte v[0:1], v14 offset:15
; ALIGNED-NEXT:    flat_store_byte v[0:1], v13 offset:14
; ALIGNED-NEXT:    flat_store_byte v[0:1], v12 offset:13
; ALIGNED-NEXT:    s_waitcnt vmcnt(0)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v19 offset:12
; ALIGNED-NEXT:    s_and_b32 vcc_lo, exec_lo, s4
; ALIGNED-NEXT:    v_add_co_u32 v0, s4, v0, 16
; ALIGNED-NEXT:    v_add_co_ci_u32_e64 v1, s4, 0, v1, s4
; ALIGNED-NEXT:    s_cbranch_vccnz .LBB2_1
; ALIGNED-NEXT:  ; %bb.2: ; %memcpy-split
; ALIGNED-NEXT:    s_waitcnt lgkmcnt(0)
; ALIGNED-NEXT:    s_setpc_b64 s[30:31]
entry:
  tail call void @llvm.memcpy.p0.p4.i64(ptr addrspace(0) noundef nonnull align 1 %dst, ptr addrspace(4) noundef nonnull align 1 %src, i64 2048, i1 false)
  ret void
}

define void @memcpy_p5_p5_sz2048(ptr addrspace(5) align 1 %dst, ptr addrspace(5) align 1 readonly %src) {
; CHECK-LABEL: memcpy_p5_p5_sz2048:
; CHECK:       ; %bb.0: ; %entry
; CHECK-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; CHECK-NEXT:    s_mov_b64 s[4:5], 0
; CHECK-NEXT:  .LBB3_1: ; %load-store-loop
; CHECK-NEXT:    ; =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    s_clause 0x3e
; CHECK-NEXT:    buffer_load_dword v2, v1, s[0:3], 0 offen offset:252
; CHECK-NEXT:    buffer_load_dword v3, v1, s[0:3], 0 offen offset:248
; CHECK-NEXT:    buffer_load_dword v4, v1, s[0:3], 0 offen offset:244
; CHECK-NEXT:    buffer_load_dword v5, v1, s[0:3], 0 offen offset:240
; CHECK-NEXT:    buffer_load_dword v6, v1, s[0:3], 0 offen offset:236
; CHECK-NEXT:    buffer_load_dword v7, v1, s[0:3], 0 offen offset:232
; CHECK-NEXT:    buffer_load_dword v8, v1, s[0:3], 0 offen offset:228
; CHECK-NEXT:    buffer_load_dword v9, v1, s[0:3], 0 offen offset:224
; CHECK-NEXT:    buffer_load_dword v10, v1, s[0:3], 0 offen offset:220
; CHECK-NEXT:    buffer_load_dword v11, v1, s[0:3], 0 offen offset:216
; CHECK-NEXT:    buffer_load_dword v12, v1, s[0:3], 0 offen offset:212
; CHECK-NEXT:    buffer_load_dword v13, v1, s[0:3], 0 offen offset:208
; CHECK-NEXT:    buffer_load_dword v14, v1, s[0:3], 0 offen offset:204
; CHECK-NEXT:    buffer_load_dword v15, v1, s[0:3], 0 offen offset:200
; CHECK-NEXT:    buffer_load_dword v16, v1, s[0:3], 0 offen offset:196
; CHECK-NEXT:    buffer_load_dword v17, v1, s[0:3], 0 offen offset:192
; CHECK-NEXT:    buffer_load_dword v18, v1, s[0:3], 0 offen offset:188
; CHECK-NEXT:    buffer_load_dword v19, v1, s[0:3], 0 offen offset:184
; CHECK-NEXT:    buffer_load_dword v20, v1, s[0:3], 0 offen offset:180
; CHECK-NEXT:    buffer_load_dword v21, v1, s[0:3], 0 offen offset:176
; CHECK-NEXT:    buffer_load_dword v22, v1, s[0:3], 0 offen offset:172
; CHECK-NEXT:    buffer_load_dword v23, v1, s[0:3], 0 offen offset:168
; CHECK-NEXT:    buffer_load_dword v24, v1, s[0:3], 0 offen offset:164
; CHECK-NEXT:    buffer_load_dword v25, v1, s[0:3], 0 offen offset:160
; CHECK-NEXT:    buffer_load_dword v26, v1, s[0:3], 0 offen offset:156
; CHECK-NEXT:    buffer_load_dword v27, v1, s[0:3], 0 offen offset:152
; CHECK-NEXT:    buffer_load_dword v28, v1, s[0:3], 0 offen offset:148
; CHECK-NEXT:    buffer_load_dword v29, v1, s[0:3], 0 offen offset:144
; CHECK-NEXT:    buffer_load_dword v30, v1, s[0:3], 0 offen offset:140
; CHECK-NEXT:    buffer_load_dword v31, v1, s[0:3], 0 offen offset:136
; CHECK-NEXT:    buffer_load_dword v32, v1, s[0:3], 0 offen offset:132
; CHECK-NEXT:    buffer_load_dword v33, v1, s[0:3], 0 offen offset:128
; CHECK-NEXT:    buffer_load_dword v34, v1, s[0:3], 0 offen offset:124
; CHECK-NEXT:    buffer_load_dword v35, v1, s[0:3], 0 offen offset:120
; CHECK-NEXT:    buffer_load_dword v36, v1, s[0:3], 0 offen offset:116
; CHECK-NEXT:    buffer_load_dword v37, v1, s[0:3], 0 offen offset:112
; CHECK-NEXT:    buffer_load_dword v38, v1, s[0:3], 0 offen offset:108
; CHECK-NEXT:    buffer_load_dword v39, v1, s[0:3], 0 offen offset:104
; CHECK-NEXT:    buffer_load_dword v48, v1, s[0:3], 0 offen offset:100
; CHECK-NEXT:    buffer_load_dword v49, v1, s[0:3], 0 offen offset:96
; CHECK-NEXT:    buffer_load_dword v50, v1, s[0:3], 0 offen offset:92
; CHECK-NEXT:    buffer_load_dword v51, v1, s[0:3], 0 offen offset:88
; CHECK-NEXT:    buffer_load_dword v52, v1, s[0:3], 0 offen offset:84
; CHECK-NEXT:    buffer_load_dword v53, v1, s[0:3], 0 offen offset:80
; CHECK-NEXT:    buffer_load_dword v54, v1, s[0:3], 0 offen offset:76
; CHECK-NEXT:    buffer_load_dword v55, v1, s[0:3], 0 offen offset:72
; CHECK-NEXT:    buffer_load_dword v64, v1, s[0:3], 0 offen offset:68
; CHECK-NEXT:    buffer_load_dword v65, v1, s[0:3], 0 offen offset:64
; CHECK-NEXT:    buffer_load_dword v66, v1, s[0:3], 0 offen offset:60
; CHECK-NEXT:    buffer_load_dword v67, v1, s[0:3], 0 offen offset:56
; CHECK-NEXT:    buffer_load_dword v68, v1, s[0:3], 0 offen offset:52
; CHECK-NEXT:    buffer_load_dword v69, v1, s[0:3], 0 offen offset:48
; CHECK-NEXT:    buffer_load_dword v70, v1, s[0:3], 0 offen offset:44
; CHECK-NEXT:    buffer_load_dword v71, v1, s[0:3], 0 offen offset:40
; CHECK-NEXT:    buffer_load_dword v80, v1, s[0:3], 0 offen offset:36
; CHECK-NEXT:    buffer_load_dword v81, v1, s[0:3], 0 offen offset:32
; CHECK-NEXT:    buffer_load_dword v82, v1, s[0:3], 0 offen offset:28
; CHECK-NEXT:    buffer_load_dword v83, v1, s[0:3], 0 offen offset:24
; CHECK-NEXT:    buffer_load_dword v84, v1, s[0:3], 0 offen offset:20
; CHECK-NEXT:    buffer_load_dword v85, v1, s[0:3], 0 offen offset:16
; CHECK-NEXT:    buffer_load_dword v86, v1, s[0:3], 0 offen offset:12
; CHECK-NEXT:    buffer_load_dword v87, v1, s[0:3], 0 offen offset:8
; CHECK-NEXT:    buffer_load_dword v96, v1, s[0:3], 0 offen offset:4
; CHECK-NEXT:    buffer_load_dword v97, v1, s[0:3], 0 offen
; CHECK-NEXT:    s_add_u32 s4, s4, 1
; CHECK-NEXT:    s_addc_u32 s5, s5, 0
; CHECK-NEXT:    v_add_nc_u32_e32 v1, 0x100, v1
; CHECK-NEXT:    v_cmp_lt_u64_e64 s6, s[4:5], 8
; CHECK-NEXT:    s_waitcnt vmcnt(62)
; CHECK-NEXT:    buffer_store_dword v2, v0, s[0:3], 0 offen offset:252
; CHECK-NEXT:    buffer_store_dword v3, v0, s[0:3], 0 offen offset:248
; CHECK-NEXT:    s_waitcnt vmcnt(61)
; CHECK-NEXT:    buffer_store_dword v4, v0, s[0:3], 0 offen offset:244
; CHECK-NEXT:    s_waitcnt vmcnt(60)
; CHECK-NEXT:    buffer_store_dword v5, v0, s[0:3], 0 offen offset:240
; CHECK-NEXT:    s_waitcnt vmcnt(59)
; CHECK-NEXT:    buffer_store_dword v6, v0, s[0:3], 0 offen offset:236
; CHECK-NEXT:    s_waitcnt vmcnt(58)
; CHECK-NEXT:    buffer_store_dword v7, v0, s[0:3], 0 offen offset:232
; CHECK-NEXT:    s_waitcnt vmcnt(57)
; CHECK-NEXT:    buffer_store_dword v8, v0, s[0:3], 0 offen offset:228
; CHECK-NEXT:    s_waitcnt vmcnt(56)
; CHECK-NEXT:    buffer_store_dword v9, v0, s[0:3], 0 offen offset:224
; CHECK-NEXT:    s_waitcnt vmcnt(55)
; CHECK-NEXT:    buffer_store_dword v10, v0, s[0:3], 0 offen offset:220
; CHECK-NEXT:    s_waitcnt vmcnt(54)
; CHECK-NEXT:    buffer_store_dword v11, v0, s[0:3], 0 offen offset:216
; CHECK-NEXT:    s_waitcnt vmcnt(53)
; CHECK-NEXT:    buffer_store_dword v12, v0, s[0:3], 0 offen offset:212
; CHECK-NEXT:    s_waitcnt vmcnt(52)
; CHECK-NEXT:    buffer_store_dword v13, v0, s[0:3], 0 offen offset:208
; CHECK-NEXT:    s_waitcnt vmcnt(51)
; CHECK-NEXT:    buffer_store_dword v14, v0, s[0:3], 0 offen offset:204
; CHECK-NEXT:    s_waitcnt vmcnt(50)
; CHECK-NEXT:    buffer_store_dword v15, v0, s[0:3], 0 offen offset:200
; CHECK-NEXT:    s_waitcnt vmcnt(49)
; CHECK-NEXT:    buffer_store_dword v16, v0, s[0:3], 0 offen offset:196
; CHECK-NEXT:    s_waitcnt vmcnt(48)
; CHECK-NEXT:    buffer_store_dword v17, v0, s[0:3], 0 offen offset:192
; CHECK-NEXT:    s_waitcnt vmcnt(47)
; CHECK-NEXT:    buffer_store_dword v18, v0, s[0:3], 0 offen offset:188
; CHECK-NEXT:    s_waitcnt vmcnt(46)
; CHECK-NEXT:    buffer_store_dword v19, v0, s[0:3], 0 offen offset:184
; CHECK-NEXT:    s_waitcnt vmcnt(45)
; CHECK-NEXT:    buffer_store_dword v20, v0, s[0:3], 0 offen offset:180
; CHECK-NEXT:    s_waitcnt vmcnt(44)
; CHECK-NEXT:    buffer_store_dword v21, v0, s[0:3], 0 offen offset:176
; CHECK-NEXT:    s_waitcnt vmcnt(43)
; CHECK-NEXT:    buffer_store_dword v22, v0, s[0:3], 0 offen offset:172
; CHECK-NEXT:    s_waitcnt vmcnt(42)
; CHECK-NEXT:    buffer_store_dword v23, v0, s[0:3], 0 offen offset:168
; CHECK-NEXT:    s_waitcnt vmcnt(41)
; CHECK-NEXT:    buffer_store_dword v24, v0, s[0:3], 0 offen offset:164
; CHECK-NEXT:    s_waitcnt vmcnt(40)
; CHECK-NEXT:    buffer_store_dword v25, v0, s[0:3], 0 offen offset:160
; CHECK-NEXT:    s_waitcnt vmcnt(39)
; CHECK-NEXT:    buffer_store_dword v26, v0, s[0:3], 0 offen offset:156
; CHECK-NEXT:    s_waitcnt vmcnt(38)
; CHECK-NEXT:    buffer_store_dword v27, v0, s[0:3], 0 offen offset:152
; CHECK-NEXT:    s_waitcnt vmcnt(37)
; CHECK-NEXT:    buffer_store_dword v28, v0, s[0:3], 0 offen offset:148
; CHECK-NEXT:    s_waitcnt vmcnt(36)
; CHECK-NEXT:    buffer_store_dword v29, v0, s[0:3], 0 offen offset:144
; CHECK-NEXT:    s_waitcnt vmcnt(35)
; CHECK-NEXT:    buffer_store_dword v30, v0, s[0:3], 0 offen offset:140
; CHECK-NEXT:    s_waitcnt vmcnt(34)
; CHECK-NEXT:    buffer_store_dword v31, v0, s[0:3], 0 offen offset:136
; CHECK-NEXT:    s_waitcnt vmcnt(33)
; CHECK-NEXT:    buffer_store_dword v32, v0, s[0:3], 0 offen offset:132
; CHECK-NEXT:    s_waitcnt vmcnt(32)
; CHECK-NEXT:    buffer_store_dword v33, v0, s[0:3], 0 offen offset:128
; CHECK-NEXT:    s_waitcnt vmcnt(31)
; CHECK-NEXT:    buffer_store_dword v34, v0, s[0:3], 0 offen offset:124
; CHECK-NEXT:    s_waitcnt vmcnt(30)
; CHECK-NEXT:    buffer_store_dword v35, v0, s[0:3], 0 offen offset:120
; CHECK-NEXT:    s_waitcnt vmcnt(29)
; CHECK-NEXT:    buffer_store_dword v36, v0, s[0:3], 0 offen offset:116
; CHECK-NEXT:    s_waitcnt vmcnt(28)
; CHECK-NEXT:    buffer_store_dword v37, v0, s[0:3], 0 offen offset:112
; CHECK-NEXT:    s_waitcnt vmcnt(27)
; CHECK-NEXT:    buffer_store_dword v38, v0, s[0:3], 0 offen offset:108
; CHECK-NEXT:    s_waitcnt vmcnt(26)
; CHECK-NEXT:    buffer_store_dword v39, v0, s[0:3], 0 offen offset:104
; CHECK-NEXT:    s_waitcnt vmcnt(25)
; CHECK-NEXT:    buffer_store_dword v48, v0, s[0:3], 0 offen offset:100
; CHECK-NEXT:    s_waitcnt vmcnt(24)
; CHECK-NEXT:    buffer_store_dword v49, v0, s[0:3], 0 offen offset:96
; CHECK-NEXT:    s_waitcnt vmcnt(23)
; CHECK-NEXT:    buffer_store_dword v50, v0, s[0:3], 0 offen offset:92
; CHECK-NEXT:    s_waitcnt vmcnt(22)
; CHECK-NEXT:    buffer_store_dword v51, v0, s[0:3], 0 offen offset:88
; CHECK-NEXT:    s_waitcnt vmcnt(21)
; CHECK-NEXT:    buffer_store_dword v52, v0, s[0:3], 0 offen offset:84
; CHECK-NEXT:    s_waitcnt vmcnt(20)
; CHECK-NEXT:    buffer_store_dword v53, v0, s[0:3], 0 offen offset:80
; CHECK-NEXT:    s_waitcnt vmcnt(19)
; CHECK-NEXT:    buffer_store_dword v54, v0, s[0:3], 0 offen offset:76
; CHECK-NEXT:    s_waitcnt vmcnt(18)
; CHECK-NEXT:    buffer_store_dword v55, v0, s[0:3], 0 offen offset:72
; CHECK-NEXT:    s_waitcnt vmcnt(17)
; CHECK-NEXT:    buffer_store_dword v64, v0, s[0:3], 0 offen offset:68
; CHECK-NEXT:    s_waitcnt vmcnt(16)
; CHECK-NEXT:    buffer_store_dword v65, v0, s[0:3], 0 offen offset:64
; CHECK-NEXT:    s_waitcnt vmcnt(15)
; CHECK-NEXT:    buffer_store_dword v66, v0, s[0:3], 0 offen offset:60
; CHECK-NEXT:    s_waitcnt vmcnt(14)
; CHECK-NEXT:    buffer_store_dword v67, v0, s[0:3], 0 offen offset:56
; CHECK-NEXT:    s_waitcnt vmcnt(13)
; CHECK-NEXT:    buffer_store_dword v68, v0, s[0:3], 0 offen offset:52
; CHECK-NEXT:    s_waitcnt vmcnt(12)
; CHECK-NEXT:    buffer_store_dword v69, v0, s[0:3], 0 offen offset:48
; CHECK-NEXT:    s_waitcnt vmcnt(11)
; CHECK-NEXT:    buffer_store_dword v70, v0, s[0:3], 0 offen offset:44
; CHECK-NEXT:    s_waitcnt vmcnt(10)
; CHECK-NEXT:    buffer_store_dword v71, v0, s[0:3], 0 offen offset:40
; CHECK-NEXT:    s_waitcnt vmcnt(9)
; CHECK-NEXT:    buffer_store_dword v80, v0, s[0:3], 0 offen offset:36
; CHECK-NEXT:    s_waitcnt vmcnt(8)
; CHECK-NEXT:    buffer_store_dword v81, v0, s[0:3], 0 offen offset:32
; CHECK-NEXT:    s_waitcnt vmcnt(7)
; CHECK-NEXT:    buffer_store_dword v82, v0, s[0:3], 0 offen offset:28
; CHECK-NEXT:    s_waitcnt vmcnt(6)
; CHECK-NEXT:    buffer_store_dword v83, v0, s[0:3], 0 offen offset:24
; CHECK-NEXT:    s_waitcnt vmcnt(5)
; CHECK-NEXT:    buffer_store_dword v84, v0, s[0:3], 0 offen offset:20
; CHECK-NEXT:    s_waitcnt vmcnt(4)
; CHECK-NEXT:    buffer_store_dword v85, v0, s[0:3], 0 offen offset:16
; CHECK-NEXT:    s_waitcnt vmcnt(3)
; CHECK-NEXT:    buffer_store_dword v86, v0, s[0:3], 0 offen offset:12
; CHECK-NEXT:    s_waitcnt vmcnt(2)
; CHECK-NEXT:    buffer_store_dword v87, v0, s[0:3], 0 offen offset:8
; CHECK-NEXT:    s_waitcnt vmcnt(1)
; CHECK-NEXT:    buffer_store_dword v96, v0, s[0:3], 0 offen offset:4
; CHECK-NEXT:    s_waitcnt vmcnt(0)
; CHECK-NEXT:    buffer_store_dword v97, v0, s[0:3], 0 offen
; CHECK-NEXT:    v_add_nc_u32_e32 v0, 0x100, v0
; CHECK-NEXT:    s_and_b32 vcc_lo, exec_lo, s6
; CHECK-NEXT:    s_cbranch_vccnz .LBB3_1
; CHECK-NEXT:  ; %bb.2: ; %memcpy-split
; CHECK-NEXT:    s_setpc_b64 s[30:31]
;
; ALIGNED-LABEL: memcpy_p5_p5_sz2048:
; ALIGNED:       ; %bb.0: ; %entry
; ALIGNED-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; ALIGNED-NEXT:    s_mov_b64 s[4:5], 0
; ALIGNED-NEXT:  .LBB3_1: ; %load-store-loop
; ALIGNED-NEXT:    ; =>This Inner Loop Header: Depth=1
; ALIGNED-NEXT:    s_clause 0xf
; ALIGNED-NEXT:    buffer_load_ubyte v2, v1, s[0:3], 0 offen offset:2
; ALIGNED-NEXT:    buffer_load_ubyte v3, v1, s[0:3], 0 offen offset:3
; ALIGNED-NEXT:    buffer_load_ubyte v4, v1, s[0:3], 0 offen
; ALIGNED-NEXT:    buffer_load_ubyte v5, v1, s[0:3], 0 offen offset:1
; ALIGNED-NEXT:    buffer_load_ubyte v6, v1, s[0:3], 0 offen offset:6
; ALIGNED-NEXT:    buffer_load_ubyte v7, v1, s[0:3], 0 offen offset:7
; ALIGNED-NEXT:    buffer_load_ubyte v8, v1, s[0:3], 0 offen offset:4
; ALIGNED-NEXT:    buffer_load_ubyte v9, v1, s[0:3], 0 offen offset:5
; ALIGNED-NEXT:    buffer_load_ubyte v10, v1, s[0:3], 0 offen offset:10
; ALIGNED-NEXT:    buffer_load_ubyte v11, v1, s[0:3], 0 offen offset:11
; ALIGNED-NEXT:    buffer_load_ubyte v12, v1, s[0:3], 0 offen offset:8
; ALIGNED-NEXT:    buffer_load_ubyte v13, v1, s[0:3], 0 offen offset:9
; ALIGNED-NEXT:    buffer_load_ubyte v14, v1, s[0:3], 0 offen offset:14
; ALIGNED-NEXT:    buffer_load_ubyte v15, v1, s[0:3], 0 offen offset:15
; ALIGNED-NEXT:    buffer_load_ubyte v16, v1, s[0:3], 0 offen offset:12
; ALIGNED-NEXT:    buffer_load_ubyte v17, v1, s[0:3], 0 offen offset:13
; ALIGNED-NEXT:    s_add_u32 s4, s4, 1
; ALIGNED-NEXT:    s_addc_u32 s5, s5, 0
; ALIGNED-NEXT:    v_add_nc_u32_e32 v1, 16, v1
; ALIGNED-NEXT:    v_cmp_gt_u64_e64 s6, 0x80, s[4:5]
; ALIGNED-NEXT:    s_waitcnt vmcnt(15)
; ALIGNED-NEXT:    buffer_store_byte v2, v0, s[0:3], 0 offen offset:2
; ALIGNED-NEXT:    s_waitcnt vmcnt(14)
; ALIGNED-NEXT:    buffer_store_byte v3, v0, s[0:3], 0 offen offset:3
; ALIGNED-NEXT:    s_waitcnt vmcnt(13)
; ALIGNED-NEXT:    buffer_store_byte v4, v0, s[0:3], 0 offen
; ALIGNED-NEXT:    s_waitcnt vmcnt(12)
; ALIGNED-NEXT:    buffer_store_byte v5, v0, s[0:3], 0 offen offset:1
; ALIGNED-NEXT:    s_waitcnt vmcnt(11)
; ALIGNED-NEXT:    buffer_store_byte v6, v0, s[0:3], 0 offen offset:6
; ALIGNED-NEXT:    s_waitcnt vmcnt(10)
; ALIGNED-NEXT:    buffer_store_byte v7, v0, s[0:3], 0 offen offset:7
; ALIGNED-NEXT:    s_waitcnt vmcnt(9)
; ALIGNED-NEXT:    buffer_store_byte v8, v0, s[0:3], 0 offen offset:4
; ALIGNED-NEXT:    s_waitcnt vmcnt(8)
; ALIGNED-NEXT:    buffer_store_byte v9, v0, s[0:3], 0 offen offset:5
; ALIGNED-NEXT:    s_waitcnt vmcnt(7)
; ALIGNED-NEXT:    buffer_store_byte v10, v0, s[0:3], 0 offen offset:10
; ALIGNED-NEXT:    s_waitcnt vmcnt(6)
; ALIGNED-NEXT:    buffer_store_byte v11, v0, s[0:3], 0 offen offset:11
; ALIGNED-NEXT:    s_waitcnt vmcnt(5)
; ALIGNED-NEXT:    buffer_store_byte v12, v0, s[0:3], 0 offen offset:8
; ALIGNED-NEXT:    s_waitcnt vmcnt(4)
; ALIGNED-NEXT:    buffer_store_byte v13, v0, s[0:3], 0 offen offset:9
; ALIGNED-NEXT:    s_waitcnt vmcnt(3)
; ALIGNED-NEXT:    buffer_store_byte v14, v0, s[0:3], 0 offen offset:14
; ALIGNED-NEXT:    s_waitcnt vmcnt(2)
; ALIGNED-NEXT:    buffer_store_byte v15, v0, s[0:3], 0 offen offset:15
; ALIGNED-NEXT:    s_waitcnt vmcnt(1)
; ALIGNED-NEXT:    buffer_store_byte v16, v0, s[0:3], 0 offen offset:12
; ALIGNED-NEXT:    s_waitcnt vmcnt(0)
; ALIGNED-NEXT:    buffer_store_byte v17, v0, s[0:3], 0 offen offset:13
; ALIGNED-NEXT:    v_add_nc_u32_e32 v0, 16, v0
; ALIGNED-NEXT:    s_and_b32 vcc_lo, exec_lo, s6
; ALIGNED-NEXT:    s_cbranch_vccnz .LBB3_1
; ALIGNED-NEXT:  ; %bb.2: ; %memcpy-split
; ALIGNED-NEXT:    s_setpc_b64 s[30:31]
entry:
  tail call void @llvm.memcpy.p5.p5.i64(ptr addrspace(5) noundef nonnull align 1 %dst, ptr addrspace(5) noundef nonnull align 1 %src, i64 2048, i1 false)
  ret void
}

define void @memcpy_p0_p5_sz2048(ptr addrspace(0) align 1 %dst, ptr addrspace(5) align 1 readonly %src) {
; CHECK-LABEL: memcpy_p0_p5_sz2048:
; CHECK:       ; %bb.0: ; %entry
; CHECK-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; CHECK-NEXT:    s_mov_b64 s[6:7], 0
; CHECK-NEXT:  .LBB4_1: ; %load-store-loop
; CHECK-NEXT:    ; =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    s_clause 0x3e
; CHECK-NEXT:    buffer_load_dword v4, v2, s[0:3], 0 offen offset:20
; CHECK-NEXT:    buffer_load_dword v5, v2, s[0:3], 0 offen offset:24
; CHECK-NEXT:    buffer_load_dword v6, v2, s[0:3], 0 offen offset:28
; CHECK-NEXT:    buffer_load_dword v7, v2, s[0:3], 0 offen offset:32
; CHECK-NEXT:    buffer_load_dword v8, v2, s[0:3], 0 offen offset:36
; CHECK-NEXT:    buffer_load_dword v9, v2, s[0:3], 0 offen offset:40
; CHECK-NEXT:    buffer_load_dword v10, v2, s[0:3], 0 offen offset:44
; CHECK-NEXT:    buffer_load_dword v11, v2, s[0:3], 0 offen offset:48
; CHECK-NEXT:    buffer_load_dword v12, v2, s[0:3], 0 offen offset:52
; CHECK-NEXT:    buffer_load_dword v13, v2, s[0:3], 0 offen offset:56
; CHECK-NEXT:    buffer_load_dword v14, v2, s[0:3], 0 offen offset:60
; CHECK-NEXT:    buffer_load_dword v18, v2, s[0:3], 0 offen offset:124
; CHECK-NEXT:    buffer_load_dword v17, v2, s[0:3], 0 offen offset:120
; CHECK-NEXT:    buffer_load_dword v16, v2, s[0:3], 0 offen offset:116
; CHECK-NEXT:    buffer_load_dword v15, v2, s[0:3], 0 offen offset:112
; CHECK-NEXT:    buffer_load_dword v22, v2, s[0:3], 0 offen offset:108
; CHECK-NEXT:    buffer_load_dword v21, v2, s[0:3], 0 offen offset:104
; CHECK-NEXT:    buffer_load_dword v20, v2, s[0:3], 0 offen offset:100
; CHECK-NEXT:    buffer_load_dword v19, v2, s[0:3], 0 offen offset:96
; CHECK-NEXT:    buffer_load_dword v26, v2, s[0:3], 0 offen offset:252
; CHECK-NEXT:    buffer_load_dword v25, v2, s[0:3], 0 offen offset:248
; CHECK-NEXT:    buffer_load_dword v24, v2, s[0:3], 0 offen offset:244
; CHECK-NEXT:    buffer_load_dword v23, v2, s[0:3], 0 offen offset:240
; CHECK-NEXT:    buffer_load_dword v30, v2, s[0:3], 0 offen offset:236
; CHECK-NEXT:    buffer_load_dword v29, v2, s[0:3], 0 offen offset:232
; CHECK-NEXT:    buffer_load_dword v28, v2, s[0:3], 0 offen offset:228
; CHECK-NEXT:    buffer_load_dword v27, v2, s[0:3], 0 offen offset:224
; CHECK-NEXT:    buffer_load_dword v34, v2, s[0:3], 0 offen offset:220
; CHECK-NEXT:    buffer_load_dword v33, v2, s[0:3], 0 offen offset:216
; CHECK-NEXT:    buffer_load_dword v32, v2, s[0:3], 0 offen offset:212
; CHECK-NEXT:    buffer_load_dword v31, v2, s[0:3], 0 offen offset:208
; CHECK-NEXT:    buffer_load_dword v38, v2, s[0:3], 0 offen offset:204
; CHECK-NEXT:    buffer_load_dword v37, v2, s[0:3], 0 offen offset:200
; CHECK-NEXT:    buffer_load_dword v36, v2, s[0:3], 0 offen offset:196
; CHECK-NEXT:    buffer_load_dword v35, v2, s[0:3], 0 offen offset:192
; CHECK-NEXT:    buffer_load_dword v51, v2, s[0:3], 0 offen offset:188
; CHECK-NEXT:    buffer_load_dword v50, v2, s[0:3], 0 offen offset:184
; CHECK-NEXT:    buffer_load_dword v49, v2, s[0:3], 0 offen offset:180
; CHECK-NEXT:    buffer_load_dword v48, v2, s[0:3], 0 offen offset:176
; CHECK-NEXT:    buffer_load_dword v55, v2, s[0:3], 0 offen offset:172
; CHECK-NEXT:    buffer_load_dword v54, v2, s[0:3], 0 offen offset:168
; CHECK-NEXT:    buffer_load_dword v53, v2, s[0:3], 0 offen offset:164
; CHECK-NEXT:    buffer_load_dword v52, v2, s[0:3], 0 offen offset:160
; CHECK-NEXT:    buffer_load_dword v67, v2, s[0:3], 0 offen offset:156
; CHECK-NEXT:    buffer_load_dword v66, v2, s[0:3], 0 offen offset:152
; CHECK-NEXT:    buffer_load_dword v65, v2, s[0:3], 0 offen offset:148
; CHECK-NEXT:    buffer_load_dword v64, v2, s[0:3], 0 offen offset:144
; CHECK-NEXT:    buffer_load_dword v71, v2, s[0:3], 0 offen offset:140
; CHECK-NEXT:    buffer_load_dword v70, v2, s[0:3], 0 offen offset:136
; CHECK-NEXT:    buffer_load_dword v69, v2, s[0:3], 0 offen offset:132
; CHECK-NEXT:    buffer_load_dword v68, v2, s[0:3], 0 offen offset:128
; CHECK-NEXT:    buffer_load_dword v83, v2, s[0:3], 0 offen offset:92
; CHECK-NEXT:    buffer_load_dword v82, v2, s[0:3], 0 offen offset:88
; CHECK-NEXT:    buffer_load_dword v81, v2, s[0:3], 0 offen offset:84
; CHECK-NEXT:    buffer_load_dword v80, v2, s[0:3], 0 offen offset:80
; CHECK-NEXT:    buffer_load_dword v87, v2, s[0:3], 0 offen offset:76
; CHECK-NEXT:    buffer_load_dword v86, v2, s[0:3], 0 offen offset:72
; CHECK-NEXT:    buffer_load_dword v85, v2, s[0:3], 0 offen offset:68
; CHECK-NEXT:    buffer_load_dword v84, v2, s[0:3], 0 offen offset:64
; CHECK-NEXT:    buffer_load_dword v96, v2, s[0:3], 0 offen
; CHECK-NEXT:    buffer_load_dword v97, v2, s[0:3], 0 offen offset:4
; CHECK-NEXT:    buffer_load_dword v98, v2, s[0:3], 0 offen offset:8
; CHECK-NEXT:    buffer_load_dword v3, v2, s[0:3], 0 offen offset:16
; CHECK-NEXT:    buffer_load_dword v99, v2, s[0:3], 0 offen offset:12
; CHECK-NEXT:    s_add_u32 s6, s6, 1
; CHECK-NEXT:    s_addc_u32 s7, s7, 0
; CHECK-NEXT:    v_add_nc_u32_e32 v2, 0x100, v2
; CHECK-NEXT:    v_cmp_lt_u64_e64 s4, s[6:7], 8
; CHECK-NEXT:    s_waitcnt vmcnt(41)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[23:26] offset:240
; CHECK-NEXT:    s_waitcnt vmcnt(37)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[27:30] offset:224
; CHECK-NEXT:    s_waitcnt vmcnt(33)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[31:34] offset:208
; CHECK-NEXT:    s_waitcnt vmcnt(29)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[35:38] offset:192
; CHECK-NEXT:    s_waitcnt vmcnt(25)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[48:51] offset:176
; CHECK-NEXT:    s_waitcnt vmcnt(21)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[52:55] offset:160
; CHECK-NEXT:    s_waitcnt vmcnt(17)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[64:67] offset:144
; CHECK-NEXT:    s_waitcnt vmcnt(13)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[68:71] offset:128
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[15:18] offset:112
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[19:22] offset:96
; CHECK-NEXT:    s_waitcnt vmcnt(9)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[80:83] offset:80
; CHECK-NEXT:    s_waitcnt vmcnt(5)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[84:87] offset:64
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[11:14] offset:48
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[7:10] offset:32
; CHECK-NEXT:    s_waitcnt vmcnt(1)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[3:6] offset:16
; CHECK-NEXT:    s_waitcnt vmcnt(0)
; CHECK-NEXT:    flat_store_dwordx4 v[0:1], v[96:99]
; CHECK-NEXT:    s_and_b32 vcc_lo, exec_lo, s4
; CHECK-NEXT:    v_add_co_u32 v0, s4, 0x100, v0
; CHECK-NEXT:    v_add_co_ci_u32_e64 v1, s4, 0, v1, s4
; CHECK-NEXT:    s_cbranch_vccnz .LBB4_1
; CHECK-NEXT:  ; %bb.2: ; %memcpy-split
; CHECK-NEXT:    s_waitcnt lgkmcnt(0)
; CHECK-NEXT:    s_setpc_b64 s[30:31]
;
; ALIGNED-LABEL: memcpy_p0_p5_sz2048:
; ALIGNED:       ; %bb.0: ; %entry
; ALIGNED-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; ALIGNED-NEXT:    s_mov_b64 s[6:7], 0
; ALIGNED-NEXT:  .LBB4_1: ; %load-store-loop
; ALIGNED-NEXT:    ; =>This Inner Loop Header: Depth=1
; ALIGNED-NEXT:    s_clause 0xf
; ALIGNED-NEXT:    buffer_load_ubyte v3, v2, s[0:3], 0 offen offset:2
; ALIGNED-NEXT:    buffer_load_ubyte v4, v2, s[0:3], 0 offen offset:3
; ALIGNED-NEXT:    buffer_load_ubyte v5, v2, s[0:3], 0 offen
; ALIGNED-NEXT:    buffer_load_ubyte v6, v2, s[0:3], 0 offen offset:1
; ALIGNED-NEXT:    buffer_load_ubyte v7, v2, s[0:3], 0 offen offset:6
; ALIGNED-NEXT:    buffer_load_ubyte v8, v2, s[0:3], 0 offen offset:7
; ALIGNED-NEXT:    buffer_load_ubyte v9, v2, s[0:3], 0 offen offset:4
; ALIGNED-NEXT:    buffer_load_ubyte v10, v2, s[0:3], 0 offen offset:5
; ALIGNED-NEXT:    buffer_load_ubyte v11, v2, s[0:3], 0 offen offset:10
; ALIGNED-NEXT:    buffer_load_ubyte v12, v2, s[0:3], 0 offen offset:11
; ALIGNED-NEXT:    buffer_load_ubyte v13, v2, s[0:3], 0 offen offset:8
; ALIGNED-NEXT:    buffer_load_ubyte v14, v2, s[0:3], 0 offen offset:9
; ALIGNED-NEXT:    buffer_load_ubyte v15, v2, s[0:3], 0 offen offset:14
; ALIGNED-NEXT:    buffer_load_ubyte v16, v2, s[0:3], 0 offen offset:15
; ALIGNED-NEXT:    buffer_load_ubyte v17, v2, s[0:3], 0 offen offset:12
; ALIGNED-NEXT:    buffer_load_ubyte v18, v2, s[0:3], 0 offen offset:13
; ALIGNED-NEXT:    s_add_u32 s6, s6, 1
; ALIGNED-NEXT:    s_addc_u32 s7, s7, 0
; ALIGNED-NEXT:    v_add_nc_u32_e32 v2, 16, v2
; ALIGNED-NEXT:    v_cmp_gt_u64_e64 s4, 0x80, s[6:7]
; ALIGNED-NEXT:    s_waitcnt vmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v3 offset:2
; ALIGNED-NEXT:    s_waitcnt vmcnt(14)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v4 offset:3
; ALIGNED-NEXT:    s_waitcnt vmcnt(13)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v5
; ALIGNED-NEXT:    s_waitcnt vmcnt(12)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v6 offset:1
; ALIGNED-NEXT:    s_waitcnt vmcnt(11)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v7 offset:6
; ALIGNED-NEXT:    s_waitcnt vmcnt(10)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v8 offset:7
; ALIGNED-NEXT:    s_waitcnt vmcnt(9)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v9 offset:4
; ALIGNED-NEXT:    s_waitcnt vmcnt(8)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v10 offset:5
; ALIGNED-NEXT:    s_waitcnt vmcnt(7)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v11 offset:10
; ALIGNED-NEXT:    s_waitcnt vmcnt(6)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v12 offset:11
; ALIGNED-NEXT:    s_waitcnt vmcnt(5)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v13 offset:8
; ALIGNED-NEXT:    s_waitcnt vmcnt(4)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v14 offset:9
; ALIGNED-NEXT:    s_waitcnt vmcnt(3)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v15 offset:14
; ALIGNED-NEXT:    s_waitcnt vmcnt(2)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v16 offset:15
; ALIGNED-NEXT:    s_waitcnt vmcnt(1)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v17 offset:12
; ALIGNED-NEXT:    s_waitcnt vmcnt(0)
; ALIGNED-NEXT:    flat_store_byte v[0:1], v18 offset:13
; ALIGNED-NEXT:    s_and_b32 vcc_lo, exec_lo, s4
; ALIGNED-NEXT:    v_add_co_u32 v0, s4, v0, 16
; ALIGNED-NEXT:    v_add_co_ci_u32_e64 v1, s4, 0, v1, s4
; ALIGNED-NEXT:    s_cbranch_vccnz .LBB4_1
; ALIGNED-NEXT:  ; %bb.2: ; %memcpy-split
; ALIGNED-NEXT:    s_waitcnt lgkmcnt(0)
; ALIGNED-NEXT:    s_setpc_b64 s[30:31]
entry:
  tail call void @llvm.memcpy.p0.p5.i64(ptr addrspace(0) noundef nonnull align 1 %dst, ptr addrspace(5) noundef nonnull align 1 %src, i64 2048, i1 false)
  ret void
}


; memmove for address spaces 0, 1, 4, 5

define void @memmove_p0_p0_sz2048(ptr addrspace(0) align 1 %dst, ptr addrspace(0) align 1 readonly %src) {
; CHECK-LABEL: memmove_p0_p0_sz2048:
; CHECK:       ; %bb.0: ; %entry
; CHECK-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; CHECK-NEXT:    s_mov_b32 s4, exec_lo
; CHECK-NEXT:    v_cmpx_ge_u64_e64 v[2:3], v[0:1]
; CHECK-NEXT:    s_xor_b32 s6, exec_lo, s4
; CHECK-NEXT:    s_cbranch_execz .LBB5_3
; CHECK-NEXT:  ; %bb.1: ; %memmove_fwd_loop.preheader
; CHECK-NEXT:    s_mov_b64 s[4:5], 0
; CHECK-NEXT:  .LBB5_2: ; %memmove_fwd_loop
; CHECK-NEXT:    ; =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    v_add_co_u32 v96, vcc_lo, v2, s4
; CHECK-NEXT:    v_add_co_ci_u32_e32 v97, vcc_lo, s5, v3, vcc_lo
; CHECK-NEXT:    v_add_co_u32 v100, vcc_lo, v0, s4
; CHECK-NEXT:    v_add_co_ci_u32_e32 v101, vcc_lo, s5, v1, vcc_lo
; CHECK-NEXT:    s_clause 0xf
; CHECK-NEXT:    flat_load_dwordx4 v[4:7], v[96:97] offset:224
; CHECK-NEXT:    flat_load_dwordx4 v[8:11], v[96:97] offset:240
; CHECK-NEXT:    flat_load_dwordx4 v[12:15], v[96:97] offset:192
; CHECK-NEXT:    flat_load_dwordx4 v[16:19], v[96:97] offset:208
; CHECK-NEXT:    flat_load_dwordx4 v[20:23], v[96:97] offset:160
; CHECK-NEXT:    flat_load_dwordx4 v[24:27], v[96:97] offset:176
; CHECK-NEXT:    flat_load_dwordx4 v[28:31], v[96:97] offset:128
; CHECK-NEXT:    flat_load_dwordx4 v[32:35], v[96:97] offset:144
; CHECK-NEXT:    flat_load_dwordx4 v[36:39], v[96:97] offset:96
; CHECK-NEXT:    flat_load_dwordx4 v[48:51], v[96:97] offset:112
; CHECK-NEXT:    flat_load_dwordx4 v[52:55], v[96:97] offset:64
; CHECK-NEXT:    flat_load_dwordx4 v[64:67], v[96:97] offset:80
; CHECK-NEXT:    flat_load_dwordx4 v[68:71], v[96:97] offset:32
; CHECK-NEXT:    flat_load_dwordx4 v[80:83], v[96:97] offset:48
; CHECK-NEXT:    flat_load_dwordx4 v[84:87], v[96:97]
; CHECK-NEXT:    flat_load_dwordx4 v[96:99], v[96:97] offset:16
; CHECK-NEXT:    s_add_u32 s4, s4, 0x100
; CHECK-NEXT:    s_addc_u32 s5, s5, 0
; CHECK-NEXT:    s_waitcnt vmcnt(15) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[4:7] offset:224
; CHECK-NEXT:    s_waitcnt vmcnt(14) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[8:11] offset:240
; CHECK-NEXT:    s_waitcnt vmcnt(13) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[12:15] offset:192
; CHECK-NEXT:    s_waitcnt vmcnt(12) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[16:19] offset:208
; CHECK-NEXT:    s_waitcnt vmcnt(11) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[20:23] offset:160
; CHECK-NEXT:    s_waitcnt vmcnt(10) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[24:27] offset:176
; CHECK-NEXT:    s_waitcnt vmcnt(9) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[28:31] offset:128
; CHECK-NEXT:    s_waitcnt vmcnt(8) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[32:35] offset:144
; CHECK-NEXT:    s_waitcnt vmcnt(7) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[36:39] offset:96
; CHECK-NEXT:    s_waitcnt vmcnt(6) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[48:51] offset:112
; CHECK-NEXT:    s_waitcnt vmcnt(5) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[52:55] offset:64
; CHECK-NEXT:    s_waitcnt vmcnt(4) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[64:67] offset:80
; CHECK-NEXT:    s_waitcnt vmcnt(3) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[68:71] offset:32
; CHECK-NEXT:    s_waitcnt vmcnt(2) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[80:83] offset:48
; CHECK-NEXT:    s_waitcnt vmcnt(1) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[84:87]
; CHECK-NEXT:    s_waitcnt vmcnt(0) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[96:99] offset:16
; CHECK-NEXT:    s_cmp_lg_u64 s[4:5], 0x800
; CHECK-NEXT:    s_cbranch_scc1 .LBB5_2
; CHECK-NEXT:  .LBB5_3: ; %Flow9
; CHECK-NEXT:    s_andn2_saveexec_b32 s8, s6
; CHECK-NEXT:    s_cbranch_execz .LBB5_6
; CHECK-NEXT:  ; %bb.4: ; %memmove_bwd_loop.preheader
; CHECK-NEXT:    s_movk_i32 s6, 0xff00
; CHECK-NEXT:    s_mov_b64 s[4:5], 0x700
; CHECK-NEXT:    s_mov_b32 s7, -1
; CHECK-NEXT:  .LBB5_5: ; %memmove_bwd_loop
; CHECK-NEXT:    ; =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    v_add_co_u32 v96, vcc_lo, v2, s4
; CHECK-NEXT:    v_add_co_ci_u32_e32 v97, vcc_lo, s5, v3, vcc_lo
; CHECK-NEXT:    v_add_co_u32 v100, vcc_lo, v0, s4
; CHECK-NEXT:    v_add_co_ci_u32_e32 v101, vcc_lo, s5, v1, vcc_lo
; CHECK-NEXT:    s_clause 0xf
; CHECK-NEXT:    flat_load_dwordx4 v[4:7], v[96:97] offset:224
; CHECK-NEXT:    flat_load_dwordx4 v[8:11], v[96:97] offset:240
; CHECK-NEXT:    flat_load_dwordx4 v[12:15], v[96:97] offset:192
; CHECK-NEXT:    flat_load_dwordx4 v[16:19], v[96:97] offset:208
; CHECK-NEXT:    flat_load_dwordx4 v[20:23], v[96:97] offset:160
; CHECK-NEXT:    flat_load_dwordx4 v[24:27], v[96:97] offset:176
; CHECK-NEXT:    flat_load_dwordx4 v[28:31], v[96:97] offset:128
; CHECK-NEXT:    flat_load_dwordx4 v[32:35], v[96:97] offset:144
; CHECK-NEXT:    flat_load_dwordx4 v[36:39], v[96:97] offset:96
; CHECK-NEXT:    flat_load_dwordx4 v[48:51], v[96:97] offset:112
; CHECK-NEXT:    flat_load_dwordx4 v[52:55], v[96:97] offset:64
; CHECK-NEXT:    flat_load_dwordx4 v[64:67], v[96:97] offset:80
; CHECK-NEXT:    flat_load_dwordx4 v[68:71], v[96:97] offset:32
; CHECK-NEXT:    flat_load_dwordx4 v[80:83], v[96:97] offset:48
; CHECK-NEXT:    flat_load_dwordx4 v[84:87], v[96:97]
; CHECK-NEXT:    flat_load_dwordx4 v[96:99], v[96:97] offset:16
; CHECK-NEXT:    s_add_u32 s4, s4, 0xffffff00
; CHECK-NEXT:    s_addc_u32 s5, s5, -1
; CHECK-NEXT:    s_waitcnt vmcnt(15) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[4:7] offset:224
; CHECK-NEXT:    s_waitcnt vmcnt(14) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[8:11] offset:240
; CHECK-NEXT:    s_waitcnt vmcnt(13) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[12:15] offset:192
; CHECK-NEXT:    s_waitcnt vmcnt(12) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[16:19] offset:208
; CHECK-NEXT:    s_waitcnt vmcnt(11) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[20:23] offset:160
; CHECK-NEXT:    s_waitcnt vmcnt(10) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[24:27] offset:176
; CHECK-NEXT:    s_waitcnt vmcnt(9) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[28:31] offset:128
; CHECK-NEXT:    s_waitcnt vmcnt(8) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[32:35] offset:144
; CHECK-NEXT:    s_waitcnt vmcnt(7) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[36:39] offset:96
; CHECK-NEXT:    s_waitcnt vmcnt(6) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[48:51] offset:112
; CHECK-NEXT:    s_waitcnt vmcnt(5) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[52:55] offset:64
; CHECK-NEXT:    s_waitcnt vmcnt(4) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[64:67] offset:80
; CHECK-NEXT:    s_waitcnt vmcnt(3) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[68:71] offset:32
; CHECK-NEXT:    s_waitcnt vmcnt(2) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[80:83] offset:48
; CHECK-NEXT:    s_waitcnt vmcnt(1) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[84:87]
; CHECK-NEXT:    s_waitcnt vmcnt(0) lgkmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[96:99] offset:16
; CHECK-NEXT:    s_cmp_eq_u64 s[4:5], s[6:7]
; CHECK-NEXT:    s_cbranch_scc0 .LBB5_5
; CHECK-NEXT:  .LBB5_6: ; %Flow10
; CHECK-NEXT:    s_or_b32 exec_lo, exec_lo, s8
; CHECK-NEXT:    s_waitcnt lgkmcnt(0)
; CHECK-NEXT:    s_setpc_b64 s[30:31]
;
; ALIGNED-LABEL: memmove_p0_p0_sz2048:
; ALIGNED:       ; %bb.0: ; %entry
; ALIGNED-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; ALIGNED-NEXT:    s_mov_b32 s4, exec_lo
; ALIGNED-NEXT:    v_cmpx_ge_u64_e64 v[2:3], v[0:1]
; ALIGNED-NEXT:    s_xor_b32 s6, exec_lo, s4
; ALIGNED-NEXT:    s_cbranch_execz .LBB5_3
; ALIGNED-NEXT:  ; %bb.1: ; %memmove_fwd_loop.preheader
; ALIGNED-NEXT:    s_mov_b64 s[4:5], 0
; ALIGNED-NEXT:  .LBB5_2: ; %memmove_fwd_loop
; ALIGNED-NEXT:    ; =>This Inner Loop Header: Depth=1
; ALIGNED-NEXT:    v_add_co_u32 v4, vcc_lo, v2, s4
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v5, vcc_lo, s5, v3, vcc_lo
; ALIGNED-NEXT:    s_clause 0xf
; ALIGNED-NEXT:    flat_load_ubyte v6, v[4:5] offset:2
; ALIGNED-NEXT:    flat_load_ubyte v7, v[4:5] offset:3
; ALIGNED-NEXT:    flat_load_ubyte v8, v[4:5]
; ALIGNED-NEXT:    flat_load_ubyte v9, v[4:5] offset:1
; ALIGNED-NEXT:    flat_load_ubyte v10, v[4:5] offset:6
; ALIGNED-NEXT:    flat_load_ubyte v11, v[4:5] offset:7
; ALIGNED-NEXT:    flat_load_ubyte v12, v[4:5] offset:4
; ALIGNED-NEXT:    flat_load_ubyte v13, v[4:5] offset:5
; ALIGNED-NEXT:    flat_load_ubyte v14, v[4:5] offset:10
; ALIGNED-NEXT:    flat_load_ubyte v15, v[4:5] offset:11
; ALIGNED-NEXT:    flat_load_ubyte v16, v[4:5] offset:8
; ALIGNED-NEXT:    flat_load_ubyte v17, v[4:5] offset:9
; ALIGNED-NEXT:    flat_load_ubyte v18, v[4:5] offset:14
; ALIGNED-NEXT:    flat_load_ubyte v19, v[4:5] offset:15
; ALIGNED-NEXT:    flat_load_ubyte v20, v[4:5] offset:12
; ALIGNED-NEXT:    flat_load_ubyte v21, v[4:5] offset:13
; ALIGNED-NEXT:    v_add_co_u32 v4, vcc_lo, v0, s4
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v5, vcc_lo, s5, v1, vcc_lo
; ALIGNED-NEXT:    s_add_u32 s4, s4, 16
; ALIGNED-NEXT:    s_addc_u32 s5, s5, 0
; ALIGNED-NEXT:    s_waitcnt vmcnt(15) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v6 offset:2
; ALIGNED-NEXT:    s_waitcnt vmcnt(14) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v7 offset:3
; ALIGNED-NEXT:    s_waitcnt vmcnt(13) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v8
; ALIGNED-NEXT:    s_waitcnt vmcnt(12) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v9 offset:1
; ALIGNED-NEXT:    s_waitcnt vmcnt(11) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v10 offset:6
; ALIGNED-NEXT:    s_waitcnt vmcnt(10) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v11 offset:7
; ALIGNED-NEXT:    s_waitcnt vmcnt(9) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v12 offset:4
; ALIGNED-NEXT:    s_waitcnt vmcnt(8) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v13 offset:5
; ALIGNED-NEXT:    s_waitcnt vmcnt(7) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v14 offset:10
; ALIGNED-NEXT:    s_waitcnt vmcnt(6) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v15 offset:11
; ALIGNED-NEXT:    s_waitcnt vmcnt(5) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v16 offset:8
; ALIGNED-NEXT:    s_waitcnt vmcnt(4) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v17 offset:9
; ALIGNED-NEXT:    s_waitcnt vmcnt(3) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v18 offset:14
; ALIGNED-NEXT:    s_waitcnt vmcnt(2) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v19 offset:15
; ALIGNED-NEXT:    s_waitcnt vmcnt(1) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v20 offset:12
; ALIGNED-NEXT:    s_waitcnt vmcnt(0) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v21 offset:13
; ALIGNED-NEXT:    s_cmp_lg_u64 s[4:5], 0x800
; ALIGNED-NEXT:    s_cbranch_scc1 .LBB5_2
; ALIGNED-NEXT:  .LBB5_3: ; %Flow9
; ALIGNED-NEXT:    s_andn2_saveexec_b32 s6, s6
; ALIGNED-NEXT:    s_cbranch_execz .LBB5_6
; ALIGNED-NEXT:  ; %bb.4: ; %memmove_bwd_loop.preheader
; ALIGNED-NEXT:    s_mov_b64 s[4:5], 0x7f0
; ALIGNED-NEXT:  .LBB5_5: ; %memmove_bwd_loop
; ALIGNED-NEXT:    ; =>This Inner Loop Header: Depth=1
; ALIGNED-NEXT:    v_add_co_u32 v4, vcc_lo, v2, s4
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v5, vcc_lo, s5, v3, vcc_lo
; ALIGNED-NEXT:    s_clause 0xf
; ALIGNED-NEXT:    flat_load_ubyte v6, v[4:5] offset:2
; ALIGNED-NEXT:    flat_load_ubyte v7, v[4:5] offset:3
; ALIGNED-NEXT:    flat_load_ubyte v8, v[4:5]
; ALIGNED-NEXT:    flat_load_ubyte v9, v[4:5] offset:1
; ALIGNED-NEXT:    flat_load_ubyte v10, v[4:5] offset:6
; ALIGNED-NEXT:    flat_load_ubyte v11, v[4:5] offset:7
; ALIGNED-NEXT:    flat_load_ubyte v12, v[4:5] offset:4
; ALIGNED-NEXT:    flat_load_ubyte v13, v[4:5] offset:5
; ALIGNED-NEXT:    flat_load_ubyte v14, v[4:5] offset:10
; ALIGNED-NEXT:    flat_load_ubyte v15, v[4:5] offset:11
; ALIGNED-NEXT:    flat_load_ubyte v16, v[4:5] offset:8
; ALIGNED-NEXT:    flat_load_ubyte v17, v[4:5] offset:9
; ALIGNED-NEXT:    flat_load_ubyte v18, v[4:5] offset:14
; ALIGNED-NEXT:    flat_load_ubyte v19, v[4:5] offset:15
; ALIGNED-NEXT:    flat_load_ubyte v20, v[4:5] offset:12
; ALIGNED-NEXT:    flat_load_ubyte v21, v[4:5] offset:13
; ALIGNED-NEXT:    v_add_co_u32 v4, vcc_lo, v0, s4
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v5, vcc_lo, s5, v1, vcc_lo
; ALIGNED-NEXT:    s_add_u32 s4, s4, -16
; ALIGNED-NEXT:    s_addc_u32 s5, s5, -1
; ALIGNED-NEXT:    s_waitcnt vmcnt(15) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v6 offset:2
; ALIGNED-NEXT:    s_waitcnt vmcnt(14) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v7 offset:3
; ALIGNED-NEXT:    s_waitcnt vmcnt(13) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v8
; ALIGNED-NEXT:    s_waitcnt vmcnt(12) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v9 offset:1
; ALIGNED-NEXT:    s_waitcnt vmcnt(11) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v10 offset:6
; ALIGNED-NEXT:    s_waitcnt vmcnt(10) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v11 offset:7
; ALIGNED-NEXT:    s_waitcnt vmcnt(9) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v12 offset:4
; ALIGNED-NEXT:    s_waitcnt vmcnt(8) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v13 offset:5
; ALIGNED-NEXT:    s_waitcnt vmcnt(7) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v14 offset:10
; ALIGNED-NEXT:    s_waitcnt vmcnt(6) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v15 offset:11
; ALIGNED-NEXT:    s_waitcnt vmcnt(5) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v16 offset:8
; ALIGNED-NEXT:    s_waitcnt vmcnt(4) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v17 offset:9
; ALIGNED-NEXT:    s_waitcnt vmcnt(3) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v18 offset:14
; ALIGNED-NEXT:    s_waitcnt vmcnt(2) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v19 offset:15
; ALIGNED-NEXT:    s_waitcnt vmcnt(1) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v20 offset:12
; ALIGNED-NEXT:    s_waitcnt vmcnt(0) lgkmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v21 offset:13
; ALIGNED-NEXT:    s_cmp_eq_u64 s[4:5], -16
; ALIGNED-NEXT:    s_cbranch_scc0 .LBB5_5
; ALIGNED-NEXT:  .LBB5_6: ; %Flow10
; ALIGNED-NEXT:    s_or_b32 exec_lo, exec_lo, s6
; ALIGNED-NEXT:    s_waitcnt lgkmcnt(0)
; ALIGNED-NEXT:    s_setpc_b64 s[30:31]
entry:
  tail call void @llvm.memmove.p0.p0.i64(ptr addrspace(0) noundef nonnull align 1 %dst, ptr addrspace(0) noundef nonnull align 1 %src, i64 2048, i1 false)
  ret void
}

define void @memmove_p1_p1_sz2048(ptr addrspace(1) align 1 %dst, ptr addrspace(1) align 1 readonly %src) {
; CHECK-LABEL: memmove_p1_p1_sz2048:
; CHECK:       ; %bb.0: ; %entry
; CHECK-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; CHECK-NEXT:    s_mov_b32 s4, exec_lo
; CHECK-NEXT:    v_cmpx_ge_u64_e64 v[2:3], v[0:1]
; CHECK-NEXT:    s_xor_b32 s6, exec_lo, s4
; CHECK-NEXT:    s_cbranch_execz .LBB6_3
; CHECK-NEXT:  ; %bb.1: ; %memmove_fwd_loop.preheader
; CHECK-NEXT:    s_mov_b64 s[4:5], 0
; CHECK-NEXT:  .LBB6_2: ; %memmove_fwd_loop
; CHECK-NEXT:    ; =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    v_add_co_u32 v96, vcc_lo, v2, s4
; CHECK-NEXT:    v_add_co_ci_u32_e32 v97, vcc_lo, s5, v3, vcc_lo
; CHECK-NEXT:    v_add_co_u32 v100, vcc_lo, v0, s4
; CHECK-NEXT:    v_add_co_ci_u32_e32 v101, vcc_lo, s5, v1, vcc_lo
; CHECK-NEXT:    s_clause 0xf
; CHECK-NEXT:    global_load_dwordx4 v[4:7], v[96:97], off offset:224
; CHECK-NEXT:    global_load_dwordx4 v[8:11], v[96:97], off offset:240
; CHECK-NEXT:    global_load_dwordx4 v[12:15], v[96:97], off offset:192
; CHECK-NEXT:    global_load_dwordx4 v[16:19], v[96:97], off offset:208
; CHECK-NEXT:    global_load_dwordx4 v[20:23], v[96:97], off offset:160
; CHECK-NEXT:    global_load_dwordx4 v[24:27], v[96:97], off offset:176
; CHECK-NEXT:    global_load_dwordx4 v[28:31], v[96:97], off offset:128
; CHECK-NEXT:    global_load_dwordx4 v[32:35], v[96:97], off offset:144
; CHECK-NEXT:    global_load_dwordx4 v[36:39], v[96:97], off offset:96
; CHECK-NEXT:    global_load_dwordx4 v[48:51], v[96:97], off offset:112
; CHECK-NEXT:    global_load_dwordx4 v[52:55], v[96:97], off offset:64
; CHECK-NEXT:    global_load_dwordx4 v[64:67], v[96:97], off offset:80
; CHECK-NEXT:    global_load_dwordx4 v[68:71], v[96:97], off offset:32
; CHECK-NEXT:    global_load_dwordx4 v[80:83], v[96:97], off offset:48
; CHECK-NEXT:    global_load_dwordx4 v[84:87], v[96:97], off
; CHECK-NEXT:    global_load_dwordx4 v[96:99], v[96:97], off offset:16
; CHECK-NEXT:    s_add_u32 s4, s4, 0x100
; CHECK-NEXT:    s_addc_u32 s5, s5, 0
; CHECK-NEXT:    s_waitcnt vmcnt(15)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[4:7], off offset:224
; CHECK-NEXT:    s_waitcnt vmcnt(14)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[8:11], off offset:240
; CHECK-NEXT:    s_waitcnt vmcnt(13)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[12:15], off offset:192
; CHECK-NEXT:    s_waitcnt vmcnt(12)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[16:19], off offset:208
; CHECK-NEXT:    s_waitcnt vmcnt(11)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[20:23], off offset:160
; CHECK-NEXT:    s_waitcnt vmcnt(10)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[24:27], off offset:176
; CHECK-NEXT:    s_waitcnt vmcnt(9)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[28:31], off offset:128
; CHECK-NEXT:    s_waitcnt vmcnt(8)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[32:35], off offset:144
; CHECK-NEXT:    s_waitcnt vmcnt(7)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[36:39], off offset:96
; CHECK-NEXT:    s_waitcnt vmcnt(6)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[48:51], off offset:112
; CHECK-NEXT:    s_waitcnt vmcnt(5)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[52:55], off offset:64
; CHECK-NEXT:    s_waitcnt vmcnt(4)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[64:67], off offset:80
; CHECK-NEXT:    s_waitcnt vmcnt(3)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[68:71], off offset:32
; CHECK-NEXT:    s_waitcnt vmcnt(2)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[80:83], off offset:48
; CHECK-NEXT:    s_waitcnt vmcnt(1)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[84:87], off
; CHECK-NEXT:    s_waitcnt vmcnt(0)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[96:99], off offset:16
; CHECK-NEXT:    s_cmp_lg_u64 s[4:5], 0x800
; CHECK-NEXT:    s_cbranch_scc1 .LBB6_2
; CHECK-NEXT:  .LBB6_3: ; %Flow13
; CHECK-NEXT:    s_andn2_saveexec_b32 s8, s6
; CHECK-NEXT:    s_cbranch_execz .LBB6_6
; CHECK-NEXT:  ; %bb.4: ; %memmove_bwd_loop.preheader
; CHECK-NEXT:    s_movk_i32 s6, 0xff00
; CHECK-NEXT:    s_mov_b64 s[4:5], 0x700
; CHECK-NEXT:    s_mov_b32 s7, -1
; CHECK-NEXT:  .LBB6_5: ; %memmove_bwd_loop
; CHECK-NEXT:    ; =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    v_add_co_u32 v96, vcc_lo, v2, s4
; CHECK-NEXT:    v_add_co_ci_u32_e32 v97, vcc_lo, s5, v3, vcc_lo
; CHECK-NEXT:    v_add_co_u32 v100, vcc_lo, v0, s4
; CHECK-NEXT:    v_add_co_ci_u32_e32 v101, vcc_lo, s5, v1, vcc_lo
; CHECK-NEXT:    s_clause 0xf
; CHECK-NEXT:    global_load_dwordx4 v[4:7], v[96:97], off offset:224
; CHECK-NEXT:    global_load_dwordx4 v[8:11], v[96:97], off offset:240
; CHECK-NEXT:    global_load_dwordx4 v[12:15], v[96:97], off offset:192
; CHECK-NEXT:    global_load_dwordx4 v[16:19], v[96:97], off offset:208
; CHECK-NEXT:    global_load_dwordx4 v[20:23], v[96:97], off offset:160
; CHECK-NEXT:    global_load_dwordx4 v[24:27], v[96:97], off offset:176
; CHECK-NEXT:    global_load_dwordx4 v[28:31], v[96:97], off offset:128
; CHECK-NEXT:    global_load_dwordx4 v[32:35], v[96:97], off offset:144
; CHECK-NEXT:    global_load_dwordx4 v[36:39], v[96:97], off offset:96
; CHECK-NEXT:    global_load_dwordx4 v[48:51], v[96:97], off offset:112
; CHECK-NEXT:    global_load_dwordx4 v[52:55], v[96:97], off offset:64
; CHECK-NEXT:    global_load_dwordx4 v[64:67], v[96:97], off offset:80
; CHECK-NEXT:    global_load_dwordx4 v[68:71], v[96:97], off offset:32
; CHECK-NEXT:    global_load_dwordx4 v[80:83], v[96:97], off offset:48
; CHECK-NEXT:    global_load_dwordx4 v[84:87], v[96:97], off
; CHECK-NEXT:    global_load_dwordx4 v[96:99], v[96:97], off offset:16
; CHECK-NEXT:    s_add_u32 s4, s4, 0xffffff00
; CHECK-NEXT:    s_addc_u32 s5, s5, -1
; CHECK-NEXT:    s_waitcnt vmcnt(15)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[4:7], off offset:224
; CHECK-NEXT:    s_waitcnt vmcnt(14)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[8:11], off offset:240
; CHECK-NEXT:    s_waitcnt vmcnt(13)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[12:15], off offset:192
; CHECK-NEXT:    s_waitcnt vmcnt(12)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[16:19], off offset:208
; CHECK-NEXT:    s_waitcnt vmcnt(11)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[20:23], off offset:160
; CHECK-NEXT:    s_waitcnt vmcnt(10)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[24:27], off offset:176
; CHECK-NEXT:    s_waitcnt vmcnt(9)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[28:31], off offset:128
; CHECK-NEXT:    s_waitcnt vmcnt(8)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[32:35], off offset:144
; CHECK-NEXT:    s_waitcnt vmcnt(7)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[36:39], off offset:96
; CHECK-NEXT:    s_waitcnt vmcnt(6)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[48:51], off offset:112
; CHECK-NEXT:    s_waitcnt vmcnt(5)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[52:55], off offset:64
; CHECK-NEXT:    s_waitcnt vmcnt(4)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[64:67], off offset:80
; CHECK-NEXT:    s_waitcnt vmcnt(3)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[68:71], off offset:32
; CHECK-NEXT:    s_waitcnt vmcnt(2)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[80:83], off offset:48
; CHECK-NEXT:    s_waitcnt vmcnt(1)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[84:87], off
; CHECK-NEXT:    s_waitcnt vmcnt(0)
; CHECK-NEXT:    global_store_dwordx4 v[100:101], v[96:99], off offset:16
; CHECK-NEXT:    s_cmp_eq_u64 s[4:5], s[6:7]
; CHECK-NEXT:    s_cbranch_scc0 .LBB6_5
; CHECK-NEXT:  .LBB6_6: ; %Flow14
; CHECK-NEXT:    s_or_b32 exec_lo, exec_lo, s8
; CHECK-NEXT:    s_setpc_b64 s[30:31]
;
; ALIGNED-LABEL: memmove_p1_p1_sz2048:
; ALIGNED:       ; %bb.0: ; %entry
; ALIGNED-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; ALIGNED-NEXT:    s_mov_b32 s4, exec_lo
; ALIGNED-NEXT:    v_cmpx_ge_u64_e64 v[2:3], v[0:1]
; ALIGNED-NEXT:    s_xor_b32 s6, exec_lo, s4
; ALIGNED-NEXT:    s_cbranch_execz .LBB6_3
; ALIGNED-NEXT:  ; %bb.1: ; %memmove_fwd_loop.preheader
; ALIGNED-NEXT:    s_mov_b64 s[4:5], 0
; ALIGNED-NEXT:  .LBB6_2: ; %memmove_fwd_loop
; ALIGNED-NEXT:    ; =>This Inner Loop Header: Depth=1
; ALIGNED-NEXT:    v_add_co_u32 v4, vcc_lo, v2, s4
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v5, vcc_lo, s5, v3, vcc_lo
; ALIGNED-NEXT:    s_clause 0xf
; ALIGNED-NEXT:    global_load_ubyte v6, v[4:5], off offset:2
; ALIGNED-NEXT:    global_load_ubyte v7, v[4:5], off offset:3
; ALIGNED-NEXT:    global_load_ubyte v8, v[4:5], off
; ALIGNED-NEXT:    global_load_ubyte v9, v[4:5], off offset:1
; ALIGNED-NEXT:    global_load_ubyte v10, v[4:5], off offset:6
; ALIGNED-NEXT:    global_load_ubyte v11, v[4:5], off offset:7
; ALIGNED-NEXT:    global_load_ubyte v12, v[4:5], off offset:4
; ALIGNED-NEXT:    global_load_ubyte v13, v[4:5], off offset:5
; ALIGNED-NEXT:    global_load_ubyte v14, v[4:5], off offset:10
; ALIGNED-NEXT:    global_load_ubyte v15, v[4:5], off offset:11
; ALIGNED-NEXT:    global_load_ubyte v16, v[4:5], off offset:8
; ALIGNED-NEXT:    global_load_ubyte v17, v[4:5], off offset:9
; ALIGNED-NEXT:    global_load_ubyte v18, v[4:5], off offset:14
; ALIGNED-NEXT:    global_load_ubyte v19, v[4:5], off offset:15
; ALIGNED-NEXT:    global_load_ubyte v20, v[4:5], off offset:12
; ALIGNED-NEXT:    global_load_ubyte v21, v[4:5], off offset:13
; ALIGNED-NEXT:    v_add_co_u32 v4, vcc_lo, v0, s4
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v5, vcc_lo, s5, v1, vcc_lo
; ALIGNED-NEXT:    s_add_u32 s4, s4, 16
; ALIGNED-NEXT:    s_addc_u32 s5, s5, 0
; ALIGNED-NEXT:    s_waitcnt vmcnt(15)
; ALIGNED-NEXT:    global_store_byte v[4:5], v6, off offset:2
; ALIGNED-NEXT:    s_waitcnt vmcnt(14)
; ALIGNED-NEXT:    global_store_byte v[4:5], v7, off offset:3
; ALIGNED-NEXT:    s_waitcnt vmcnt(13)
; ALIGNED-NEXT:    global_store_byte v[4:5], v8, off
; ALIGNED-NEXT:    s_waitcnt vmcnt(12)
; ALIGNED-NEXT:    global_store_byte v[4:5], v9, off offset:1
; ALIGNED-NEXT:    s_waitcnt vmcnt(11)
; ALIGNED-NEXT:    global_store_byte v[4:5], v10, off offset:6
; ALIGNED-NEXT:    s_waitcnt vmcnt(10)
; ALIGNED-NEXT:    global_store_byte v[4:5], v11, off offset:7
; ALIGNED-NEXT:    s_waitcnt vmcnt(9)
; ALIGNED-NEXT:    global_store_byte v[4:5], v12, off offset:4
; ALIGNED-NEXT:    s_waitcnt vmcnt(8)
; ALIGNED-NEXT:    global_store_byte v[4:5], v13, off offset:5
; ALIGNED-NEXT:    s_waitcnt vmcnt(7)
; ALIGNED-NEXT:    global_store_byte v[4:5], v14, off offset:10
; ALIGNED-NEXT:    s_waitcnt vmcnt(6)
; ALIGNED-NEXT:    global_store_byte v[4:5], v15, off offset:11
; ALIGNED-NEXT:    s_waitcnt vmcnt(5)
; ALIGNED-NEXT:    global_store_byte v[4:5], v16, off offset:8
; ALIGNED-NEXT:    s_waitcnt vmcnt(4)
; ALIGNED-NEXT:    global_store_byte v[4:5], v17, off offset:9
; ALIGNED-NEXT:    s_waitcnt vmcnt(3)
; ALIGNED-NEXT:    global_store_byte v[4:5], v18, off offset:14
; ALIGNED-NEXT:    s_waitcnt vmcnt(2)
; ALIGNED-NEXT:    global_store_byte v[4:5], v19, off offset:15
; ALIGNED-NEXT:    s_waitcnt vmcnt(1)
; ALIGNED-NEXT:    global_store_byte v[4:5], v20, off offset:12
; ALIGNED-NEXT:    s_waitcnt vmcnt(0)
; ALIGNED-NEXT:    global_store_byte v[4:5], v21, off offset:13
; ALIGNED-NEXT:    s_cmp_lg_u64 s[4:5], 0x800
; ALIGNED-NEXT:    s_cbranch_scc1 .LBB6_2
; ALIGNED-NEXT:  .LBB6_3: ; %Flow13
; ALIGNED-NEXT:    s_andn2_saveexec_b32 s6, s6
; ALIGNED-NEXT:    s_cbranch_execz .LBB6_6
; ALIGNED-NEXT:  ; %bb.4: ; %memmove_bwd_loop.preheader
; ALIGNED-NEXT:    s_mov_b64 s[4:5], 0x7f0
; ALIGNED-NEXT:  .LBB6_5: ; %memmove_bwd_loop
; ALIGNED-NEXT:    ; =>This Inner Loop Header: Depth=1
; ALIGNED-NEXT:    v_add_co_u32 v4, vcc_lo, v2, s4
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v5, vcc_lo, s5, v3, vcc_lo
; ALIGNED-NEXT:    s_clause 0xf
; ALIGNED-NEXT:    global_load_ubyte v6, v[4:5], off offset:2
; ALIGNED-NEXT:    global_load_ubyte v7, v[4:5], off offset:3
; ALIGNED-NEXT:    global_load_ubyte v8, v[4:5], off
; ALIGNED-NEXT:    global_load_ubyte v9, v[4:5], off offset:1
; ALIGNED-NEXT:    global_load_ubyte v10, v[4:5], off offset:6
; ALIGNED-NEXT:    global_load_ubyte v11, v[4:5], off offset:7
; ALIGNED-NEXT:    global_load_ubyte v12, v[4:5], off offset:4
; ALIGNED-NEXT:    global_load_ubyte v13, v[4:5], off offset:5
; ALIGNED-NEXT:    global_load_ubyte v14, v[4:5], off offset:10
; ALIGNED-NEXT:    global_load_ubyte v15, v[4:5], off offset:11
; ALIGNED-NEXT:    global_load_ubyte v16, v[4:5], off offset:8
; ALIGNED-NEXT:    global_load_ubyte v17, v[4:5], off offset:9
; ALIGNED-NEXT:    global_load_ubyte v18, v[4:5], off offset:14
; ALIGNED-NEXT:    global_load_ubyte v19, v[4:5], off offset:15
; ALIGNED-NEXT:    global_load_ubyte v20, v[4:5], off offset:12
; ALIGNED-NEXT:    global_load_ubyte v21, v[4:5], off offset:13
; ALIGNED-NEXT:    v_add_co_u32 v4, vcc_lo, v0, s4
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v5, vcc_lo, s5, v1, vcc_lo
; ALIGNED-NEXT:    s_add_u32 s4, s4, -16
; ALIGNED-NEXT:    s_addc_u32 s5, s5, -1
; ALIGNED-NEXT:    s_waitcnt vmcnt(15)
; ALIGNED-NEXT:    global_store_byte v[4:5], v6, off offset:2
; ALIGNED-NEXT:    s_waitcnt vmcnt(14)
; ALIGNED-NEXT:    global_store_byte v[4:5], v7, off offset:3
; ALIGNED-NEXT:    s_waitcnt vmcnt(13)
; ALIGNED-NEXT:    global_store_byte v[4:5], v8, off
; ALIGNED-NEXT:    s_waitcnt vmcnt(12)
; ALIGNED-NEXT:    global_store_byte v[4:5], v9, off offset:1
; ALIGNED-NEXT:    s_waitcnt vmcnt(11)
; ALIGNED-NEXT:    global_store_byte v[4:5], v10, off offset:6
; ALIGNED-NEXT:    s_waitcnt vmcnt(10)
; ALIGNED-NEXT:    global_store_byte v[4:5], v11, off offset:7
; ALIGNED-NEXT:    s_waitcnt vmcnt(9)
; ALIGNED-NEXT:    global_store_byte v[4:5], v12, off offset:4
; ALIGNED-NEXT:    s_waitcnt vmcnt(8)
; ALIGNED-NEXT:    global_store_byte v[4:5], v13, off offset:5
; ALIGNED-NEXT:    s_waitcnt vmcnt(7)
; ALIGNED-NEXT:    global_store_byte v[4:5], v14, off offset:10
; ALIGNED-NEXT:    s_waitcnt vmcnt(6)
; ALIGNED-NEXT:    global_store_byte v[4:5], v15, off offset:11
; ALIGNED-NEXT:    s_waitcnt vmcnt(5)
; ALIGNED-NEXT:    global_store_byte v[4:5], v16, off offset:8
; ALIGNED-NEXT:    s_waitcnt vmcnt(4)
; ALIGNED-NEXT:    global_store_byte v[4:5], v17, off offset:9
; ALIGNED-NEXT:    s_waitcnt vmcnt(3)
; ALIGNED-NEXT:    global_store_byte v[4:5], v18, off offset:14
; ALIGNED-NEXT:    s_waitcnt vmcnt(2)
; ALIGNED-NEXT:    global_store_byte v[4:5], v19, off offset:15
; ALIGNED-NEXT:    s_waitcnt vmcnt(1)
; ALIGNED-NEXT:    global_store_byte v[4:5], v20, off offset:12
; ALIGNED-NEXT:    s_waitcnt vmcnt(0)
; ALIGNED-NEXT:    global_store_byte v[4:5], v21, off offset:13
; ALIGNED-NEXT:    s_cmp_eq_u64 s[4:5], -16
; ALIGNED-NEXT:    s_cbranch_scc0 .LBB6_5
; ALIGNED-NEXT:  .LBB6_6: ; %Flow14
; ALIGNED-NEXT:    s_or_b32 exec_lo, exec_lo, s6
; ALIGNED-NEXT:    s_setpc_b64 s[30:31]
entry:
  tail call void @llvm.memmove.p1.p1.i64(ptr addrspace(1) noundef nonnull align 1 %dst, ptr addrspace(1) noundef nonnull align 1 %src, i64 2048, i1 false)
  ret void
}

define void @memmove_p0_p4_sz2048(ptr addrspace(0) align 1 %dst, ptr addrspace(4) align 1 readonly %src) {
; CHECK-LABEL: memmove_p0_p4_sz2048:
; CHECK:       ; %bb.0: ; %entry
; CHECK-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; CHECK-NEXT:    s_mov_b32 s4, exec_lo
; CHECK-NEXT:    v_cmpx_ge_u64_e64 v[2:3], v[0:1]
; CHECK-NEXT:    s_xor_b32 s6, exec_lo, s4
; CHECK-NEXT:    s_cbranch_execz .LBB7_3
; CHECK-NEXT:  ; %bb.1: ; %memmove_fwd_loop.preheader
; CHECK-NEXT:    s_mov_b64 s[4:5], 0
; CHECK-NEXT:  .LBB7_2: ; %memmove_fwd_loop
; CHECK-NEXT:    ; =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    v_add_co_u32 v96, vcc_lo, v2, s4
; CHECK-NEXT:    v_add_co_ci_u32_e32 v97, vcc_lo, s5, v3, vcc_lo
; CHECK-NEXT:    v_add_co_u32 v100, vcc_lo, v0, s4
; CHECK-NEXT:    v_add_co_ci_u32_e32 v101, vcc_lo, s5, v1, vcc_lo
; CHECK-NEXT:    s_clause 0xf
; CHECK-NEXT:    global_load_dwordx4 v[4:7], v[96:97], off offset:240
; CHECK-NEXT:    global_load_dwordx4 v[8:11], v[96:97], off offset:224
; CHECK-NEXT:    global_load_dwordx4 v[12:15], v[96:97], off offset:208
; CHECK-NEXT:    global_load_dwordx4 v[16:19], v[96:97], off offset:192
; CHECK-NEXT:    global_load_dwordx4 v[20:23], v[96:97], off offset:176
; CHECK-NEXT:    global_load_dwordx4 v[24:27], v[96:97], off offset:160
; CHECK-NEXT:    global_load_dwordx4 v[28:31], v[96:97], off offset:144
; CHECK-NEXT:    global_load_dwordx4 v[32:35], v[96:97], off offset:128
; CHECK-NEXT:    global_load_dwordx4 v[36:39], v[96:97], off offset:112
; CHECK-NEXT:    global_load_dwordx4 v[48:51], v[96:97], off offset:96
; CHECK-NEXT:    global_load_dwordx4 v[52:55], v[96:97], off offset:80
; CHECK-NEXT:    global_load_dwordx4 v[64:67], v[96:97], off offset:64
; CHECK-NEXT:    global_load_dwordx4 v[68:71], v[96:97], off offset:48
; CHECK-NEXT:    global_load_dwordx4 v[80:83], v[96:97], off offset:32
; CHECK-NEXT:    global_load_dwordx4 v[84:87], v[96:97], off offset:16
; CHECK-NEXT:    global_load_dwordx4 v[96:99], v[96:97], off
; CHECK-NEXT:    s_add_u32 s4, s4, 0x100
; CHECK-NEXT:    s_addc_u32 s5, s5, 0
; CHECK-NEXT:    s_waitcnt vmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[4:7] offset:240
; CHECK-NEXT:    s_waitcnt vmcnt(14)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[8:11] offset:224
; CHECK-NEXT:    s_waitcnt vmcnt(13)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[12:15] offset:208
; CHECK-NEXT:    s_waitcnt vmcnt(12)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[16:19] offset:192
; CHECK-NEXT:    s_waitcnt vmcnt(11)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[20:23] offset:176
; CHECK-NEXT:    s_waitcnt vmcnt(10)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[24:27] offset:160
; CHECK-NEXT:    s_waitcnt vmcnt(9)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[28:31] offset:144
; CHECK-NEXT:    s_waitcnt vmcnt(8)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[32:35] offset:128
; CHECK-NEXT:    s_waitcnt vmcnt(7)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[36:39] offset:112
; CHECK-NEXT:    s_waitcnt vmcnt(6)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[48:51] offset:96
; CHECK-NEXT:    s_waitcnt vmcnt(5)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[52:55] offset:80
; CHECK-NEXT:    s_waitcnt vmcnt(4)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[64:67] offset:64
; CHECK-NEXT:    s_waitcnt vmcnt(3)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[68:71] offset:48
; CHECK-NEXT:    s_waitcnt vmcnt(2)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[80:83] offset:32
; CHECK-NEXT:    s_waitcnt vmcnt(1)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[84:87] offset:16
; CHECK-NEXT:    s_waitcnt vmcnt(0)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[96:99]
; CHECK-NEXT:    s_cmp_lg_u64 s[4:5], 0x800
; CHECK-NEXT:    s_cbranch_scc1 .LBB7_2
; CHECK-NEXT:  .LBB7_3: ; %Flow9
; CHECK-NEXT:    s_andn2_saveexec_b32 s8, s6
; CHECK-NEXT:    s_cbranch_execz .LBB7_6
; CHECK-NEXT:  ; %bb.4: ; %memmove_bwd_loop.preheader
; CHECK-NEXT:    s_movk_i32 s6, 0xff00
; CHECK-NEXT:    s_mov_b64 s[4:5], 0x700
; CHECK-NEXT:    s_mov_b32 s7, -1
; CHECK-NEXT:  .LBB7_5: ; %memmove_bwd_loop
; CHECK-NEXT:    ; =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    v_add_co_u32 v96, vcc_lo, v2, s4
; CHECK-NEXT:    v_add_co_ci_u32_e32 v97, vcc_lo, s5, v3, vcc_lo
; CHECK-NEXT:    v_add_co_u32 v100, vcc_lo, v0, s4
; CHECK-NEXT:    v_add_co_ci_u32_e32 v101, vcc_lo, s5, v1, vcc_lo
; CHECK-NEXT:    s_clause 0xf
; CHECK-NEXT:    global_load_dwordx4 v[4:7], v[96:97], off offset:240
; CHECK-NEXT:    global_load_dwordx4 v[8:11], v[96:97], off offset:224
; CHECK-NEXT:    global_load_dwordx4 v[12:15], v[96:97], off offset:208
; CHECK-NEXT:    global_load_dwordx4 v[16:19], v[96:97], off offset:192
; CHECK-NEXT:    global_load_dwordx4 v[20:23], v[96:97], off offset:176
; CHECK-NEXT:    global_load_dwordx4 v[24:27], v[96:97], off offset:160
; CHECK-NEXT:    global_load_dwordx4 v[28:31], v[96:97], off offset:144
; CHECK-NEXT:    global_load_dwordx4 v[32:35], v[96:97], off offset:128
; CHECK-NEXT:    global_load_dwordx4 v[36:39], v[96:97], off offset:112
; CHECK-NEXT:    global_load_dwordx4 v[48:51], v[96:97], off offset:96
; CHECK-NEXT:    global_load_dwordx4 v[52:55], v[96:97], off offset:80
; CHECK-NEXT:    global_load_dwordx4 v[64:67], v[96:97], off offset:64
; CHECK-NEXT:    global_load_dwordx4 v[68:71], v[96:97], off offset:48
; CHECK-NEXT:    global_load_dwordx4 v[80:83], v[96:97], off offset:32
; CHECK-NEXT:    global_load_dwordx4 v[84:87], v[96:97], off offset:16
; CHECK-NEXT:    global_load_dwordx4 v[96:99], v[96:97], off
; CHECK-NEXT:    s_add_u32 s4, s4, 0xffffff00
; CHECK-NEXT:    s_addc_u32 s5, s5, -1
; CHECK-NEXT:    s_waitcnt vmcnt(15)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[4:7] offset:240
; CHECK-NEXT:    s_waitcnt vmcnt(14)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[8:11] offset:224
; CHECK-NEXT:    s_waitcnt vmcnt(13)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[12:15] offset:208
; CHECK-NEXT:    s_waitcnt vmcnt(12)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[16:19] offset:192
; CHECK-NEXT:    s_waitcnt vmcnt(11)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[20:23] offset:176
; CHECK-NEXT:    s_waitcnt vmcnt(10)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[24:27] offset:160
; CHECK-NEXT:    s_waitcnt vmcnt(9)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[28:31] offset:144
; CHECK-NEXT:    s_waitcnt vmcnt(8)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[32:35] offset:128
; CHECK-NEXT:    s_waitcnt vmcnt(7)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[36:39] offset:112
; CHECK-NEXT:    s_waitcnt vmcnt(6)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[48:51] offset:96
; CHECK-NEXT:    s_waitcnt vmcnt(5)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[52:55] offset:80
; CHECK-NEXT:    s_waitcnt vmcnt(4)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[64:67] offset:64
; CHECK-NEXT:    s_waitcnt vmcnt(3)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[68:71] offset:48
; CHECK-NEXT:    s_waitcnt vmcnt(2)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[80:83] offset:32
; CHECK-NEXT:    s_waitcnt vmcnt(1)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[84:87] offset:16
; CHECK-NEXT:    s_waitcnt vmcnt(0)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[96:99]
; CHECK-NEXT:    s_cmp_eq_u64 s[4:5], s[6:7]
; CHECK-NEXT:    s_cbranch_scc0 .LBB7_5
; CHECK-NEXT:  .LBB7_6: ; %Flow10
; CHECK-NEXT:    s_or_b32 exec_lo, exec_lo, s8
; CHECK-NEXT:    s_waitcnt lgkmcnt(0)
; CHECK-NEXT:    s_setpc_b64 s[30:31]
;
; ALIGNED-LABEL: memmove_p0_p4_sz2048:
; ALIGNED:       ; %bb.0: ; %entry
; ALIGNED-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; ALIGNED-NEXT:    s_mov_b32 s4, exec_lo
; ALIGNED-NEXT:    v_cmpx_ge_u64_e64 v[2:3], v[0:1]
; ALIGNED-NEXT:    s_xor_b32 s6, exec_lo, s4
; ALIGNED-NEXT:    s_cbranch_execz .LBB7_3
; ALIGNED-NEXT:  ; %bb.1: ; %memmove_fwd_loop.preheader
; ALIGNED-NEXT:    s_mov_b64 s[4:5], 0
; ALIGNED-NEXT:  .LBB7_2: ; %memmove_fwd_loop
; ALIGNED-NEXT:    ; =>This Inner Loop Header: Depth=1
; ALIGNED-NEXT:    v_add_co_u32 v4, vcc_lo, v2, s4
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v5, vcc_lo, s5, v3, vcc_lo
; ALIGNED-NEXT:    s_clause 0xf
; ALIGNED-NEXT:    global_load_ubyte v6, v[4:5], off offset:5
; ALIGNED-NEXT:    global_load_ubyte v7, v[4:5], off offset:6
; ALIGNED-NEXT:    global_load_ubyte v8, v[4:5], off offset:7
; ALIGNED-NEXT:    global_load_ubyte v9, v[4:5], off offset:3
; ALIGNED-NEXT:    global_load_ubyte v10, v[4:5], off offset:2
; ALIGNED-NEXT:    global_load_ubyte v11, v[4:5], off offset:1
; ALIGNED-NEXT:    global_load_ubyte v12, v[4:5], off
; ALIGNED-NEXT:    global_load_ubyte v13, v[4:5], off offset:4
; ALIGNED-NEXT:    global_load_ubyte v14, v[4:5], off offset:13
; ALIGNED-NEXT:    global_load_ubyte v15, v[4:5], off offset:14
; ALIGNED-NEXT:    global_load_ubyte v16, v[4:5], off offset:15
; ALIGNED-NEXT:    global_load_ubyte v17, v[4:5], off offset:11
; ALIGNED-NEXT:    global_load_ubyte v18, v[4:5], off offset:10
; ALIGNED-NEXT:    global_load_ubyte v19, v[4:5], off offset:9
; ALIGNED-NEXT:    global_load_ubyte v20, v[4:5], off offset:8
; ALIGNED-NEXT:    global_load_ubyte v21, v[4:5], off offset:12
; ALIGNED-NEXT:    v_add_co_u32 v4, vcc_lo, v0, s4
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v5, vcc_lo, s5, v1, vcc_lo
; ALIGNED-NEXT:    s_add_u32 s4, s4, 16
; ALIGNED-NEXT:    s_addc_u32 s5, s5, 0
; ALIGNED-NEXT:    s_waitcnt vmcnt(12)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v9 offset:3
; ALIGNED-NEXT:    s_waitcnt vmcnt(11)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v10 offset:2
; ALIGNED-NEXT:    s_waitcnt vmcnt(10)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v11 offset:1
; ALIGNED-NEXT:    s_waitcnt vmcnt(9)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v12
; ALIGNED-NEXT:    flat_store_byte v[4:5], v8 offset:7
; ALIGNED-NEXT:    flat_store_byte v[4:5], v7 offset:6
; ALIGNED-NEXT:    flat_store_byte v[4:5], v6 offset:5
; ALIGNED-NEXT:    s_waitcnt vmcnt(8)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v13 offset:4
; ALIGNED-NEXT:    s_waitcnt vmcnt(4)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v17 offset:11
; ALIGNED-NEXT:    s_waitcnt vmcnt(3)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v18 offset:10
; ALIGNED-NEXT:    s_waitcnt vmcnt(2)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v19 offset:9
; ALIGNED-NEXT:    s_waitcnt vmcnt(1)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v20 offset:8
; ALIGNED-NEXT:    flat_store_byte v[4:5], v16 offset:15
; ALIGNED-NEXT:    flat_store_byte v[4:5], v15 offset:14
; ALIGNED-NEXT:    flat_store_byte v[4:5], v14 offset:13
; ALIGNED-NEXT:    s_waitcnt vmcnt(0)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v21 offset:12
; ALIGNED-NEXT:    s_cmp_lg_u64 s[4:5], 0x800
; ALIGNED-NEXT:    s_cbranch_scc1 .LBB7_2
; ALIGNED-NEXT:  .LBB7_3: ; %Flow9
; ALIGNED-NEXT:    s_andn2_saveexec_b32 s6, s6
; ALIGNED-NEXT:    s_cbranch_execz .LBB7_6
; ALIGNED-NEXT:  ; %bb.4: ; %memmove_bwd_loop.preheader
; ALIGNED-NEXT:    s_mov_b64 s[4:5], 0x7f0
; ALIGNED-NEXT:  .LBB7_5: ; %memmove_bwd_loop
; ALIGNED-NEXT:    ; =>This Inner Loop Header: Depth=1
; ALIGNED-NEXT:    v_add_co_u32 v4, vcc_lo, v2, s4
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v5, vcc_lo, s5, v3, vcc_lo
; ALIGNED-NEXT:    s_clause 0xf
; ALIGNED-NEXT:    global_load_ubyte v6, v[4:5], off offset:5
; ALIGNED-NEXT:    global_load_ubyte v7, v[4:5], off offset:6
; ALIGNED-NEXT:    global_load_ubyte v8, v[4:5], off offset:7
; ALIGNED-NEXT:    global_load_ubyte v9, v[4:5], off offset:3
; ALIGNED-NEXT:    global_load_ubyte v10, v[4:5], off offset:2
; ALIGNED-NEXT:    global_load_ubyte v11, v[4:5], off offset:1
; ALIGNED-NEXT:    global_load_ubyte v12, v[4:5], off
; ALIGNED-NEXT:    global_load_ubyte v13, v[4:5], off offset:4
; ALIGNED-NEXT:    global_load_ubyte v14, v[4:5], off offset:13
; ALIGNED-NEXT:    global_load_ubyte v15, v[4:5], off offset:14
; ALIGNED-NEXT:    global_load_ubyte v16, v[4:5], off offset:15
; ALIGNED-NEXT:    global_load_ubyte v17, v[4:5], off offset:11
; ALIGNED-NEXT:    global_load_ubyte v18, v[4:5], off offset:10
; ALIGNED-NEXT:    global_load_ubyte v19, v[4:5], off offset:9
; ALIGNED-NEXT:    global_load_ubyte v20, v[4:5], off offset:8
; ALIGNED-NEXT:    global_load_ubyte v21, v[4:5], off offset:12
; ALIGNED-NEXT:    v_add_co_u32 v4, vcc_lo, v0, s4
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v5, vcc_lo, s5, v1, vcc_lo
; ALIGNED-NEXT:    s_add_u32 s4, s4, -16
; ALIGNED-NEXT:    s_addc_u32 s5, s5, -1
; ALIGNED-NEXT:    s_waitcnt vmcnt(12)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v9 offset:3
; ALIGNED-NEXT:    s_waitcnt vmcnt(11)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v10 offset:2
; ALIGNED-NEXT:    s_waitcnt vmcnt(10)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v11 offset:1
; ALIGNED-NEXT:    s_waitcnt vmcnt(9)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v12
; ALIGNED-NEXT:    flat_store_byte v[4:5], v8 offset:7
; ALIGNED-NEXT:    flat_store_byte v[4:5], v7 offset:6
; ALIGNED-NEXT:    flat_store_byte v[4:5], v6 offset:5
; ALIGNED-NEXT:    s_waitcnt vmcnt(8)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v13 offset:4
; ALIGNED-NEXT:    s_waitcnt vmcnt(4)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v17 offset:11
; ALIGNED-NEXT:    s_waitcnt vmcnt(3)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v18 offset:10
; ALIGNED-NEXT:    s_waitcnt vmcnt(2)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v19 offset:9
; ALIGNED-NEXT:    s_waitcnt vmcnt(1)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v20 offset:8
; ALIGNED-NEXT:    flat_store_byte v[4:5], v16 offset:15
; ALIGNED-NEXT:    flat_store_byte v[4:5], v15 offset:14
; ALIGNED-NEXT:    flat_store_byte v[4:5], v14 offset:13
; ALIGNED-NEXT:    s_waitcnt vmcnt(0)
; ALIGNED-NEXT:    flat_store_byte v[4:5], v21 offset:12
; ALIGNED-NEXT:    s_cmp_eq_u64 s[4:5], -16
; ALIGNED-NEXT:    s_cbranch_scc0 .LBB7_5
; ALIGNED-NEXT:  .LBB7_6: ; %Flow10
; ALIGNED-NEXT:    s_or_b32 exec_lo, exec_lo, s6
; ALIGNED-NEXT:    s_waitcnt lgkmcnt(0)
; ALIGNED-NEXT:    s_setpc_b64 s[30:31]
entry:
  tail call void @llvm.memmove.p0.p4.i64(ptr addrspace(0) noundef nonnull align 1 %dst, ptr addrspace(4) noundef nonnull align 1 %src, i64 2048, i1 false)
  ret void
}

define void @memmove_p5_p5_sz2048(ptr addrspace(5) align 1 %dst, ptr addrspace(5) align 1 readonly %src) {
; CHECK-LABEL: memmove_p5_p5_sz2048:
; CHECK:       ; %bb.0: ; %entry
; CHECK-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; CHECK-NEXT:    s_mov_b32 s4, exec_lo
; CHECK-NEXT:    v_cmpx_ge_u32_e64 v1, v0
; CHECK-NEXT:    s_xor_b32 s6, exec_lo, s4
; CHECK-NEXT:    s_cbranch_execz .LBB8_3
; CHECK-NEXT:  ; %bb.1: ; %memmove_fwd_loop.preheader
; CHECK-NEXT:    s_mov_b64 s[4:5], 8
; CHECK-NEXT:  .LBB8_2: ; %memmove_fwd_loop
; CHECK-NEXT:    ; =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    s_clause 0x3e
; CHECK-NEXT:    buffer_load_dword v2, v1, s[0:3], 0 offen offset:252
; CHECK-NEXT:    buffer_load_dword v3, v1, s[0:3], 0 offen offset:248
; CHECK-NEXT:    buffer_load_dword v4, v1, s[0:3], 0 offen offset:244
; CHECK-NEXT:    buffer_load_dword v5, v1, s[0:3], 0 offen offset:240
; CHECK-NEXT:    buffer_load_dword v6, v1, s[0:3], 0 offen offset:236
; CHECK-NEXT:    buffer_load_dword v7, v1, s[0:3], 0 offen offset:232
; CHECK-NEXT:    buffer_load_dword v8, v1, s[0:3], 0 offen offset:228
; CHECK-NEXT:    buffer_load_dword v9, v1, s[0:3], 0 offen offset:224
; CHECK-NEXT:    buffer_load_dword v10, v1, s[0:3], 0 offen offset:220
; CHECK-NEXT:    buffer_load_dword v11, v1, s[0:3], 0 offen offset:216
; CHECK-NEXT:    buffer_load_dword v12, v1, s[0:3], 0 offen offset:212
; CHECK-NEXT:    buffer_load_dword v13, v1, s[0:3], 0 offen offset:208
; CHECK-NEXT:    buffer_load_dword v14, v1, s[0:3], 0 offen offset:204
; CHECK-NEXT:    buffer_load_dword v15, v1, s[0:3], 0 offen offset:200
; CHECK-NEXT:    buffer_load_dword v16, v1, s[0:3], 0 offen offset:196
; CHECK-NEXT:    buffer_load_dword v17, v1, s[0:3], 0 offen offset:192
; CHECK-NEXT:    buffer_load_dword v18, v1, s[0:3], 0 offen offset:188
; CHECK-NEXT:    buffer_load_dword v19, v1, s[0:3], 0 offen offset:184
; CHECK-NEXT:    buffer_load_dword v20, v1, s[0:3], 0 offen offset:180
; CHECK-NEXT:    buffer_load_dword v21, v1, s[0:3], 0 offen offset:176
; CHECK-NEXT:    buffer_load_dword v22, v1, s[0:3], 0 offen offset:172
; CHECK-NEXT:    buffer_load_dword v23, v1, s[0:3], 0 offen offset:168
; CHECK-NEXT:    buffer_load_dword v24, v1, s[0:3], 0 offen offset:164
; CHECK-NEXT:    buffer_load_dword v25, v1, s[0:3], 0 offen offset:160
; CHECK-NEXT:    buffer_load_dword v26, v1, s[0:3], 0 offen offset:156
; CHECK-NEXT:    buffer_load_dword v27, v1, s[0:3], 0 offen offset:152
; CHECK-NEXT:    buffer_load_dword v28, v1, s[0:3], 0 offen offset:148
; CHECK-NEXT:    buffer_load_dword v29, v1, s[0:3], 0 offen offset:144
; CHECK-NEXT:    buffer_load_dword v30, v1, s[0:3], 0 offen offset:140
; CHECK-NEXT:    buffer_load_dword v31, v1, s[0:3], 0 offen offset:136
; CHECK-NEXT:    buffer_load_dword v32, v1, s[0:3], 0 offen offset:132
; CHECK-NEXT:    buffer_load_dword v33, v1, s[0:3], 0 offen offset:128
; CHECK-NEXT:    buffer_load_dword v34, v1, s[0:3], 0 offen offset:124
; CHECK-NEXT:    buffer_load_dword v35, v1, s[0:3], 0 offen offset:120
; CHECK-NEXT:    buffer_load_dword v36, v1, s[0:3], 0 offen offset:116
; CHECK-NEXT:    buffer_load_dword v37, v1, s[0:3], 0 offen offset:112
; CHECK-NEXT:    buffer_load_dword v38, v1, s[0:3], 0 offen offset:108
; CHECK-NEXT:    buffer_load_dword v39, v1, s[0:3], 0 offen offset:104
; CHECK-NEXT:    buffer_load_dword v48, v1, s[0:3], 0 offen offset:100
; CHECK-NEXT:    buffer_load_dword v49, v1, s[0:3], 0 offen offset:96
; CHECK-NEXT:    buffer_load_dword v50, v1, s[0:3], 0 offen offset:92
; CHECK-NEXT:    buffer_load_dword v51, v1, s[0:3], 0 offen offset:88
; CHECK-NEXT:    buffer_load_dword v52, v1, s[0:3], 0 offen offset:84
; CHECK-NEXT:    buffer_load_dword v53, v1, s[0:3], 0 offen offset:80
; CHECK-NEXT:    buffer_load_dword v54, v1, s[0:3], 0 offen offset:76
; CHECK-NEXT:    buffer_load_dword v55, v1, s[0:3], 0 offen offset:72
; CHECK-NEXT:    buffer_load_dword v64, v1, s[0:3], 0 offen offset:68
; CHECK-NEXT:    buffer_load_dword v65, v1, s[0:3], 0 offen offset:64
; CHECK-NEXT:    buffer_load_dword v66, v1, s[0:3], 0 offen offset:60
; CHECK-NEXT:    buffer_load_dword v67, v1, s[0:3], 0 offen offset:56
; CHECK-NEXT:    buffer_load_dword v68, v1, s[0:3], 0 offen offset:52
; CHECK-NEXT:    buffer_load_dword v69, v1, s[0:3], 0 offen offset:48
; CHECK-NEXT:    buffer_load_dword v70, v1, s[0:3], 0 offen offset:44
; CHECK-NEXT:    buffer_load_dword v71, v1, s[0:3], 0 offen offset:40
; CHECK-NEXT:    buffer_load_dword v80, v1, s[0:3], 0 offen offset:36
; CHECK-NEXT:    buffer_load_dword v81, v1, s[0:3], 0 offen offset:32
; CHECK-NEXT:    buffer_load_dword v82, v1, s[0:3], 0 offen offset:28
; CHECK-NEXT:    buffer_load_dword v83, v1, s[0:3], 0 offen offset:24
; CHECK-NEXT:    buffer_load_dword v84, v1, s[0:3], 0 offen offset:20
; CHECK-NEXT:    buffer_load_dword v85, v1, s[0:3], 0 offen offset:16
; CHECK-NEXT:    buffer_load_dword v86, v1, s[0:3], 0 offen offset:12
; CHECK-NEXT:    buffer_load_dword v87, v1, s[0:3], 0 offen offset:8
; CHECK-NEXT:    buffer_load_dword v96, v1, s[0:3], 0 offen offset:4
; CHECK-NEXT:    buffer_load_dword v97, v1, s[0:3], 0 offen
; CHECK-NEXT:    v_add_nc_u32_e32 v1, 0x100, v1
; CHECK-NEXT:    s_add_u32 s4, s4, -1
; CHECK-NEXT:    s_addc_u32 s5, s5, -1
; CHECK-NEXT:    s_waitcnt vmcnt(62)
; CHECK-NEXT:    buffer_store_dword v2, v0, s[0:3], 0 offen offset:252
; CHECK-NEXT:    buffer_store_dword v3, v0, s[0:3], 0 offen offset:248
; CHECK-NEXT:    s_waitcnt vmcnt(61)
; CHECK-NEXT:    buffer_store_dword v4, v0, s[0:3], 0 offen offset:244
; CHECK-NEXT:    s_waitcnt vmcnt(60)
; CHECK-NEXT:    buffer_store_dword v5, v0, s[0:3], 0 offen offset:240
; CHECK-NEXT:    s_waitcnt vmcnt(59)
; CHECK-NEXT:    buffer_store_dword v6, v0, s[0:3], 0 offen offset:236
; CHECK-NEXT:    s_waitcnt vmcnt(58)
; CHECK-NEXT:    buffer_store_dword v7, v0, s[0:3], 0 offen offset:232
; CHECK-NEXT:    s_waitcnt vmcnt(57)
; CHECK-NEXT:    buffer_store_dword v8, v0, s[0:3], 0 offen offset:228
; CHECK-NEXT:    s_waitcnt vmcnt(56)
; CHECK-NEXT:    buffer_store_dword v9, v0, s[0:3], 0 offen offset:224
; CHECK-NEXT:    s_waitcnt vmcnt(55)
; CHECK-NEXT:    buffer_store_dword v10, v0, s[0:3], 0 offen offset:220
; CHECK-NEXT:    s_waitcnt vmcnt(54)
; CHECK-NEXT:    buffer_store_dword v11, v0, s[0:3], 0 offen offset:216
; CHECK-NEXT:    s_waitcnt vmcnt(53)
; CHECK-NEXT:    buffer_store_dword v12, v0, s[0:3], 0 offen offset:212
; CHECK-NEXT:    s_waitcnt vmcnt(52)
; CHECK-NEXT:    buffer_store_dword v13, v0, s[0:3], 0 offen offset:208
; CHECK-NEXT:    s_waitcnt vmcnt(51)
; CHECK-NEXT:    buffer_store_dword v14, v0, s[0:3], 0 offen offset:204
; CHECK-NEXT:    s_waitcnt vmcnt(50)
; CHECK-NEXT:    buffer_store_dword v15, v0, s[0:3], 0 offen offset:200
; CHECK-NEXT:    s_waitcnt vmcnt(49)
; CHECK-NEXT:    buffer_store_dword v16, v0, s[0:3], 0 offen offset:196
; CHECK-NEXT:    s_waitcnt vmcnt(48)
; CHECK-NEXT:    buffer_store_dword v17, v0, s[0:3], 0 offen offset:192
; CHECK-NEXT:    s_waitcnt vmcnt(47)
; CHECK-NEXT:    buffer_store_dword v18, v0, s[0:3], 0 offen offset:188
; CHECK-NEXT:    s_waitcnt vmcnt(46)
; CHECK-NEXT:    buffer_store_dword v19, v0, s[0:3], 0 offen offset:184
; CHECK-NEXT:    s_waitcnt vmcnt(45)
; CHECK-NEXT:    buffer_store_dword v20, v0, s[0:3], 0 offen offset:180
; CHECK-NEXT:    s_waitcnt vmcnt(44)
; CHECK-NEXT:    buffer_store_dword v21, v0, s[0:3], 0 offen offset:176
; CHECK-NEXT:    s_waitcnt vmcnt(43)
; CHECK-NEXT:    buffer_store_dword v22, v0, s[0:3], 0 offen offset:172
; CHECK-NEXT:    s_waitcnt vmcnt(42)
; CHECK-NEXT:    buffer_store_dword v23, v0, s[0:3], 0 offen offset:168
; CHECK-NEXT:    s_waitcnt vmcnt(41)
; CHECK-NEXT:    buffer_store_dword v24, v0, s[0:3], 0 offen offset:164
; CHECK-NEXT:    s_waitcnt vmcnt(40)
; CHECK-NEXT:    buffer_store_dword v25, v0, s[0:3], 0 offen offset:160
; CHECK-NEXT:    s_waitcnt vmcnt(39)
; CHECK-NEXT:    buffer_store_dword v26, v0, s[0:3], 0 offen offset:156
; CHECK-NEXT:    s_waitcnt vmcnt(38)
; CHECK-NEXT:    buffer_store_dword v27, v0, s[0:3], 0 offen offset:152
; CHECK-NEXT:    s_waitcnt vmcnt(37)
; CHECK-NEXT:    buffer_store_dword v28, v0, s[0:3], 0 offen offset:148
; CHECK-NEXT:    s_waitcnt vmcnt(36)
; CHECK-NEXT:    buffer_store_dword v29, v0, s[0:3], 0 offen offset:144
; CHECK-NEXT:    s_waitcnt vmcnt(35)
; CHECK-NEXT:    buffer_store_dword v30, v0, s[0:3], 0 offen offset:140
; CHECK-NEXT:    s_waitcnt vmcnt(34)
; CHECK-NEXT:    buffer_store_dword v31, v0, s[0:3], 0 offen offset:136
; CHECK-NEXT:    s_waitcnt vmcnt(33)
; CHECK-NEXT:    buffer_store_dword v32, v0, s[0:3], 0 offen offset:132
; CHECK-NEXT:    s_waitcnt vmcnt(32)
; CHECK-NEXT:    buffer_store_dword v33, v0, s[0:3], 0 offen offset:128
; CHECK-NEXT:    s_waitcnt vmcnt(31)
; CHECK-NEXT:    buffer_store_dword v34, v0, s[0:3], 0 offen offset:124
; CHECK-NEXT:    s_waitcnt vmcnt(30)
; CHECK-NEXT:    buffer_store_dword v35, v0, s[0:3], 0 offen offset:120
; CHECK-NEXT:    s_waitcnt vmcnt(29)
; CHECK-NEXT:    buffer_store_dword v36, v0, s[0:3], 0 offen offset:116
; CHECK-NEXT:    s_waitcnt vmcnt(28)
; CHECK-NEXT:    buffer_store_dword v37, v0, s[0:3], 0 offen offset:112
; CHECK-NEXT:    s_waitcnt vmcnt(27)
; CHECK-NEXT:    buffer_store_dword v38, v0, s[0:3], 0 offen offset:108
; CHECK-NEXT:    s_waitcnt vmcnt(26)
; CHECK-NEXT:    buffer_store_dword v39, v0, s[0:3], 0 offen offset:104
; CHECK-NEXT:    s_waitcnt vmcnt(25)
; CHECK-NEXT:    buffer_store_dword v48, v0, s[0:3], 0 offen offset:100
; CHECK-NEXT:    s_waitcnt vmcnt(24)
; CHECK-NEXT:    buffer_store_dword v49, v0, s[0:3], 0 offen offset:96
; CHECK-NEXT:    s_waitcnt vmcnt(23)
; CHECK-NEXT:    buffer_store_dword v50, v0, s[0:3], 0 offen offset:92
; CHECK-NEXT:    s_waitcnt vmcnt(22)
; CHECK-NEXT:    buffer_store_dword v51, v0, s[0:3], 0 offen offset:88
; CHECK-NEXT:    s_waitcnt vmcnt(21)
; CHECK-NEXT:    buffer_store_dword v52, v0, s[0:3], 0 offen offset:84
; CHECK-NEXT:    s_waitcnt vmcnt(20)
; CHECK-NEXT:    buffer_store_dword v53, v0, s[0:3], 0 offen offset:80
; CHECK-NEXT:    s_waitcnt vmcnt(19)
; CHECK-NEXT:    buffer_store_dword v54, v0, s[0:3], 0 offen offset:76
; CHECK-NEXT:    s_waitcnt vmcnt(18)
; CHECK-NEXT:    buffer_store_dword v55, v0, s[0:3], 0 offen offset:72
; CHECK-NEXT:    s_waitcnt vmcnt(17)
; CHECK-NEXT:    buffer_store_dword v64, v0, s[0:3], 0 offen offset:68
; CHECK-NEXT:    s_waitcnt vmcnt(16)
; CHECK-NEXT:    buffer_store_dword v65, v0, s[0:3], 0 offen offset:64
; CHECK-NEXT:    s_waitcnt vmcnt(15)
; CHECK-NEXT:    buffer_store_dword v66, v0, s[0:3], 0 offen offset:60
; CHECK-NEXT:    s_waitcnt vmcnt(14)
; CHECK-NEXT:    buffer_store_dword v67, v0, s[0:3], 0 offen offset:56
; CHECK-NEXT:    s_waitcnt vmcnt(13)
; CHECK-NEXT:    buffer_store_dword v68, v0, s[0:3], 0 offen offset:52
; CHECK-NEXT:    s_waitcnt vmcnt(12)
; CHECK-NEXT:    buffer_store_dword v69, v0, s[0:3], 0 offen offset:48
; CHECK-NEXT:    s_waitcnt vmcnt(11)
; CHECK-NEXT:    buffer_store_dword v70, v0, s[0:3], 0 offen offset:44
; CHECK-NEXT:    s_waitcnt vmcnt(10)
; CHECK-NEXT:    buffer_store_dword v71, v0, s[0:3], 0 offen offset:40
; CHECK-NEXT:    s_waitcnt vmcnt(9)
; CHECK-NEXT:    buffer_store_dword v80, v0, s[0:3], 0 offen offset:36
; CHECK-NEXT:    s_waitcnt vmcnt(8)
; CHECK-NEXT:    buffer_store_dword v81, v0, s[0:3], 0 offen offset:32
; CHECK-NEXT:    s_waitcnt vmcnt(7)
; CHECK-NEXT:    buffer_store_dword v82, v0, s[0:3], 0 offen offset:28
; CHECK-NEXT:    s_waitcnt vmcnt(6)
; CHECK-NEXT:    buffer_store_dword v83, v0, s[0:3], 0 offen offset:24
; CHECK-NEXT:    s_waitcnt vmcnt(5)
; CHECK-NEXT:    buffer_store_dword v84, v0, s[0:3], 0 offen offset:20
; CHECK-NEXT:    s_waitcnt vmcnt(4)
; CHECK-NEXT:    buffer_store_dword v85, v0, s[0:3], 0 offen offset:16
; CHECK-NEXT:    s_waitcnt vmcnt(3)
; CHECK-NEXT:    buffer_store_dword v86, v0, s[0:3], 0 offen offset:12
; CHECK-NEXT:    s_waitcnt vmcnt(2)
; CHECK-NEXT:    buffer_store_dword v87, v0, s[0:3], 0 offen offset:8
; CHECK-NEXT:    s_waitcnt vmcnt(1)
; CHECK-NEXT:    buffer_store_dword v96, v0, s[0:3], 0 offen offset:4
; CHECK-NEXT:    s_waitcnt vmcnt(0)
; CHECK-NEXT:    buffer_store_dword v97, v0, s[0:3], 0 offen
; CHECK-NEXT:    v_add_nc_u32_e32 v0, 0x100, v0
; CHECK-NEXT:    s_cmp_lg_u64 s[4:5], 0
; CHECK-NEXT:    s_cbranch_scc1 .LBB8_2
; CHECK-NEXT:  .LBB8_3: ; %Flow18
; CHECK-NEXT:    s_andn2_saveexec_b32 s6, s6
; CHECK-NEXT:    s_cbranch_execz .LBB8_6
; CHECK-NEXT:  ; %bb.4: ; %memmove_bwd_loop.preheader
; CHECK-NEXT:    v_add_nc_u32_e32 v0, 0x700, v0
; CHECK-NEXT:    v_add_nc_u32_e32 v1, 0x700, v1
; CHECK-NEXT:    s_mov_b64 s[4:5], -8
; CHECK-NEXT:  .LBB8_5: ; %memmove_bwd_loop
; CHECK-NEXT:    ; =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    s_clause 0x3e
; CHECK-NEXT:    buffer_load_dword v2, v1, s[0:3], 0 offen offset:252
; CHECK-NEXT:    buffer_load_dword v3, v1, s[0:3], 0 offen offset:248
; CHECK-NEXT:    buffer_load_dword v4, v1, s[0:3], 0 offen offset:244
; CHECK-NEXT:    buffer_load_dword v5, v1, s[0:3], 0 offen offset:240
; CHECK-NEXT:    buffer_load_dword v6, v1, s[0:3], 0 offen offset:236
; CHECK-NEXT:    buffer_load_dword v7, v1, s[0:3], 0 offen offset:232
; CHECK-NEXT:    buffer_load_dword v8, v1, s[0:3], 0 offen offset:228
; CHECK-NEXT:    buffer_load_dword v9, v1, s[0:3], 0 offen offset:224
; CHECK-NEXT:    buffer_load_dword v10, v1, s[0:3], 0 offen offset:220
; CHECK-NEXT:    buffer_load_dword v11, v1, s[0:3], 0 offen offset:216
; CHECK-NEXT:    buffer_load_dword v12, v1, s[0:3], 0 offen offset:212
; CHECK-NEXT:    buffer_load_dword v13, v1, s[0:3], 0 offen offset:208
; CHECK-NEXT:    buffer_load_dword v14, v1, s[0:3], 0 offen offset:204
; CHECK-NEXT:    buffer_load_dword v15, v1, s[0:3], 0 offen offset:200
; CHECK-NEXT:    buffer_load_dword v16, v1, s[0:3], 0 offen offset:196
; CHECK-NEXT:    buffer_load_dword v17, v1, s[0:3], 0 offen offset:192
; CHECK-NEXT:    buffer_load_dword v18, v1, s[0:3], 0 offen offset:188
; CHECK-NEXT:    buffer_load_dword v19, v1, s[0:3], 0 offen offset:184
; CHECK-NEXT:    buffer_load_dword v20, v1, s[0:3], 0 offen offset:180
; CHECK-NEXT:    buffer_load_dword v21, v1, s[0:3], 0 offen offset:176
; CHECK-NEXT:    buffer_load_dword v22, v1, s[0:3], 0 offen offset:172
; CHECK-NEXT:    buffer_load_dword v23, v1, s[0:3], 0 offen offset:168
; CHECK-NEXT:    buffer_load_dword v24, v1, s[0:3], 0 offen offset:164
; CHECK-NEXT:    buffer_load_dword v25, v1, s[0:3], 0 offen offset:160
; CHECK-NEXT:    buffer_load_dword v26, v1, s[0:3], 0 offen offset:156
; CHECK-NEXT:    buffer_load_dword v27, v1, s[0:3], 0 offen offset:152
; CHECK-NEXT:    buffer_load_dword v28, v1, s[0:3], 0 offen offset:148
; CHECK-NEXT:    buffer_load_dword v29, v1, s[0:3], 0 offen offset:144
; CHECK-NEXT:    buffer_load_dword v30, v1, s[0:3], 0 offen offset:140
; CHECK-NEXT:    buffer_load_dword v31, v1, s[0:3], 0 offen offset:136
; CHECK-NEXT:    buffer_load_dword v32, v1, s[0:3], 0 offen offset:132
; CHECK-NEXT:    buffer_load_dword v33, v1, s[0:3], 0 offen offset:128
; CHECK-NEXT:    buffer_load_dword v34, v1, s[0:3], 0 offen offset:124
; CHECK-NEXT:    buffer_load_dword v35, v1, s[0:3], 0 offen offset:120
; CHECK-NEXT:    buffer_load_dword v36, v1, s[0:3], 0 offen offset:116
; CHECK-NEXT:    buffer_load_dword v37, v1, s[0:3], 0 offen offset:112
; CHECK-NEXT:    buffer_load_dword v38, v1, s[0:3], 0 offen offset:108
; CHECK-NEXT:    buffer_load_dword v39, v1, s[0:3], 0 offen offset:104
; CHECK-NEXT:    buffer_load_dword v48, v1, s[0:3], 0 offen offset:100
; CHECK-NEXT:    buffer_load_dword v49, v1, s[0:3], 0 offen offset:96
; CHECK-NEXT:    buffer_load_dword v50, v1, s[0:3], 0 offen offset:92
; CHECK-NEXT:    buffer_load_dword v51, v1, s[0:3], 0 offen offset:88
; CHECK-NEXT:    buffer_load_dword v52, v1, s[0:3], 0 offen offset:84
; CHECK-NEXT:    buffer_load_dword v53, v1, s[0:3], 0 offen offset:80
; CHECK-NEXT:    buffer_load_dword v54, v1, s[0:3], 0 offen offset:76
; CHECK-NEXT:    buffer_load_dword v55, v1, s[0:3], 0 offen offset:72
; CHECK-NEXT:    buffer_load_dword v64, v1, s[0:3], 0 offen offset:68
; CHECK-NEXT:    buffer_load_dword v65, v1, s[0:3], 0 offen offset:64
; CHECK-NEXT:    buffer_load_dword v66, v1, s[0:3], 0 offen offset:60
; CHECK-NEXT:    buffer_load_dword v67, v1, s[0:3], 0 offen offset:56
; CHECK-NEXT:    buffer_load_dword v68, v1, s[0:3], 0 offen offset:52
; CHECK-NEXT:    buffer_load_dword v69, v1, s[0:3], 0 offen offset:48
; CHECK-NEXT:    buffer_load_dword v70, v1, s[0:3], 0 offen offset:44
; CHECK-NEXT:    buffer_load_dword v71, v1, s[0:3], 0 offen offset:40
; CHECK-NEXT:    buffer_load_dword v80, v1, s[0:3], 0 offen offset:36
; CHECK-NEXT:    buffer_load_dword v81, v1, s[0:3], 0 offen offset:32
; CHECK-NEXT:    buffer_load_dword v82, v1, s[0:3], 0 offen offset:28
; CHECK-NEXT:    buffer_load_dword v83, v1, s[0:3], 0 offen offset:24
; CHECK-NEXT:    buffer_load_dword v84, v1, s[0:3], 0 offen offset:20
; CHECK-NEXT:    buffer_load_dword v85, v1, s[0:3], 0 offen offset:16
; CHECK-NEXT:    buffer_load_dword v86, v1, s[0:3], 0 offen offset:12
; CHECK-NEXT:    buffer_load_dword v87, v1, s[0:3], 0 offen offset:8
; CHECK-NEXT:    buffer_load_dword v96, v1, s[0:3], 0 offen offset:4
; CHECK-NEXT:    buffer_load_dword v97, v1, s[0:3], 0 offen
; CHECK-NEXT:    v_add_nc_u32_e32 v1, 0xffffff00, v1
; CHECK-NEXT:    s_add_u32 s4, s4, 1
; CHECK-NEXT:    s_addc_u32 s5, s5, 0
; CHECK-NEXT:    s_waitcnt vmcnt(62)
; CHECK-NEXT:    buffer_store_dword v2, v0, s[0:3], 0 offen offset:252
; CHECK-NEXT:    buffer_store_dword v3, v0, s[0:3], 0 offen offset:248
; CHECK-NEXT:    s_waitcnt vmcnt(61)
; CHECK-NEXT:    buffer_store_dword v4, v0, s[0:3], 0 offen offset:244
; CHECK-NEXT:    s_waitcnt vmcnt(60)
; CHECK-NEXT:    buffer_store_dword v5, v0, s[0:3], 0 offen offset:240
; CHECK-NEXT:    s_waitcnt vmcnt(59)
; CHECK-NEXT:    buffer_store_dword v6, v0, s[0:3], 0 offen offset:236
; CHECK-NEXT:    s_waitcnt vmcnt(58)
; CHECK-NEXT:    buffer_store_dword v7, v0, s[0:3], 0 offen offset:232
; CHECK-NEXT:    s_waitcnt vmcnt(57)
; CHECK-NEXT:    buffer_store_dword v8, v0, s[0:3], 0 offen offset:228
; CHECK-NEXT:    s_waitcnt vmcnt(56)
; CHECK-NEXT:    buffer_store_dword v9, v0, s[0:3], 0 offen offset:224
; CHECK-NEXT:    s_waitcnt vmcnt(55)
; CHECK-NEXT:    buffer_store_dword v10, v0, s[0:3], 0 offen offset:220
; CHECK-NEXT:    s_waitcnt vmcnt(54)
; CHECK-NEXT:    buffer_store_dword v11, v0, s[0:3], 0 offen offset:216
; CHECK-NEXT:    s_waitcnt vmcnt(53)
; CHECK-NEXT:    buffer_store_dword v12, v0, s[0:3], 0 offen offset:212
; CHECK-NEXT:    s_waitcnt vmcnt(52)
; CHECK-NEXT:    buffer_store_dword v13, v0, s[0:3], 0 offen offset:208
; CHECK-NEXT:    s_waitcnt vmcnt(51)
; CHECK-NEXT:    buffer_store_dword v14, v0, s[0:3], 0 offen offset:204
; CHECK-NEXT:    s_waitcnt vmcnt(50)
; CHECK-NEXT:    buffer_store_dword v15, v0, s[0:3], 0 offen offset:200
; CHECK-NEXT:    s_waitcnt vmcnt(49)
; CHECK-NEXT:    buffer_store_dword v16, v0, s[0:3], 0 offen offset:196
; CHECK-NEXT:    s_waitcnt vmcnt(48)
; CHECK-NEXT:    buffer_store_dword v17, v0, s[0:3], 0 offen offset:192
; CHECK-NEXT:    s_waitcnt vmcnt(47)
; CHECK-NEXT:    buffer_store_dword v18, v0, s[0:3], 0 offen offset:188
; CHECK-NEXT:    s_waitcnt vmcnt(46)
; CHECK-NEXT:    buffer_store_dword v19, v0, s[0:3], 0 offen offset:184
; CHECK-NEXT:    s_waitcnt vmcnt(45)
; CHECK-NEXT:    buffer_store_dword v20, v0, s[0:3], 0 offen offset:180
; CHECK-NEXT:    s_waitcnt vmcnt(44)
; CHECK-NEXT:    buffer_store_dword v21, v0, s[0:3], 0 offen offset:176
; CHECK-NEXT:    s_waitcnt vmcnt(43)
; CHECK-NEXT:    buffer_store_dword v22, v0, s[0:3], 0 offen offset:172
; CHECK-NEXT:    s_waitcnt vmcnt(42)
; CHECK-NEXT:    buffer_store_dword v23, v0, s[0:3], 0 offen offset:168
; CHECK-NEXT:    s_waitcnt vmcnt(41)
; CHECK-NEXT:    buffer_store_dword v24, v0, s[0:3], 0 offen offset:164
; CHECK-NEXT:    s_waitcnt vmcnt(40)
; CHECK-NEXT:    buffer_store_dword v25, v0, s[0:3], 0 offen offset:160
; CHECK-NEXT:    s_waitcnt vmcnt(39)
; CHECK-NEXT:    buffer_store_dword v26, v0, s[0:3], 0 offen offset:156
; CHECK-NEXT:    s_waitcnt vmcnt(38)
; CHECK-NEXT:    buffer_store_dword v27, v0, s[0:3], 0 offen offset:152
; CHECK-NEXT:    s_waitcnt vmcnt(37)
; CHECK-NEXT:    buffer_store_dword v28, v0, s[0:3], 0 offen offset:148
; CHECK-NEXT:    s_waitcnt vmcnt(36)
; CHECK-NEXT:    buffer_store_dword v29, v0, s[0:3], 0 offen offset:144
; CHECK-NEXT:    s_waitcnt vmcnt(35)
; CHECK-NEXT:    buffer_store_dword v30, v0, s[0:3], 0 offen offset:140
; CHECK-NEXT:    s_waitcnt vmcnt(34)
; CHECK-NEXT:    buffer_store_dword v31, v0, s[0:3], 0 offen offset:136
; CHECK-NEXT:    s_waitcnt vmcnt(33)
; CHECK-NEXT:    buffer_store_dword v32, v0, s[0:3], 0 offen offset:132
; CHECK-NEXT:    s_waitcnt vmcnt(32)
; CHECK-NEXT:    buffer_store_dword v33, v0, s[0:3], 0 offen offset:128
; CHECK-NEXT:    s_waitcnt vmcnt(31)
; CHECK-NEXT:    buffer_store_dword v34, v0, s[0:3], 0 offen offset:124
; CHECK-NEXT:    s_waitcnt vmcnt(30)
; CHECK-NEXT:    buffer_store_dword v35, v0, s[0:3], 0 offen offset:120
; CHECK-NEXT:    s_waitcnt vmcnt(29)
; CHECK-NEXT:    buffer_store_dword v36, v0, s[0:3], 0 offen offset:116
; CHECK-NEXT:    s_waitcnt vmcnt(28)
; CHECK-NEXT:    buffer_store_dword v37, v0, s[0:3], 0 offen offset:112
; CHECK-NEXT:    s_waitcnt vmcnt(27)
; CHECK-NEXT:    buffer_store_dword v38, v0, s[0:3], 0 offen offset:108
; CHECK-NEXT:    s_waitcnt vmcnt(26)
; CHECK-NEXT:    buffer_store_dword v39, v0, s[0:3], 0 offen offset:104
; CHECK-NEXT:    s_waitcnt vmcnt(25)
; CHECK-NEXT:    buffer_store_dword v48, v0, s[0:3], 0 offen offset:100
; CHECK-NEXT:    s_waitcnt vmcnt(24)
; CHECK-NEXT:    buffer_store_dword v49, v0, s[0:3], 0 offen offset:96
; CHECK-NEXT:    s_waitcnt vmcnt(23)
; CHECK-NEXT:    buffer_store_dword v50, v0, s[0:3], 0 offen offset:92
; CHECK-NEXT:    s_waitcnt vmcnt(22)
; CHECK-NEXT:    buffer_store_dword v51, v0, s[0:3], 0 offen offset:88
; CHECK-NEXT:    s_waitcnt vmcnt(21)
; CHECK-NEXT:    buffer_store_dword v52, v0, s[0:3], 0 offen offset:84
; CHECK-NEXT:    s_waitcnt vmcnt(20)
; CHECK-NEXT:    buffer_store_dword v53, v0, s[0:3], 0 offen offset:80
; CHECK-NEXT:    s_waitcnt vmcnt(19)
; CHECK-NEXT:    buffer_store_dword v54, v0, s[0:3], 0 offen offset:76
; CHECK-NEXT:    s_waitcnt vmcnt(18)
; CHECK-NEXT:    buffer_store_dword v55, v0, s[0:3], 0 offen offset:72
; CHECK-NEXT:    s_waitcnt vmcnt(17)
; CHECK-NEXT:    buffer_store_dword v64, v0, s[0:3], 0 offen offset:68
; CHECK-NEXT:    s_waitcnt vmcnt(16)
; CHECK-NEXT:    buffer_store_dword v65, v0, s[0:3], 0 offen offset:64
; CHECK-NEXT:    s_waitcnt vmcnt(15)
; CHECK-NEXT:    buffer_store_dword v66, v0, s[0:3], 0 offen offset:60
; CHECK-NEXT:    s_waitcnt vmcnt(14)
; CHECK-NEXT:    buffer_store_dword v67, v0, s[0:3], 0 offen offset:56
; CHECK-NEXT:    s_waitcnt vmcnt(13)
; CHECK-NEXT:    buffer_store_dword v68, v0, s[0:3], 0 offen offset:52
; CHECK-NEXT:    s_waitcnt vmcnt(12)
; CHECK-NEXT:    buffer_store_dword v69, v0, s[0:3], 0 offen offset:48
; CHECK-NEXT:    s_waitcnt vmcnt(11)
; CHECK-NEXT:    buffer_store_dword v70, v0, s[0:3], 0 offen offset:44
; CHECK-NEXT:    s_waitcnt vmcnt(10)
; CHECK-NEXT:    buffer_store_dword v71, v0, s[0:3], 0 offen offset:40
; CHECK-NEXT:    s_waitcnt vmcnt(9)
; CHECK-NEXT:    buffer_store_dword v80, v0, s[0:3], 0 offen offset:36
; CHECK-NEXT:    s_waitcnt vmcnt(8)
; CHECK-NEXT:    buffer_store_dword v81, v0, s[0:3], 0 offen offset:32
; CHECK-NEXT:    s_waitcnt vmcnt(7)
; CHECK-NEXT:    buffer_store_dword v82, v0, s[0:3], 0 offen offset:28
; CHECK-NEXT:    s_waitcnt vmcnt(6)
; CHECK-NEXT:    buffer_store_dword v83, v0, s[0:3], 0 offen offset:24
; CHECK-NEXT:    s_waitcnt vmcnt(5)
; CHECK-NEXT:    buffer_store_dword v84, v0, s[0:3], 0 offen offset:20
; CHECK-NEXT:    s_waitcnt vmcnt(4)
; CHECK-NEXT:    buffer_store_dword v85, v0, s[0:3], 0 offen offset:16
; CHECK-NEXT:    s_waitcnt vmcnt(3)
; CHECK-NEXT:    buffer_store_dword v86, v0, s[0:3], 0 offen offset:12
; CHECK-NEXT:    s_waitcnt vmcnt(2)
; CHECK-NEXT:    buffer_store_dword v87, v0, s[0:3], 0 offen offset:8
; CHECK-NEXT:    s_waitcnt vmcnt(1)
; CHECK-NEXT:    buffer_store_dword v96, v0, s[0:3], 0 offen offset:4
; CHECK-NEXT:    s_waitcnt vmcnt(0)
; CHECK-NEXT:    buffer_store_dword v97, v0, s[0:3], 0 offen
; CHECK-NEXT:    v_add_nc_u32_e32 v0, 0xffffff00, v0
; CHECK-NEXT:    s_cmp_eq_u64 s[4:5], 0
; CHECK-NEXT:    s_cbranch_scc0 .LBB8_5
; CHECK-NEXT:  .LBB8_6: ; %Flow19
; CHECK-NEXT:    s_or_b32 exec_lo, exec_lo, s6
; CHECK-NEXT:    s_setpc_b64 s[30:31]
;
; ALIGNED-LABEL: memmove_p5_p5_sz2048:
; ALIGNED:       ; %bb.0: ; %entry
; ALIGNED-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; ALIGNED-NEXT:    s_mov_b32 s4, exec_lo
; ALIGNED-NEXT:    v_cmpx_ge_u32_e64 v1, v0
; ALIGNED-NEXT:    s_xor_b32 s6, exec_lo, s4
; ALIGNED-NEXT:    s_cbranch_execz .LBB8_3
; ALIGNED-NEXT:  ; %bb.1: ; %memmove_fwd_loop.preheader
; ALIGNED-NEXT:    s_mov_b64 s[4:5], 0x80
; ALIGNED-NEXT:  .LBB8_2: ; %memmove_fwd_loop
; ALIGNED-NEXT:    ; =>This Inner Loop Header: Depth=1
; ALIGNED-NEXT:    s_clause 0xf
; ALIGNED-NEXT:    buffer_load_ubyte v2, v1, s[0:3], 0 offen offset:2
; ALIGNED-NEXT:    buffer_load_ubyte v3, v1, s[0:3], 0 offen offset:3
; ALIGNED-NEXT:    buffer_load_ubyte v4, v1, s[0:3], 0 offen
; ALIGNED-NEXT:    buffer_load_ubyte v5, v1, s[0:3], 0 offen offset:1
; ALIGNED-NEXT:    buffer_load_ubyte v6, v1, s[0:3], 0 offen offset:6
; ALIGNED-NEXT:    buffer_load_ubyte v7, v1, s[0:3], 0 offen offset:7
; ALIGNED-NEXT:    buffer_load_ubyte v8, v1, s[0:3], 0 offen offset:4
; ALIGNED-NEXT:    buffer_load_ubyte v9, v1, s[0:3], 0 offen offset:5
; ALIGNED-NEXT:    buffer_load_ubyte v10, v1, s[0:3], 0 offen offset:10
; ALIGNED-NEXT:    buffer_load_ubyte v11, v1, s[0:3], 0 offen offset:11
; ALIGNED-NEXT:    buffer_load_ubyte v12, v1, s[0:3], 0 offen offset:8
; ALIGNED-NEXT:    buffer_load_ubyte v13, v1, s[0:3], 0 offen offset:9
; ALIGNED-NEXT:    buffer_load_ubyte v14, v1, s[0:3], 0 offen offset:14
; ALIGNED-NEXT:    buffer_load_ubyte v15, v1, s[0:3], 0 offen offset:15
; ALIGNED-NEXT:    buffer_load_ubyte v16, v1, s[0:3], 0 offen offset:12
; ALIGNED-NEXT:    buffer_load_ubyte v17, v1, s[0:3], 0 offen offset:13
; ALIGNED-NEXT:    v_add_nc_u32_e32 v1, 16, v1
; ALIGNED-NEXT:    s_add_u32 s4, s4, -1
; ALIGNED-NEXT:    s_addc_u32 s5, s5, -1
; ALIGNED-NEXT:    s_waitcnt vmcnt(15)
; ALIGNED-NEXT:    buffer_store_byte v2, v0, s[0:3], 0 offen offset:2
; ALIGNED-NEXT:    s_waitcnt vmcnt(14)
; ALIGNED-NEXT:    buffer_store_byte v3, v0, s[0:3], 0 offen offset:3
; ALIGNED-NEXT:    s_waitcnt vmcnt(13)
; ALIGNED-NEXT:    buffer_store_byte v4, v0, s[0:3], 0 offen
; ALIGNED-NEXT:    s_waitcnt vmcnt(12)
; ALIGNED-NEXT:    buffer_store_byte v5, v0, s[0:3], 0 offen offset:1
; ALIGNED-NEXT:    s_waitcnt vmcnt(11)
; ALIGNED-NEXT:    buffer_store_byte v6, v0, s[0:3], 0 offen offset:6
; ALIGNED-NEXT:    s_waitcnt vmcnt(10)
; ALIGNED-NEXT:    buffer_store_byte v7, v0, s[0:3], 0 offen offset:7
; ALIGNED-NEXT:    s_waitcnt vmcnt(9)
; ALIGNED-NEXT:    buffer_store_byte v8, v0, s[0:3], 0 offen offset:4
; ALIGNED-NEXT:    s_waitcnt vmcnt(8)
; ALIGNED-NEXT:    buffer_store_byte v9, v0, s[0:3], 0 offen offset:5
; ALIGNED-NEXT:    s_waitcnt vmcnt(7)
; ALIGNED-NEXT:    buffer_store_byte v10, v0, s[0:3], 0 offen offset:10
; ALIGNED-NEXT:    s_waitcnt vmcnt(6)
; ALIGNED-NEXT:    buffer_store_byte v11, v0, s[0:3], 0 offen offset:11
; ALIGNED-NEXT:    s_waitcnt vmcnt(5)
; ALIGNED-NEXT:    buffer_store_byte v12, v0, s[0:3], 0 offen offset:8
; ALIGNED-NEXT:    s_waitcnt vmcnt(4)
; ALIGNED-NEXT:    buffer_store_byte v13, v0, s[0:3], 0 offen offset:9
; ALIGNED-NEXT:    s_waitcnt vmcnt(3)
; ALIGNED-NEXT:    buffer_store_byte v14, v0, s[0:3], 0 offen offset:14
; ALIGNED-NEXT:    s_waitcnt vmcnt(2)
; ALIGNED-NEXT:    buffer_store_byte v15, v0, s[0:3], 0 offen offset:15
; ALIGNED-NEXT:    s_waitcnt vmcnt(1)
; ALIGNED-NEXT:    buffer_store_byte v16, v0, s[0:3], 0 offen offset:12
; ALIGNED-NEXT:    s_waitcnt vmcnt(0)
; ALIGNED-NEXT:    buffer_store_byte v17, v0, s[0:3], 0 offen offset:13
; ALIGNED-NEXT:    v_add_nc_u32_e32 v0, 16, v0
; ALIGNED-NEXT:    s_cmp_lg_u64 s[4:5], 0
; ALIGNED-NEXT:    s_cbranch_scc1 .LBB8_2
; ALIGNED-NEXT:  .LBB8_3: ; %Flow18
; ALIGNED-NEXT:    s_andn2_saveexec_b32 s6, s6
; ALIGNED-NEXT:    s_cbranch_execz .LBB8_6
; ALIGNED-NEXT:  ; %bb.4: ; %memmove_bwd_loop.preheader
; ALIGNED-NEXT:    v_add_nc_u32_e32 v0, 0x7f0, v0
; ALIGNED-NEXT:    v_add_nc_u32_e32 v1, 0x7f0, v1
; ALIGNED-NEXT:    s_movk_i32 s4, 0xff80
; ALIGNED-NEXT:    s_mov_b32 s5, -1
; ALIGNED-NEXT:  .LBB8_5: ; %memmove_bwd_loop
; ALIGNED-NEXT:    ; =>This Inner Loop Header: Depth=1
; ALIGNED-NEXT:    s_clause 0xf
; ALIGNED-NEXT:    buffer_load_ubyte v2, v1, s[0:3], 0 offen offset:2
; ALIGNED-NEXT:    buffer_load_ubyte v3, v1, s[0:3], 0 offen offset:3
; ALIGNED-NEXT:    buffer_load_ubyte v4, v1, s[0:3], 0 offen
; ALIGNED-NEXT:    buffer_load_ubyte v5, v1, s[0:3], 0 offen offset:1
; ALIGNED-NEXT:    buffer_load_ubyte v6, v1, s[0:3], 0 offen offset:6
; ALIGNED-NEXT:    buffer_load_ubyte v7, v1, s[0:3], 0 offen offset:7
; ALIGNED-NEXT:    buffer_load_ubyte v8, v1, s[0:3], 0 offen offset:4
; ALIGNED-NEXT:    buffer_load_ubyte v9, v1, s[0:3], 0 offen offset:5
; ALIGNED-NEXT:    buffer_load_ubyte v10, v1, s[0:3], 0 offen offset:10
; ALIGNED-NEXT:    buffer_load_ubyte v11, v1, s[0:3], 0 offen offset:11
; ALIGNED-NEXT:    buffer_load_ubyte v12, v1, s[0:3], 0 offen offset:8
; ALIGNED-NEXT:    buffer_load_ubyte v13, v1, s[0:3], 0 offen offset:9
; ALIGNED-NEXT:    buffer_load_ubyte v14, v1, s[0:3], 0 offen offset:14
; ALIGNED-NEXT:    buffer_load_ubyte v15, v1, s[0:3], 0 offen offset:15
; ALIGNED-NEXT:    buffer_load_ubyte v16, v1, s[0:3], 0 offen offset:12
; ALIGNED-NEXT:    buffer_load_ubyte v17, v1, s[0:3], 0 offen offset:13
; ALIGNED-NEXT:    v_add_nc_u32_e32 v1, -16, v1
; ALIGNED-NEXT:    s_add_u32 s4, s4, 1
; ALIGNED-NEXT:    s_addc_u32 s5, s5, 0
; ALIGNED-NEXT:    s_waitcnt vmcnt(15)
; ALIGNED-NEXT:    buffer_store_byte v2, v0, s[0:3], 0 offen offset:2
; ALIGNED-NEXT:    s_waitcnt vmcnt(14)
; ALIGNED-NEXT:    buffer_store_byte v3, v0, s[0:3], 0 offen offset:3
; ALIGNED-NEXT:    s_waitcnt vmcnt(13)
; ALIGNED-NEXT:    buffer_store_byte v4, v0, s[0:3], 0 offen
; ALIGNED-NEXT:    s_waitcnt vmcnt(12)
; ALIGNED-NEXT:    buffer_store_byte v5, v0, s[0:3], 0 offen offset:1
; ALIGNED-NEXT:    s_waitcnt vmcnt(11)
; ALIGNED-NEXT:    buffer_store_byte v6, v0, s[0:3], 0 offen offset:6
; ALIGNED-NEXT:    s_waitcnt vmcnt(10)
; ALIGNED-NEXT:    buffer_store_byte v7, v0, s[0:3], 0 offen offset:7
; ALIGNED-NEXT:    s_waitcnt vmcnt(9)
; ALIGNED-NEXT:    buffer_store_byte v8, v0, s[0:3], 0 offen offset:4
; ALIGNED-NEXT:    s_waitcnt vmcnt(8)
; ALIGNED-NEXT:    buffer_store_byte v9, v0, s[0:3], 0 offen offset:5
; ALIGNED-NEXT:    s_waitcnt vmcnt(7)
; ALIGNED-NEXT:    buffer_store_byte v10, v0, s[0:3], 0 offen offset:10
; ALIGNED-NEXT:    s_waitcnt vmcnt(6)
; ALIGNED-NEXT:    buffer_store_byte v11, v0, s[0:3], 0 offen offset:11
; ALIGNED-NEXT:    s_waitcnt vmcnt(5)
; ALIGNED-NEXT:    buffer_store_byte v12, v0, s[0:3], 0 offen offset:8
; ALIGNED-NEXT:    s_waitcnt vmcnt(4)
; ALIGNED-NEXT:    buffer_store_byte v13, v0, s[0:3], 0 offen offset:9
; ALIGNED-NEXT:    s_waitcnt vmcnt(3)
; ALIGNED-NEXT:    buffer_store_byte v14, v0, s[0:3], 0 offen offset:14
; ALIGNED-NEXT:    s_waitcnt vmcnt(2)
; ALIGNED-NEXT:    buffer_store_byte v15, v0, s[0:3], 0 offen offset:15
; ALIGNED-NEXT:    s_waitcnt vmcnt(1)
; ALIGNED-NEXT:    buffer_store_byte v16, v0, s[0:3], 0 offen offset:12
; ALIGNED-NEXT:    s_waitcnt vmcnt(0)
; ALIGNED-NEXT:    buffer_store_byte v17, v0, s[0:3], 0 offen offset:13
; ALIGNED-NEXT:    v_add_nc_u32_e32 v0, -16, v0
; ALIGNED-NEXT:    s_cmp_eq_u64 s[4:5], 0
; ALIGNED-NEXT:    s_cbranch_scc0 .LBB8_5
; ALIGNED-NEXT:  .LBB8_6: ; %Flow19
; ALIGNED-NEXT:    s_or_b32 exec_lo, exec_lo, s6
; ALIGNED-NEXT:    s_setpc_b64 s[30:31]
entry:
  tail call void @llvm.memmove.p5.p5.i64(ptr addrspace(5) noundef nonnull align 1 %dst, ptr addrspace(5) noundef nonnull align 1 %src, i64 2048, i1 false)
  ret void
}

define void @memmove_p0_p5_sz2048(ptr addrspace(0) align 1 %dst, ptr addrspace(5) align 1 readonly %src) {
; CHECK-LABEL: memmove_p0_p5_sz2048:
; CHECK:       ; %bb.0: ; %entry
; CHECK-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; CHECK-NEXT:    v_cmp_ne_u32_e32 vcc_lo, -1, v2
; CHECK-NEXT:    s_mov_b64 s[4:5], src_private_base
; CHECK-NEXT:    s_mov_b32 s4, exec_lo
; CHECK-NEXT:    v_cndmask_b32_e64 v4, 0, s5, vcc_lo
; CHECK-NEXT:    v_cndmask_b32_e32 v3, 0, v2, vcc_lo
; CHECK-NEXT:    v_cmpx_ge_u64_e64 v[3:4], v[0:1]
; CHECK-NEXT:    s_xor_b32 s6, exec_lo, s4
; CHECK-NEXT:    s_cbranch_execz .LBB9_3
; CHECK-NEXT:  ; %bb.1: ; %memmove_fwd_loop.preheader
; CHECK-NEXT:    s_mov_b64 s[4:5], 0
; CHECK-NEXT:  .LBB9_2: ; %memmove_fwd_loop
; CHECK-NEXT:    ; =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    s_clause 0x3e
; CHECK-NEXT:    buffer_load_dword v3, v2, s[0:3], 0 offen offset:16
; CHECK-NEXT:    buffer_load_dword v4, v2, s[0:3], 0 offen offset:20
; CHECK-NEXT:    buffer_load_dword v5, v2, s[0:3], 0 offen offset:24
; CHECK-NEXT:    buffer_load_dword v6, v2, s[0:3], 0 offen offset:28
; CHECK-NEXT:    buffer_load_dword v7, v2, s[0:3], 0 offen offset:32
; CHECK-NEXT:    buffer_load_dword v8, v2, s[0:3], 0 offen offset:36
; CHECK-NEXT:    buffer_load_dword v9, v2, s[0:3], 0 offen offset:40
; CHECK-NEXT:    buffer_load_dword v10, v2, s[0:3], 0 offen offset:44
; CHECK-NEXT:    buffer_load_dword v11, v2, s[0:3], 0 offen offset:48
; CHECK-NEXT:    buffer_load_dword v12, v2, s[0:3], 0 offen offset:52
; CHECK-NEXT:    buffer_load_dword v13, v2, s[0:3], 0 offen offset:56
; CHECK-NEXT:    buffer_load_dword v14, v2, s[0:3], 0 offen offset:60
; CHECK-NEXT:    buffer_load_dword v18, v2, s[0:3], 0 offen offset:92
; CHECK-NEXT:    buffer_load_dword v17, v2, s[0:3], 0 offen offset:88
; CHECK-NEXT:    buffer_load_dword v16, v2, s[0:3], 0 offen offset:84
; CHECK-NEXT:    buffer_load_dword v15, v2, s[0:3], 0 offen offset:80
; CHECK-NEXT:    buffer_load_dword v22, v2, s[0:3], 0 offen offset:124
; CHECK-NEXT:    buffer_load_dword v21, v2, s[0:3], 0 offen offset:120
; CHECK-NEXT:    buffer_load_dword v20, v2, s[0:3], 0 offen offset:116
; CHECK-NEXT:    buffer_load_dword v19, v2, s[0:3], 0 offen offset:112
; CHECK-NEXT:    buffer_load_dword v26, v2, s[0:3], 0 offen offset:108
; CHECK-NEXT:    buffer_load_dword v25, v2, s[0:3], 0 offen offset:104
; CHECK-NEXT:    buffer_load_dword v24, v2, s[0:3], 0 offen offset:100
; CHECK-NEXT:    buffer_load_dword v23, v2, s[0:3], 0 offen offset:96
; CHECK-NEXT:    buffer_load_dword v30, v2, s[0:3], 0 offen offset:156
; CHECK-NEXT:    buffer_load_dword v29, v2, s[0:3], 0 offen offset:152
; CHECK-NEXT:    buffer_load_dword v28, v2, s[0:3], 0 offen offset:148
; CHECK-NEXT:    buffer_load_dword v27, v2, s[0:3], 0 offen offset:144
; CHECK-NEXT:    buffer_load_dword v34, v2, s[0:3], 0 offen offset:188
; CHECK-NEXT:    buffer_load_dword v33, v2, s[0:3], 0 offen offset:184
; CHECK-NEXT:    buffer_load_dword v32, v2, s[0:3], 0 offen offset:180
; CHECK-NEXT:    buffer_load_dword v31, v2, s[0:3], 0 offen offset:176
; CHECK-NEXT:    buffer_load_dword v38, v2, s[0:3], 0 offen offset:172
; CHECK-NEXT:    buffer_load_dword v37, v2, s[0:3], 0 offen offset:168
; CHECK-NEXT:    buffer_load_dword v36, v2, s[0:3], 0 offen offset:164
; CHECK-NEXT:    buffer_load_dword v35, v2, s[0:3], 0 offen offset:160
; CHECK-NEXT:    buffer_load_dword v51, v2, s[0:3], 0 offen offset:220
; CHECK-NEXT:    buffer_load_dword v50, v2, s[0:3], 0 offen offset:216
; CHECK-NEXT:    buffer_load_dword v49, v2, s[0:3], 0 offen offset:212
; CHECK-NEXT:    buffer_load_dword v48, v2, s[0:3], 0 offen offset:208
; CHECK-NEXT:    buffer_load_dword v55, v2, s[0:3], 0 offen offset:252
; CHECK-NEXT:    buffer_load_dword v54, v2, s[0:3], 0 offen offset:248
; CHECK-NEXT:    buffer_load_dword v53, v2, s[0:3], 0 offen offset:244
; CHECK-NEXT:    buffer_load_dword v52, v2, s[0:3], 0 offen offset:240
; CHECK-NEXT:    buffer_load_dword v67, v2, s[0:3], 0 offen offset:236
; CHECK-NEXT:    buffer_load_dword v66, v2, s[0:3], 0 offen offset:232
; CHECK-NEXT:    buffer_load_dword v65, v2, s[0:3], 0 offen offset:228
; CHECK-NEXT:    buffer_load_dword v64, v2, s[0:3], 0 offen offset:224
; CHECK-NEXT:    buffer_load_dword v71, v2, s[0:3], 0 offen offset:204
; CHECK-NEXT:    buffer_load_dword v70, v2, s[0:3], 0 offen offset:200
; CHECK-NEXT:    buffer_load_dword v69, v2, s[0:3], 0 offen offset:196
; CHECK-NEXT:    buffer_load_dword v68, v2, s[0:3], 0 offen offset:192
; CHECK-NEXT:    buffer_load_dword v83, v2, s[0:3], 0 offen offset:140
; CHECK-NEXT:    buffer_load_dword v82, v2, s[0:3], 0 offen offset:136
; CHECK-NEXT:    buffer_load_dword v81, v2, s[0:3], 0 offen offset:132
; CHECK-NEXT:    buffer_load_dword v80, v2, s[0:3], 0 offen offset:128
; CHECK-NEXT:    buffer_load_dword v87, v2, s[0:3], 0 offen offset:76
; CHECK-NEXT:    buffer_load_dword v86, v2, s[0:3], 0 offen offset:72
; CHECK-NEXT:    buffer_load_dword v85, v2, s[0:3], 0 offen offset:68
; CHECK-NEXT:    buffer_load_dword v84, v2, s[0:3], 0 offen offset:64
; CHECK-NEXT:    buffer_load_dword v96, v2, s[0:3], 0 offen
; CHECK-NEXT:    buffer_load_dword v97, v2, s[0:3], 0 offen offset:4
; CHECK-NEXT:    buffer_load_dword v98, v2, s[0:3], 0 offen offset:8
; CHECK-NEXT:    buffer_load_dword v99, v2, s[0:3], 0 offen offset:12
; CHECK-NEXT:    v_add_co_u32 v100, vcc_lo, v0, s4
; CHECK-NEXT:    v_add_co_ci_u32_e32 v101, vcc_lo, s5, v1, vcc_lo
; CHECK-NEXT:    v_add_nc_u32_e32 v2, 0x100, v2
; CHECK-NEXT:    s_add_u32 s4, s4, 0x100
; CHECK-NEXT:    s_addc_u32 s5, s5, 0
; CHECK-NEXT:    s_waitcnt vmcnt(20)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[52:55] offset:240
; CHECK-NEXT:    s_waitcnt vmcnt(16)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[64:67] offset:224
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[48:51] offset:208
; CHECK-NEXT:    s_waitcnt vmcnt(12)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[68:71] offset:192
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[31:34] offset:176
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[35:38] offset:160
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[27:30] offset:144
; CHECK-NEXT:    s_waitcnt vmcnt(8)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[80:83] offset:128
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[19:22] offset:112
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[23:26] offset:96
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[15:18] offset:80
; CHECK-NEXT:    s_waitcnt vmcnt(4)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[84:87] offset:64
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[11:14] offset:48
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[7:10] offset:32
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[3:6] offset:16
; CHECK-NEXT:    s_waitcnt vmcnt(0)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[96:99]
; CHECK-NEXT:    s_cmp_lg_u64 s[4:5], 0x800
; CHECK-NEXT:    s_cbranch_scc1 .LBB9_2
; CHECK-NEXT:  .LBB9_3: ; %Flow13
; CHECK-NEXT:    s_andn2_saveexec_b32 s8, s6
; CHECK-NEXT:    s_cbranch_execz .LBB9_6
; CHECK-NEXT:  ; %bb.4: ; %memmove_bwd_loop.preheader
; CHECK-NEXT:    v_add_nc_u32_e32 v2, 0x700, v2
; CHECK-NEXT:    s_movk_i32 s6, 0xff00
; CHECK-NEXT:    s_mov_b64 s[4:5], 0x700
; CHECK-NEXT:    s_mov_b32 s7, -1
; CHECK-NEXT:  .LBB9_5: ; %memmove_bwd_loop
; CHECK-NEXT:    ; =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    s_clause 0x3e
; CHECK-NEXT:    buffer_load_dword v4, v2, s[0:3], 0 offen offset:20
; CHECK-NEXT:    buffer_load_dword v5, v2, s[0:3], 0 offen offset:24
; CHECK-NEXT:    buffer_load_dword v6, v2, s[0:3], 0 offen offset:28
; CHECK-NEXT:    buffer_load_dword v7, v2, s[0:3], 0 offen offset:32
; CHECK-NEXT:    buffer_load_dword v8, v2, s[0:3], 0 offen offset:36
; CHECK-NEXT:    buffer_load_dword v9, v2, s[0:3], 0 offen offset:40
; CHECK-NEXT:    buffer_load_dword v10, v2, s[0:3], 0 offen offset:44
; CHECK-NEXT:    buffer_load_dword v11, v2, s[0:3], 0 offen offset:48
; CHECK-NEXT:    buffer_load_dword v12, v2, s[0:3], 0 offen offset:52
; CHECK-NEXT:    buffer_load_dword v13, v2, s[0:3], 0 offen offset:56
; CHECK-NEXT:    buffer_load_dword v14, v2, s[0:3], 0 offen offset:60
; CHECK-NEXT:    buffer_load_dword v18, v2, s[0:3], 0 offen offset:124
; CHECK-NEXT:    buffer_load_dword v17, v2, s[0:3], 0 offen offset:120
; CHECK-NEXT:    buffer_load_dword v16, v2, s[0:3], 0 offen offset:116
; CHECK-NEXT:    buffer_load_dword v15, v2, s[0:3], 0 offen offset:112
; CHECK-NEXT:    buffer_load_dword v22, v2, s[0:3], 0 offen offset:108
; CHECK-NEXT:    buffer_load_dword v21, v2, s[0:3], 0 offen offset:104
; CHECK-NEXT:    buffer_load_dword v20, v2, s[0:3], 0 offen offset:100
; CHECK-NEXT:    buffer_load_dword v19, v2, s[0:3], 0 offen offset:96
; CHECK-NEXT:    buffer_load_dword v26, v2, s[0:3], 0 offen offset:252
; CHECK-NEXT:    buffer_load_dword v25, v2, s[0:3], 0 offen offset:248
; CHECK-NEXT:    buffer_load_dword v24, v2, s[0:3], 0 offen offset:244
; CHECK-NEXT:    buffer_load_dword v23, v2, s[0:3], 0 offen offset:240
; CHECK-NEXT:    buffer_load_dword v30, v2, s[0:3], 0 offen offset:236
; CHECK-NEXT:    buffer_load_dword v29, v2, s[0:3], 0 offen offset:232
; CHECK-NEXT:    buffer_load_dword v28, v2, s[0:3], 0 offen offset:228
; CHECK-NEXT:    buffer_load_dword v27, v2, s[0:3], 0 offen offset:224
; CHECK-NEXT:    buffer_load_dword v34, v2, s[0:3], 0 offen offset:220
; CHECK-NEXT:    buffer_load_dword v33, v2, s[0:3], 0 offen offset:216
; CHECK-NEXT:    buffer_load_dword v32, v2, s[0:3], 0 offen offset:212
; CHECK-NEXT:    buffer_load_dword v31, v2, s[0:3], 0 offen offset:208
; CHECK-NEXT:    buffer_load_dword v38, v2, s[0:3], 0 offen offset:204
; CHECK-NEXT:    buffer_load_dword v37, v2, s[0:3], 0 offen offset:200
; CHECK-NEXT:    buffer_load_dword v36, v2, s[0:3], 0 offen offset:196
; CHECK-NEXT:    buffer_load_dword v35, v2, s[0:3], 0 offen offset:192
; CHECK-NEXT:    buffer_load_dword v51, v2, s[0:3], 0 offen offset:188
; CHECK-NEXT:    buffer_load_dword v50, v2, s[0:3], 0 offen offset:184
; CHECK-NEXT:    buffer_load_dword v49, v2, s[0:3], 0 offen offset:180
; CHECK-NEXT:    buffer_load_dword v48, v2, s[0:3], 0 offen offset:176
; CHECK-NEXT:    buffer_load_dword v55, v2, s[0:3], 0 offen offset:172
; CHECK-NEXT:    buffer_load_dword v54, v2, s[0:3], 0 offen offset:168
; CHECK-NEXT:    buffer_load_dword v53, v2, s[0:3], 0 offen offset:164
; CHECK-NEXT:    buffer_load_dword v52, v2, s[0:3], 0 offen offset:160
; CHECK-NEXT:    buffer_load_dword v67, v2, s[0:3], 0 offen offset:156
; CHECK-NEXT:    buffer_load_dword v66, v2, s[0:3], 0 offen offset:152
; CHECK-NEXT:    buffer_load_dword v65, v2, s[0:3], 0 offen offset:148
; CHECK-NEXT:    buffer_load_dword v64, v2, s[0:3], 0 offen offset:144
; CHECK-NEXT:    buffer_load_dword v71, v2, s[0:3], 0 offen offset:140
; CHECK-NEXT:    buffer_load_dword v70, v2, s[0:3], 0 offen offset:136
; CHECK-NEXT:    buffer_load_dword v69, v2, s[0:3], 0 offen offset:132
; CHECK-NEXT:    buffer_load_dword v68, v2, s[0:3], 0 offen offset:128
; CHECK-NEXT:    buffer_load_dword v83, v2, s[0:3], 0 offen offset:92
; CHECK-NEXT:    buffer_load_dword v82, v2, s[0:3], 0 offen offset:88
; CHECK-NEXT:    buffer_load_dword v81, v2, s[0:3], 0 offen offset:84
; CHECK-NEXT:    buffer_load_dword v80, v2, s[0:3], 0 offen offset:80
; CHECK-NEXT:    buffer_load_dword v87, v2, s[0:3], 0 offen offset:76
; CHECK-NEXT:    buffer_load_dword v86, v2, s[0:3], 0 offen offset:72
; CHECK-NEXT:    buffer_load_dword v85, v2, s[0:3], 0 offen offset:68
; CHECK-NEXT:    buffer_load_dword v84, v2, s[0:3], 0 offen offset:64
; CHECK-NEXT:    buffer_load_dword v96, v2, s[0:3], 0 offen
; CHECK-NEXT:    buffer_load_dword v97, v2, s[0:3], 0 offen offset:4
; CHECK-NEXT:    buffer_load_dword v98, v2, s[0:3], 0 offen offset:8
; CHECK-NEXT:    buffer_load_dword v3, v2, s[0:3], 0 offen offset:16
; CHECK-NEXT:    buffer_load_dword v99, v2, s[0:3], 0 offen offset:12
; CHECK-NEXT:    v_add_co_u32 v100, vcc_lo, v0, s4
; CHECK-NEXT:    v_add_co_ci_u32_e32 v101, vcc_lo, s5, v1, vcc_lo
; CHECK-NEXT:    v_add_nc_u32_e32 v2, 0xffffff00, v2
; CHECK-NEXT:    s_add_u32 s4, s4, 0xffffff00
; CHECK-NEXT:    s_addc_u32 s5, s5, -1
; CHECK-NEXT:    s_waitcnt vmcnt(41)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[23:26] offset:240
; CHECK-NEXT:    s_waitcnt vmcnt(37)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[27:30] offset:224
; CHECK-NEXT:    s_waitcnt vmcnt(33)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[31:34] offset:208
; CHECK-NEXT:    s_waitcnt vmcnt(29)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[35:38] offset:192
; CHECK-NEXT:    s_waitcnt vmcnt(25)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[48:51] offset:176
; CHECK-NEXT:    s_waitcnt vmcnt(21)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[52:55] offset:160
; CHECK-NEXT:    s_waitcnt vmcnt(17)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[64:67] offset:144
; CHECK-NEXT:    s_waitcnt vmcnt(13)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[68:71] offset:128
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[15:18] offset:112
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[19:22] offset:96
; CHECK-NEXT:    s_waitcnt vmcnt(9)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[80:83] offset:80
; CHECK-NEXT:    s_waitcnt vmcnt(5)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[84:87] offset:64
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[11:14] offset:48
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[7:10] offset:32
; CHECK-NEXT:    s_waitcnt vmcnt(1)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[3:6] offset:16
; CHECK-NEXT:    s_waitcnt vmcnt(0)
; CHECK-NEXT:    flat_store_dwordx4 v[100:101], v[96:99]
; CHECK-NEXT:    s_cmp_eq_u64 s[4:5], s[6:7]
; CHECK-NEXT:    s_cbranch_scc0 .LBB9_5
; CHECK-NEXT:  .LBB9_6: ; %Flow14
; CHECK-NEXT:    s_or_b32 exec_lo, exec_lo, s8
; CHECK-NEXT:    s_waitcnt lgkmcnt(0)
; CHECK-NEXT:    s_setpc_b64 s[30:31]
;
; ALIGNED-LABEL: memmove_p0_p5_sz2048:
; ALIGNED:       ; %bb.0: ; %entry
; ALIGNED-NEXT:    s_waitcnt vmcnt(0) expcnt(0) lgkmcnt(0)
; ALIGNED-NEXT:    v_cmp_ne_u32_e32 vcc_lo, -1, v2
; ALIGNED-NEXT:    s_mov_b64 s[4:5], src_private_base
; ALIGNED-NEXT:    s_mov_b32 s4, exec_lo
; ALIGNED-NEXT:    v_cndmask_b32_e64 v4, 0, s5, vcc_lo
; ALIGNED-NEXT:    v_cndmask_b32_e32 v3, 0, v2, vcc_lo
; ALIGNED-NEXT:    v_cmpx_ge_u64_e64 v[3:4], v[0:1]
; ALIGNED-NEXT:    s_xor_b32 s6, exec_lo, s4
; ALIGNED-NEXT:    s_cbranch_execz .LBB9_3
; ALIGNED-NEXT:  ; %bb.1: ; %memmove_fwd_loop.preheader
; ALIGNED-NEXT:    s_mov_b64 s[4:5], 0
; ALIGNED-NEXT:  .LBB9_2: ; %memmove_fwd_loop
; ALIGNED-NEXT:    ; =>This Inner Loop Header: Depth=1
; ALIGNED-NEXT:    s_clause 0xf
; ALIGNED-NEXT:    buffer_load_ubyte v5, v2, s[0:3], 0 offen offset:2
; ALIGNED-NEXT:    buffer_load_ubyte v6, v2, s[0:3], 0 offen offset:3
; ALIGNED-NEXT:    buffer_load_ubyte v7, v2, s[0:3], 0 offen
; ALIGNED-NEXT:    buffer_load_ubyte v8, v2, s[0:3], 0 offen offset:1
; ALIGNED-NEXT:    buffer_load_ubyte v9, v2, s[0:3], 0 offen offset:6
; ALIGNED-NEXT:    buffer_load_ubyte v10, v2, s[0:3], 0 offen offset:7
; ALIGNED-NEXT:    buffer_load_ubyte v11, v2, s[0:3], 0 offen offset:4
; ALIGNED-NEXT:    buffer_load_ubyte v12, v2, s[0:3], 0 offen offset:5
; ALIGNED-NEXT:    buffer_load_ubyte v13, v2, s[0:3], 0 offen offset:10
; ALIGNED-NEXT:    buffer_load_ubyte v14, v2, s[0:3], 0 offen offset:11
; ALIGNED-NEXT:    buffer_load_ubyte v15, v2, s[0:3], 0 offen offset:8
; ALIGNED-NEXT:    buffer_load_ubyte v16, v2, s[0:3], 0 offen offset:9
; ALIGNED-NEXT:    buffer_load_ubyte v17, v2, s[0:3], 0 offen offset:14
; ALIGNED-NEXT:    buffer_load_ubyte v18, v2, s[0:3], 0 offen offset:15
; ALIGNED-NEXT:    buffer_load_ubyte v19, v2, s[0:3], 0 offen offset:12
; ALIGNED-NEXT:    buffer_load_ubyte v20, v2, s[0:3], 0 offen offset:13
; ALIGNED-NEXT:    v_add_co_u32 v3, vcc_lo, v0, s4
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v4, vcc_lo, s5, v1, vcc_lo
; ALIGNED-NEXT:    v_add_nc_u32_e32 v2, 16, v2
; ALIGNED-NEXT:    s_add_u32 s4, s4, 16
; ALIGNED-NEXT:    s_addc_u32 s5, s5, 0
; ALIGNED-NEXT:    s_waitcnt vmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v5 offset:2
; ALIGNED-NEXT:    s_waitcnt vmcnt(14)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v6 offset:3
; ALIGNED-NEXT:    s_waitcnt vmcnt(13)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v7
; ALIGNED-NEXT:    s_waitcnt vmcnt(12)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v8 offset:1
; ALIGNED-NEXT:    s_waitcnt vmcnt(11)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v9 offset:6
; ALIGNED-NEXT:    s_waitcnt vmcnt(10)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v10 offset:7
; ALIGNED-NEXT:    s_waitcnt vmcnt(9)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v11 offset:4
; ALIGNED-NEXT:    s_waitcnt vmcnt(8)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v12 offset:5
; ALIGNED-NEXT:    s_waitcnt vmcnt(7)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v13 offset:10
; ALIGNED-NEXT:    s_waitcnt vmcnt(6)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v14 offset:11
; ALIGNED-NEXT:    s_waitcnt vmcnt(5)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v15 offset:8
; ALIGNED-NEXT:    s_waitcnt vmcnt(4)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v16 offset:9
; ALIGNED-NEXT:    s_waitcnt vmcnt(3)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v17 offset:14
; ALIGNED-NEXT:    s_waitcnt vmcnt(2)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v18 offset:15
; ALIGNED-NEXT:    s_waitcnt vmcnt(1)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v19 offset:12
; ALIGNED-NEXT:    s_waitcnt vmcnt(0)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v20 offset:13
; ALIGNED-NEXT:    s_cmp_lg_u64 s[4:5], 0x800
; ALIGNED-NEXT:    s_cbranch_scc1 .LBB9_2
; ALIGNED-NEXT:  .LBB9_3: ; %Flow13
; ALIGNED-NEXT:    s_andn2_saveexec_b32 s6, s6
; ALIGNED-NEXT:    s_cbranch_execz .LBB9_6
; ALIGNED-NEXT:  ; %bb.4: ; %memmove_bwd_loop.preheader
; ALIGNED-NEXT:    v_add_nc_u32_e32 v2, 0x7f0, v2
; ALIGNED-NEXT:    s_mov_b64 s[4:5], 0x7f0
; ALIGNED-NEXT:  .LBB9_5: ; %memmove_bwd_loop
; ALIGNED-NEXT:    ; =>This Inner Loop Header: Depth=1
; ALIGNED-NEXT:    s_clause 0xf
; ALIGNED-NEXT:    buffer_load_ubyte v5, v2, s[0:3], 0 offen offset:2
; ALIGNED-NEXT:    buffer_load_ubyte v6, v2, s[0:3], 0 offen offset:3
; ALIGNED-NEXT:    buffer_load_ubyte v7, v2, s[0:3], 0 offen
; ALIGNED-NEXT:    buffer_load_ubyte v8, v2, s[0:3], 0 offen offset:1
; ALIGNED-NEXT:    buffer_load_ubyte v9, v2, s[0:3], 0 offen offset:6
; ALIGNED-NEXT:    buffer_load_ubyte v10, v2, s[0:3], 0 offen offset:7
; ALIGNED-NEXT:    buffer_load_ubyte v11, v2, s[0:3], 0 offen offset:4
; ALIGNED-NEXT:    buffer_load_ubyte v12, v2, s[0:3], 0 offen offset:5
; ALIGNED-NEXT:    buffer_load_ubyte v13, v2, s[0:3], 0 offen offset:10
; ALIGNED-NEXT:    buffer_load_ubyte v14, v2, s[0:3], 0 offen offset:11
; ALIGNED-NEXT:    buffer_load_ubyte v15, v2, s[0:3], 0 offen offset:8
; ALIGNED-NEXT:    buffer_load_ubyte v16, v2, s[0:3], 0 offen offset:9
; ALIGNED-NEXT:    buffer_load_ubyte v17, v2, s[0:3], 0 offen offset:14
; ALIGNED-NEXT:    buffer_load_ubyte v18, v2, s[0:3], 0 offen offset:15
; ALIGNED-NEXT:    buffer_load_ubyte v19, v2, s[0:3], 0 offen offset:12
; ALIGNED-NEXT:    buffer_load_ubyte v20, v2, s[0:3], 0 offen offset:13
; ALIGNED-NEXT:    v_add_co_u32 v3, vcc_lo, v0, s4
; ALIGNED-NEXT:    v_add_co_ci_u32_e32 v4, vcc_lo, s5, v1, vcc_lo
; ALIGNED-NEXT:    v_add_nc_u32_e32 v2, -16, v2
; ALIGNED-NEXT:    s_add_u32 s4, s4, -16
; ALIGNED-NEXT:    s_addc_u32 s5, s5, -1
; ALIGNED-NEXT:    s_waitcnt vmcnt(15)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v5 offset:2
; ALIGNED-NEXT:    s_waitcnt vmcnt(14)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v6 offset:3
; ALIGNED-NEXT:    s_waitcnt vmcnt(13)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v7
; ALIGNED-NEXT:    s_waitcnt vmcnt(12)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v8 offset:1
; ALIGNED-NEXT:    s_waitcnt vmcnt(11)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v9 offset:6
; ALIGNED-NEXT:    s_waitcnt vmcnt(10)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v10 offset:7
; ALIGNED-NEXT:    s_waitcnt vmcnt(9)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v11 offset:4
; ALIGNED-NEXT:    s_waitcnt vmcnt(8)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v12 offset:5
; ALIGNED-NEXT:    s_waitcnt vmcnt(7)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v13 offset:10
; ALIGNED-NEXT:    s_waitcnt vmcnt(6)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v14 offset:11
; ALIGNED-NEXT:    s_waitcnt vmcnt(5)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v15 offset:8
; ALIGNED-NEXT:    s_waitcnt vmcnt(4)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v16 offset:9
; ALIGNED-NEXT:    s_waitcnt vmcnt(3)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v17 offset:14
; ALIGNED-NEXT:    s_waitcnt vmcnt(2)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v18 offset:15
; ALIGNED-NEXT:    s_waitcnt vmcnt(1)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v19 offset:12
; ALIGNED-NEXT:    s_waitcnt vmcnt(0)
; ALIGNED-NEXT:    flat_store_byte v[3:4], v20 offset:13
; ALIGNED-NEXT:    s_cmp_eq_u64 s[4:5], -16
; ALIGNED-NEXT:    s_cbranch_scc0 .LBB9_5
; ALIGNED-NEXT:  .LBB9_6: ; %Flow14
; ALIGNED-NEXT:    s_or_b32 exec_lo, exec_lo, s6
; ALIGNED-NEXT:    s_waitcnt lgkmcnt(0)
; ALIGNED-NEXT:    s_setpc_b64 s[30:31]
entry:
  tail call void @llvm.memmove.p0.p5.i64(ptr addrspace(0) noundef nonnull align 1 %dst, ptr addrspace(5) noundef nonnull align 1 %src, i64 2048, i1 false)
  ret void
}


declare void @llvm.memcpy.p0.p0.i64(ptr addrspace(0) noalias nocapture writeonly, ptr addrspace(0) noalias nocapture readonly, i64, i1 immarg) #2
declare void @llvm.memcpy.p1.p1.i64(ptr addrspace(1) noalias nocapture writeonly, ptr addrspace(1) noalias nocapture readonly, i64, i1 immarg) #2
declare void @llvm.memcpy.p0.p4.i64(ptr addrspace(0) noalias nocapture writeonly, ptr addrspace(4) noalias nocapture readonly, i64, i1 immarg) #2
declare void @llvm.memcpy.p5.p5.i64(ptr addrspace(5) noalias nocapture writeonly, ptr addrspace(5) noalias nocapture readonly, i64, i1 immarg) #2

declare void @llvm.memcpy.p0.p5.i64(ptr addrspace(0) noalias nocapture writeonly, ptr addrspace(5) noalias nocapture readonly, i64, i1 immarg) #2

declare void @llvm.memmove.p0.p0.i64(ptr addrspace(0) nocapture writeonly, ptr addrspace(0) nocapture readonly, i64, i1 immarg) #2
declare void @llvm.memmove.p1.p1.i64(ptr addrspace(1) nocapture writeonly, ptr addrspace(1) nocapture readonly, i64, i1 immarg) #2
declare void @llvm.memmove.p0.p4.i64(ptr addrspace(0) nocapture writeonly, ptr addrspace(4) nocapture readonly, i64, i1 immarg) #2
declare void @llvm.memmove.p5.p5.i64(ptr addrspace(5) nocapture writeonly, ptr addrspace(5) nocapture readonly, i64, i1 immarg) #2

declare void @llvm.memmove.p0.p5.i64(ptr addrspace(0) nocapture writeonly, ptr addrspace(5) nocapture readonly, i64, i1 immarg) #2

attributes #2 = { nocallback nofree nounwind willreturn memory(argmem: readwrite) }
